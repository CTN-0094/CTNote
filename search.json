[{"path":"https://ctn-0094.github.io/CTNote/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"GNU General Public License","title":"GNU General Public License","text":"Version 3, 29 June 2007Copyright © 2007 Free Software Foundation, Inc. <http://fsf.org/> Everyone permitted copy distribute verbatim copies license document, changing allowed.","code":""},{"path":"https://ctn-0094.github.io/CTNote/LICENSE.html","id":"preamble","dir":"","previous_headings":"","what":"Preamble","title":"GNU General Public License","text":"GNU General Public License free, copyleft license software kinds works. licenses software practical works designed take away freedom share change works. contrast, GNU General Public License intended guarantee freedom share change versions program–make sure remains free software users. , Free Software Foundation, use GNU General Public License software; applies also work released way authors. can apply programs, . speak free software, referring freedom, price. General Public Licenses designed make sure freedom distribute copies free software (charge wish), receive source code can get want , can change software use pieces new free programs, know can things. protect rights, need prevent others denying rights asking surrender rights. Therefore, certain responsibilities distribute copies software, modify : responsibilities respect freedom others. example, distribute copies program, whether gratis fee, must pass recipients freedoms received. must make sure , , receive can get source code. must show terms know rights. Developers use GNU GPL protect rights two steps: (1) assert copyright software, (2) offer License giving legal permission copy, distribute /modify . developers’ authors’ protection, GPL clearly explains warranty free software. users’ authors’ sake, GPL requires modified versions marked changed, problems attributed erroneously authors previous versions. devices designed deny users access install run modified versions software inside , although manufacturer can . fundamentally incompatible aim protecting users’ freedom change software. systematic pattern abuse occurs area products individuals use, precisely unacceptable. Therefore, designed version GPL prohibit practice products. problems arise substantially domains, stand ready extend provision domains future versions GPL, needed protect freedom users. Finally, every program threatened constantly software patents. States allow patents restrict development use software general-purpose computers, , wish avoid special danger patents applied free program make effectively proprietary. prevent , GPL assures patents used render program non-free. precise terms conditions copying, distribution modification follow.","code":""},{"path":[]},{"path":"https://ctn-0094.github.io/CTNote/LICENSE.html","id":"id_0-definitions","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"0. Definitions","title":"GNU General Public License","text":"“License” refers version 3 GNU General Public License. “Copyright” also means copyright-like laws apply kinds works, semiconductor masks. “Program” refers copyrightable work licensed License. licensee addressed “”. “Licensees” “recipients” may individuals organizations. “modify” work means copy adapt part work fashion requiring copyright permission, making exact copy. resulting work called “modified version” earlier work work “based ” earlier work. “covered work” means either unmodified Program work based Program. “propagate” work means anything , without permission, make directly secondarily liable infringement applicable copyright law, except executing computer modifying private copy. Propagation includes copying, distribution (without modification), making available public, countries activities well. “convey” work means kind propagation enables parties make receive copies. Mere interaction user computer network, transfer copy, conveying. interactive user interface displays “Appropriate Legal Notices” extent includes convenient prominently visible feature (1) displays appropriate copyright notice, (2) tells user warranty work (except extent warranties provided), licensees may convey work License, view copy License. interface presents list user commands options, menu, prominent item list meets criterion.","code":""},{"path":"https://ctn-0094.github.io/CTNote/LICENSE.html","id":"id_1-source-code","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"1. Source Code","title":"GNU General Public License","text":"“source code” work means preferred form work making modifications . “Object code” means non-source form work. “Standard Interface” means interface either official standard defined recognized standards body, , case interfaces specified particular programming language, one widely used among developers working language. “System Libraries” executable work include anything, work whole, () included normal form packaging Major Component, part Major Component, (b) serves enable use work Major Component, implement Standard Interface implementation available public source code form. “Major Component”, context, means major essential component (kernel, window system, ) specific operating system () executable work runs, compiler used produce work, object code interpreter used run . “Corresponding Source” work object code form means source code needed generate, install, (executable work) run object code modify work, including scripts control activities. However, include work’s System Libraries, general-purpose tools generally available free programs used unmodified performing activities part work. example, Corresponding Source includes interface definition files associated source files work, source code shared libraries dynamically linked subprograms work specifically designed require, intimate data communication control flow subprograms parts work. Corresponding Source need include anything users can regenerate automatically parts Corresponding Source. Corresponding Source work source code form work.","code":""},{"path":"https://ctn-0094.github.io/CTNote/LICENSE.html","id":"id_2-basic-permissions","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"2. Basic Permissions","title":"GNU General Public License","text":"rights granted License granted term copyright Program, irrevocable provided stated conditions met. License explicitly affirms unlimited permission run unmodified Program. output running covered work covered License output, given content, constitutes covered work. License acknowledges rights fair use equivalent, provided copyright law. may make, run propagate covered works convey, without conditions long license otherwise remains force. may convey covered works others sole purpose make modifications exclusively , provide facilities running works, provided comply terms License conveying material control copyright. thus making running covered works must exclusively behalf, direction control, terms prohibit making copies copyrighted material outside relationship . Conveying circumstances permitted solely conditions stated . Sublicensing allowed; section 10 makes unnecessary.","code":""},{"path":"https://ctn-0094.github.io/CTNote/LICENSE.html","id":"id_3-protecting-users-legal-rights-from-anti-circumvention-law","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"3. Protecting Users’ Legal Rights From Anti-Circumvention Law","title":"GNU General Public License","text":"covered work shall deemed part effective technological measure applicable law fulfilling obligations article 11 WIPO copyright treaty adopted 20 December 1996, similar laws prohibiting restricting circumvention measures. convey covered work, waive legal power forbid circumvention technological measures extent circumvention effected exercising rights License respect covered work, disclaim intention limit operation modification work means enforcing, work’s users, third parties’ legal rights forbid circumvention technological measures.","code":""},{"path":"https://ctn-0094.github.io/CTNote/LICENSE.html","id":"id_4-conveying-verbatim-copies","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"4. Conveying Verbatim Copies","title":"GNU General Public License","text":"may convey verbatim copies Program’s source code receive , medium, provided conspicuously appropriately publish copy appropriate copyright notice; keep intact notices stating License non-permissive terms added accord section 7 apply code; keep intact notices absence warranty; give recipients copy License along Program. may charge price price copy convey, may offer support warranty protection fee.","code":""},{"path":"https://ctn-0094.github.io/CTNote/LICENSE.html","id":"id_5-conveying-modified-source-versions","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"5. Conveying Modified Source Versions","title":"GNU General Public License","text":"may convey work based Program, modifications produce Program, form source code terms section 4, provided also meet conditions: ) work must carry prominent notices stating modified , giving relevant date. b) work must carry prominent notices stating released License conditions added section 7. requirement modifies requirement section 4 “keep intact notices”. c) must license entire work, whole, License anyone comes possession copy. License therefore apply, along applicable section 7 additional terms, whole work, parts, regardless packaged. License gives permission license work way, invalidate permission separately received . d) work interactive user interfaces, must display Appropriate Legal Notices; however, Program interactive interfaces display Appropriate Legal Notices, work need make . compilation covered work separate independent works, nature extensions covered work, combined form larger program, volume storage distribution medium, called “aggregate” compilation resulting copyright used limit access legal rights compilation’s users beyond individual works permit. Inclusion covered work aggregate cause License apply parts aggregate.","code":""},{"path":"https://ctn-0094.github.io/CTNote/LICENSE.html","id":"id_6-conveying-non-source-forms","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"6. Conveying Non-Source Forms","title":"GNU General Public License","text":"may convey covered work object code form terms sections 4 5, provided also convey machine-readable Corresponding Source terms License, one ways: ) Convey object code , embodied , physical product (including physical distribution medium), accompanied Corresponding Source fixed durable physical medium customarily used software interchange. b) Convey object code , embodied , physical product (including physical distribution medium), accompanied written offer, valid least three years valid long offer spare parts customer support product model, give anyone possesses object code either (1) copy Corresponding Source software product covered License, durable physical medium customarily used software interchange, price reasonable cost physically performing conveying source, (2) access copy Corresponding Source network server charge. c) Convey individual copies object code copy written offer provide Corresponding Source. alternative allowed occasionally noncommercially, received object code offer, accord subsection 6b. d) Convey object code offering access designated place (gratis charge), offer equivalent access Corresponding Source way place charge. need require recipients copy Corresponding Source along object code. place copy object code network server, Corresponding Source may different server (operated third party) supports equivalent copying facilities, provided maintain clear directions next object code saying find Corresponding Source. Regardless server hosts Corresponding Source, remain obligated ensure available long needed satisfy requirements. e) Convey object code using peer--peer transmission, provided inform peers object code Corresponding Source work offered general public charge subsection 6d. separable portion object code, whose source code excluded Corresponding Source System Library, need included conveying object code work. “User Product” either (1) “consumer product”, means tangible personal property normally used personal, family, household purposes, (2) anything designed sold incorporation dwelling. determining whether product consumer product, doubtful cases shall resolved favor coverage. particular product received particular user, “normally used” refers typical common use class product, regardless status particular user way particular user actually uses, expects expected use, product. product consumer product regardless whether product substantial commercial, industrial non-consumer uses, unless uses represent significant mode use product. “Installation Information” User Product means methods, procedures, authorization keys, information required install execute modified versions covered work User Product modified version Corresponding Source. information must suffice ensure continued functioning modified object code case prevented interfered solely modification made. convey object code work section , , specifically use , User Product, conveying occurs part transaction right possession use User Product transferred recipient perpetuity fixed term (regardless transaction characterized), Corresponding Source conveyed section must accompanied Installation Information. requirement apply neither third party retains ability install modified object code User Product (example, work installed ROM). requirement provide Installation Information include requirement continue provide support service, warranty, updates work modified installed recipient, User Product modified installed. Access network may denied modification materially adversely affects operation network violates rules protocols communication across network. Corresponding Source conveyed, Installation Information provided, accord section must format publicly documented (implementation available public source code form), must require special password key unpacking, reading copying.","code":""},{"path":"https://ctn-0094.github.io/CTNote/LICENSE.html","id":"id_7-additional-terms","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"7. Additional Terms","title":"GNU General Public License","text":"“Additional permissions” terms supplement terms License making exceptions one conditions. Additional permissions applicable entire Program shall treated though included License, extent valid applicable law. additional permissions apply part Program, part may used separately permissions, entire Program remains governed License without regard additional permissions. convey copy covered work, may option remove additional permissions copy, part . (Additional permissions may written require removal certain cases modify work.) may place additional permissions material, added covered work, can give appropriate copyright permission. Notwithstanding provision License, material add covered work, may (authorized copyright holders material) supplement terms License terms: ) Disclaiming warranty limiting liability differently terms sections 15 16 License; b) Requiring preservation specified reasonable legal notices author attributions material Appropriate Legal Notices displayed works containing ; c) Prohibiting misrepresentation origin material, requiring modified versions material marked reasonable ways different original version; d) Limiting use publicity purposes names licensors authors material; e) Declining grant rights trademark law use trade names, trademarks, service marks; f) Requiring indemnification licensors authors material anyone conveys material (modified versions ) contractual assumptions liability recipient, liability contractual assumptions directly impose licensors authors. non-permissive additional terms considered “restrictions” within meaning section 10. Program received , part , contains notice stating governed License along term restriction, may remove term. license document contains restriction permits relicensing conveying License, may add covered work material governed terms license document, provided restriction survive relicensing conveying. add terms covered work accord section, must place, relevant source files, statement additional terms apply files, notice indicating find applicable terms. Additional terms, permissive non-permissive, may stated form separately written license, stated exceptions; requirements apply either way.","code":""},{"path":"https://ctn-0094.github.io/CTNote/LICENSE.html","id":"id_8-termination","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"8. Termination","title":"GNU General Public License","text":"may propagate modify covered work except expressly provided License. attempt otherwise propagate modify void, automatically terminate rights License (including patent licenses granted third paragraph section 11). However, cease violation License, license particular copyright holder reinstated () provisionally, unless copyright holder explicitly finally terminates license, (b) permanently, copyright holder fails notify violation reasonable means prior 60 days cessation. Moreover, license particular copyright holder reinstated permanently copyright holder notifies violation reasonable means, first time received notice violation License (work) copyright holder, cure violation prior 30 days receipt notice. Termination rights section terminate licenses parties received copies rights License. rights terminated permanently reinstated, qualify receive new licenses material section 10.","code":""},{"path":"https://ctn-0094.github.io/CTNote/LICENSE.html","id":"id_9-acceptance-not-required-for-having-copies","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"9. Acceptance Not Required for Having Copies","title":"GNU General Public License","text":"required accept License order receive run copy Program. Ancillary propagation covered work occurring solely consequence using peer--peer transmission receive copy likewise require acceptance. However, nothing License grants permission propagate modify covered work. actions infringe copyright accept License. Therefore, modifying propagating covered work, indicate acceptance License .","code":""},{"path":"https://ctn-0094.github.io/CTNote/LICENSE.html","id":"id_10-automatic-licensing-of-downstream-recipients","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"10. Automatic Licensing of Downstream Recipients","title":"GNU General Public License","text":"time convey covered work, recipient automatically receives license original licensors, run, modify propagate work, subject License. responsible enforcing compliance third parties License. “entity transaction” transaction transferring control organization, substantially assets one, subdividing organization, merging organizations. propagation covered work results entity transaction, party transaction receives copy work also receives whatever licenses work party’s predecessor interest give previous paragraph, plus right possession Corresponding Source work predecessor interest, predecessor can get reasonable efforts. may impose restrictions exercise rights granted affirmed License. example, may impose license fee, royalty, charge exercise rights granted License, may initiate litigation (including cross-claim counterclaim lawsuit) alleging patent claim infringed making, using, selling, offering sale, importing Program portion .","code":""},{"path":"https://ctn-0094.github.io/CTNote/LICENSE.html","id":"id_11-patents","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"11. Patents","title":"GNU General Public License","text":"“contributor” copyright holder authorizes use License Program work Program based. work thus licensed called contributor’s “contributor version”. contributor’s “essential patent claims” patent claims owned controlled contributor, whether already acquired hereafter acquired, infringed manner, permitted License, making, using, selling contributor version, include claims infringed consequence modification contributor version. purposes definition, “control” includes right grant patent sublicenses manner consistent requirements License. contributor grants non-exclusive, worldwide, royalty-free patent license contributor’s essential patent claims, make, use, sell, offer sale, import otherwise run, modify propagate contents contributor version. following three paragraphs, “patent license” express agreement commitment, however denominated, enforce patent (express permission practice patent covenant sue patent infringement). “grant” patent license party means make agreement commitment enforce patent party. convey covered work, knowingly relying patent license, Corresponding Source work available anyone copy, free charge terms License, publicly available network server readily accessible means, must either (1) cause Corresponding Source available, (2) arrange deprive benefit patent license particular work, (3) arrange, manner consistent requirements License, extend patent license downstream recipients. “Knowingly relying” means actual knowledge , patent license, conveying covered work country, recipient’s use covered work country, infringe one identifiable patents country reason believe valid. , pursuant connection single transaction arrangement, convey, propagate procuring conveyance , covered work, grant patent license parties receiving covered work authorizing use, propagate, modify convey specific copy covered work, patent license grant automatically extended recipients covered work works based . patent license “discriminatory” include within scope coverage, prohibits exercise , conditioned non-exercise one rights specifically granted License. may convey covered work party arrangement third party business distributing software, make payment third party based extent activity conveying work, third party grants, parties receive covered work , discriminatory patent license () connection copies covered work conveyed (copies made copies), (b) primarily connection specific products compilations contain covered work, unless entered arrangement, patent license granted, prior 28 March 2007. Nothing License shall construed excluding limiting implied license defenses infringement may otherwise available applicable patent law.","code":""},{"path":"https://ctn-0094.github.io/CTNote/LICENSE.html","id":"id_12-no-surrender-of-others-freedom","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"12. No Surrender of Others’ Freedom","title":"GNU General Public License","text":"conditions imposed (whether court order, agreement otherwise) contradict conditions License, excuse conditions License. convey covered work satisfy simultaneously obligations License pertinent obligations, consequence may convey . example, agree terms obligate collect royalty conveying convey Program, way satisfy terms License refrain entirely conveying Program.","code":""},{"path":"https://ctn-0094.github.io/CTNote/LICENSE.html","id":"id_13-use-with-the-gnu-affero-general-public-license","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"13. Use with the GNU Affero General Public License","title":"GNU General Public License","text":"Notwithstanding provision License, permission link combine covered work work licensed version 3 GNU Affero General Public License single combined work, convey resulting work. terms License continue apply part covered work, special requirements GNU Affero General Public License, section 13, concerning interaction network apply combination .","code":""},{"path":"https://ctn-0094.github.io/CTNote/LICENSE.html","id":"id_14-revised-versions-of-this-license","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"14. Revised Versions of this License","title":"GNU General Public License","text":"Free Software Foundation may publish revised /new versions GNU General Public License time time. new versions similar spirit present version, may differ detail address new problems concerns. version given distinguishing version number. Program specifies certain numbered version GNU General Public License “later version” applies , option following terms conditions either numbered version later version published Free Software Foundation. Program specify version number GNU General Public License, may choose version ever published Free Software Foundation. Program specifies proxy can decide future versions GNU General Public License can used, proxy’s public statement acceptance version permanently authorizes choose version Program. Later license versions may give additional different permissions. However, additional obligations imposed author copyright holder result choosing follow later version.","code":""},{"path":"https://ctn-0094.github.io/CTNote/LICENSE.html","id":"id_15-disclaimer-of-warranty","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"15. Disclaimer of Warranty","title":"GNU General Public License","text":"WARRANTY PROGRAM, EXTENT PERMITTED APPLICABLE LAW. EXCEPT OTHERWISE STATED WRITING COPYRIGHT HOLDERS /PARTIES PROVIDE PROGRAM “” WITHOUT WARRANTY KIND, EITHER EXPRESSED IMPLIED, INCLUDING, LIMITED , IMPLIED WARRANTIES MERCHANTABILITY FITNESS PARTICULAR PURPOSE. ENTIRE RISK QUALITY PERFORMANCE PROGRAM . PROGRAM PROVE DEFECTIVE, ASSUME COST NECESSARY SERVICING, REPAIR CORRECTION.","code":""},{"path":"https://ctn-0094.github.io/CTNote/LICENSE.html","id":"id_16-limitation-of-liability","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"16. Limitation of Liability","title":"GNU General Public License","text":"EVENT UNLESS REQUIRED APPLICABLE LAW AGREED WRITING COPYRIGHT HOLDER, PARTY MODIFIES /CONVEYS PROGRAM PERMITTED , LIABLE DAMAGES, INCLUDING GENERAL, SPECIAL, INCIDENTAL CONSEQUENTIAL DAMAGES ARISING USE INABILITY USE PROGRAM (INCLUDING LIMITED LOSS DATA DATA RENDERED INACCURATE LOSSES SUSTAINED THIRD PARTIES FAILURE PROGRAM OPERATE PROGRAMS), EVEN HOLDER PARTY ADVISED POSSIBILITY DAMAGES.","code":""},{"path":"https://ctn-0094.github.io/CTNote/LICENSE.html","id":"id_17-interpretation-of-sections-15-and-16","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"17. Interpretation of Sections 15 and 16","title":"GNU General Public License","text":"disclaimer warranty limitation liability provided given local legal effect according terms, reviewing courts shall apply local law closely approximates absolute waiver civil liability connection Program, unless warranty assumption liability accompanies copy Program return fee. END TERMS CONDITIONS","code":""},{"path":"https://ctn-0094.github.io/CTNote/LICENSE.html","id":"how-to-apply-these-terms-to-your-new-programs","dir":"","previous_headings":"","what":"How to Apply These Terms to Your New Programs","title":"GNU General Public License","text":"develop new program, want greatest possible use public, best way achieve make free software everyone can redistribute change terms. , attach following notices program. safest attach start source file effectively state exclusion warranty; file least “copyright” line pointer full notice found. Also add information contact electronic paper mail. program terminal interaction, make output short notice like starts interactive mode: hypothetical commands show w show c show appropriate parts General Public License. course, program’s commands might different; GUI interface, use “box”. also get employer (work programmer) school, , sign “copyright disclaimer” program, necessary. information , apply follow GNU GPL, see <http://www.gnu.org/licenses/>. GNU General Public License permit incorporating program proprietary programs. program subroutine library, may consider useful permit linking proprietary applications library. want , use GNU Lesser General Public License instead License. first, please read <http://www.gnu.org/philosophy/--lgpl.html>.","code":"<one line to give the program's name and a brief idea of what it does.> Copyright (C) 2020 Raymond Balise  This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.  You should have received a copy of the GNU General Public License along with this program.  If not, see <http://www.gnu.org/licenses/>. CTNote Copyright (C) 2020 Raymond Balise This program comes with ABSOLUTELY NO WARRANTY; for details type 'show w'. This is free software, and you are welcome to redistribute it under certain conditions; type 'show c' for details."},{"path":"https://ctn-0094.github.io/CTNote/articles/library_abstinence_20220711.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"CTNote Library: Abstinence Outcomes","text":"document contains algorithms necessary code outcomes measure “abstinence substance use” “relapse substance use”. include outcomes result single value per subject. outcomes : use table participant opioid use patterns ctn0094DataExtra package calculate endpoints (copy endpoints dataset outcomesCTN0094). Importantly, wish apply algorithms calculate endpoints data, participants’ substance use patterns must stored “substance use pattern word” format shown . also show subset data visualize variety different real substance use patterns. first define following five-value legend: +: positive substance(s) specified window time (day, week, month, etc.) urine screen (participant self report, data interest) –: negative substance(s) o: subject failed provide urine sample *: inconclusive results mixed results (e.g. subject provided one urine sample time interval agree) _: specimens required (weekends, holidays, pre-randomization period, alternating visit days/weeks) example, participant 1 use pattern ooooooooooooooo (missing UDS), means dropped study. contrast, participant 233 use pattern *+++++++++++o++++++++++o (nearly positive UDS): drop study, treatment completely ineffective . Participant 2089 started study rough patch, greatly improved treatment time (++++---+--------------o-).","code":"###  Full Data  ### udsOutcomes_df <-      CTNote::outcomesCTN0094 %>%    select(who, usePatternUDS)  # Make a copy outcomesAbs_df <- udsOutcomes_df   ###  Examples  ### examplePeople_int <- c(1, 163, 210, 242, 4, 17, 13, 1103, 233, 2089) outcomesAbs_df %>%    filter(who %in% examplePeople_int) ## # A tibble: 10 × 2 ##      who usePatternUDS                       ##    <dbl> <chr>                               ##  1     1 ooooooooooooooo                     ##  2     4 -------------------o-o-o            ##  3    13 ------------o-oooooooooo            ##  4    17 --++*++++++-++++++-+++-             ##  5   163 -o---o---o--o+----------            ##  6   210 -++++++++-+++-----------            ##  7   233 *+++++++++++o++++++++++o            ##  8   242 -----------------------             ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o ## 10  2089 ++++---+--------------o-"},{"path":[]},{"path":"https://ctn-0094.github.io/CTNote/articles/library_abstinence_20220711.html","id":"ctn-0094-abstinence","dir":"Articles","previous_headings":"Abstinence from Substance Use Endpoints","what":"CTN-0094 Abstinence","title":"CTNote Library: Abstinence Outcomes","text":"CTN-0094 research group one abstinence outcome, consider “fair” metric end--treatment abstinence. Definition: last four weeks treatment, 0 positive 1 missing UDS. Note: intend definition measure “soft” abstinence; specifically, allow participant miss one scheduled meetings last four weeks treatment, long UDS pattern remaining three weeks present negative.","code":"outcomesAbs_df <-      outcomesAbs_df %>%   rowwise() %>%    # mixed results != abstinence     mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS,             missing_is = \"*\"         )     ) %>%      mutate(         Ab_ctnNinetyFour_2023 = any(           detect_subpattern(               use_pattern = udsPattern,               subpattern = c(\"----\", \"o---\", \"-o--\", \"--o-\", \"---o\"),               start = 12,               end = 15           )         )     ) %>%      select(who, Ab_ctnNinetyFour_2023) %>%      left_join(outcomesAbs_df, ., by = \"who\")  outcomesAbs_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Ab_ctnNinetyFour_2023) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Ab_ctnNinetyFour_2023 ##    <dbl> <chr>                               <lgl>                 ##  1     1 ooooooooooooooo                     FALSE                 ##  2     4 -------------------o-o-o            TRUE                  ##  3    13 ------------o-oooooooooo            FALSE                 ##  4    17 --++*++++++-++++++-+++-             FALSE                 ##  5   163 -o---o---o--o+----------            FALSE                 ##  6   210 -++++++++-+++-----------            FALSE                 ##  7   233 *+++++++++++o++++++++++o            FALSE                 ##  8   242 -----------------------             TRUE                  ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o FALSE                 ## 10  2089 ++++---+--------------o-            TRUE"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_abstinence_20220711.html","id":"fiellin_counseling_2006","dir":"Articles","previous_headings":"Abstinence from Substance Use Endpoints","what":"Fiellin et al. (2006)","title":"CTNote Library: Abstinence Outcomes","text":"Definition: Weeks confirmed opioid abstinence; missing positive","code":"outcomesAbs_df <-      outcomesAbs_df %>%   rowwise() %>%      mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS,         )     ) %>%    # mixed results != abstinence     mutate(         udsPattern = recode_missing_visits(             use_pattern = udsPattern,             missing_is = \"*\"         )     ) %>%    # We did not code this definition with an \"end\", so participants with longer   #   stays in treatment could have higher scores     mutate(         Ab_fiellin_2006 = count_matches(             use_pattern = udsPattern,             match_is = \"-\"         )     ) %>%      select(who, Ab_fiellin_2006) %>%      left_join(outcomesAbs_df, ., by = \"who\")  outcomesAbs_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Ab_fiellin_2006) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Ab_fiellin_2006 ##    <dbl> <chr>                                         <int> ##  1     1 ooooooooooooooo                                   0 ##  2     4 -------------------o-o-o                         21 ##  3    13 ------------o-oooooooooo                         13 ##  4    17 --++*++++++-++++++-+++-                           5 ##  5   163 -o---o---o--o+----------                         19 ##  6   210 -++++++++-+++-----------                         13 ##  7   233 *+++++++++++o++++++++++o                          0 ##  8   242 -----------------------                          23 ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o              20 ## 10  2089 ++++---+--------------o-                         18"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_abstinence_20220711.html","id":"kosten_buprenorphine_1993","dir":"Articles","previous_headings":"Abstinence from Substance Use Endpoints","what":"Kosten et al. (1993)","title":"CTNote Library: Abstinence Outcomes","text":"Definition: attaining least 3 weeks consecutive negative UOS","code":"outcomesAbs_df <-      outcomesAbs_df %>%   rowwise() %>%    mutate(         Ab_kosten_1993 = detect_subpattern(             usePatternUDS,             subpattern = \"---\"          )     ) %>%      select(who, Ab_kosten_1993) %>%      left_join(outcomesAbs_df, ., by = \"who\")  outcomesAbs_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Ab_kosten_1993) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Ab_kosten_1993 ##    <dbl> <chr>                               <lgl>          ##  1     1 ooooooooooooooo                     FALSE          ##  2     4 -------------------o-o-o            TRUE           ##  3    13 ------------o-oooooooooo            TRUE           ##  4    17 --++*++++++-++++++-+++-             FALSE          ##  5   163 -o---o---o--o+----------            TRUE           ##  6   210 -++++++++-+++-----------            TRUE           ##  7   233 *+++++++++++o++++++++++o            FALSE          ##  8   242 -----------------------             TRUE           ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o TRUE           ## 10  2089 ++++---+--------------o-            TRUE"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_abstinence_20220711.html","id":"krupitsky_injectable_2011-a-and-b","dir":"Articles","previous_headings":"Abstinence from Substance Use Endpoints","what":"Krupitsky et al. (2011) (A) and (B)","title":"CTNote Library: Abstinence Outcomes","text":"two definitions paper include reduction section library: Confirmed opioid abstinence weeks 5‐24 based UOS Weeks confirmed opioid abstinence.","code":""},{"path":"https://ctn-0094.github.io/CTNote/articles/library_abstinence_20220711.html","id":"krupitsky-et-al--2011-a","dir":"Articles","previous_headings":"Abstinence from Substance Use Endpoints > Krupitsky et al. (2011) (A) and (B)","what":"Krupitsky et al., 2011 (A)","title":"CTNote Library: Abstinence Outcomes","text":"Definition: Confirmed opioid abstinence weeks 5‐24 based UOS comment algorithm: know long protocol exactly, pattern match approach (intuitive first) work. instead recode use pattern “negative” “non-negative”, check proportion non-negative UDS 0%.","code":"outcomesAbs_df <-      outcomesAbs_df %>%   rowwise() %>%      mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS,         )     ) %>%      mutate(         udsPattern = recode_missing_visits(             use_pattern = udsPattern,             missing_is = \"*\"         )     ) %>%      mutate(         useProp = count_matches(             use_pattern = udsPattern,             match_is = \"+\",             start = 5L,             # Set this to the length of your protocol, or 24, whichever is shorter             end = 15L,             proportion = TRUE         )     ) %>%      mutate(Ab_krupitskyA_2011 = useProp == 0) %>%      select(who, Ab_krupitskyA_2011) %>%      left_join(outcomesAbs_df, ., by = \"who\")  outcomesAbs_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Ab_krupitskyA_2011) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Ab_krupitskyA_2011 ##    <dbl> <chr>                               <lgl>              ##  1     1 ooooooooooooooo                     FALSE              ##  2     4 -------------------o-o-o            TRUE               ##  3    13 ------------o-oooooooooo            FALSE              ##  4    17 --++*++++++-++++++-+++-             FALSE              ##  5   163 -o---o---o--o+----------            FALSE              ##  6   210 -++++++++-+++-----------            FALSE              ##  7   233 *+++++++++++o++++++++++o            FALSE              ##  8   242 -----------------------             TRUE               ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o FALSE              ## 10  2089 ++++---+--------------o-            FALSE"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_abstinence_20220711.html","id":"krupitsky-et-al--2011-b","dir":"Articles","previous_headings":"Abstinence from Substance Use Endpoints > Krupitsky et al. (2011) (A) and (B)","what":"Krupitsky et al., 2011 (B)","title":"CTNote Library: Abstinence Outcomes","text":"Definition: Weeks confirmed opioid abstinence","code":"outcomesAbs_df <-      outcomesAbs_df %>%   rowwise() %>%    mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS,         )     ) %>%      mutate(         udsPattern = recode_missing_visits(             use_pattern = udsPattern,             missing_is = \"*\"         )     ) %>%      mutate(         Ab_krupitskyB_2011 = count_matches(             use_pattern = udsPattern,             match_is = \"-\",             start = 5L,             # This trial protocol has a clear end date; we adjust it to our data             end = 15L         )     ) %>%      select(who, Ab_krupitskyB_2011) %>%      left_join(outcomesAbs_df, ., by = \"who\")  outcomesAbs_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Ab_krupitskyB_2011) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Ab_krupitskyB_2011 ##    <dbl> <chr>                                            <int> ##  1     1 ooooooooooooooo                                      0 ##  2     4 -------------------o-o-o                            11 ##  3    13 ------------o-oooooooooo                             9 ##  4    17 --++*++++++-++++++-+++-                              1 ##  5   163 -o---o---o--o+----------                             7 ##  6   210 -++++++++-+++-----------                             3 ##  7   233 *+++++++++++o++++++++++o                             0 ##  8   242 -----------------------                             11 ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o                  6 ## 10  2089 ++++---+--------------o-                            10"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_abstinence_20220711.html","id":"ling_buprenorphine_1998","dir":"Articles","previous_headings":"Abstinence from Substance Use Endpoints","what":"Ling et al. (1998)","title":"CTNote Library: Abstinence Outcomes","text":"Definition: % participants maintained 13 consecutive negative UOS (1 month); urine screened 3 times per week","code":"outcomesAbs_df <-      outcomesAbs_df %>%   rowwise() %>%    mutate(         Ab_ling_1998 = detect_subpattern(             use_pattern = usePatternUDS,             # 13 consecutive UDS at 3x per week is 4.3 weeks             subpattern = \"----\"         )     ) %>%      select(who, Ab_ling_1998) %>%      left_join(outcomesAbs_df, ., by = \"who\")     outcomesAbs_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Ab_ling_1998) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Ab_ling_1998 ##    <dbl> <chr>                               <lgl>        ##  1     1 ooooooooooooooo                     FALSE        ##  2     4 -------------------o-o-o            TRUE         ##  3    13 ------------o-oooooooooo            TRUE         ##  4    17 --++*++++++-++++++-+++-             FALSE        ##  5   163 -o---o---o--o+----------            TRUE         ##  6   210 -++++++++-+++-----------            TRUE         ##  7   233 *+++++++++++o++++++++++o            FALSE        ##  8   242 -----------------------             TRUE         ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o TRUE         ## 10  2089 ++++---+--------------o-            TRUE"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_abstinence_20220711.html","id":"lofwall_weekly_2018","dir":"Articles","previous_headings":"Abstinence from Substance Use Endpoints","what":"Lofwall et al. (2018)","title":"CTNote Library: Abstinence Outcomes","text":"Definition: evidence opioid use based UOS (NOTE: minimal evidence opioid use UOS, none) paper, abstinence defined 2 3 negative UDS weeks 9, 10, 11; negative UDS week 12; 5 6 UDS negative weeks 13-24 (alternating week visits, yielding 6 visits Phase II period). 15 weeks data guaranteed, scale window lattice. definition abstinence quite complex. 15 weeks data subjects, shift 12-week Phase endpoint week 7, treat weeks 8-15 Phase II. Also, calculate proportions counts; rules can applied windows sizes. proportions —window observation change.","code":"###  Define 15-week Lattice  ### lofwallLattice_char <- collapse_lattice(     lattice_patterns = c(\"o\", \"_o\"),     # For the lattice as defined over 24 weeks, you need 12 weeks of weekly visits     #   and 6 sets of alternating \"no visit\" and \"visit\" week pairs, or c(12, 6).     #   For us, we want 7 weeks straight of weekly visits followed by 4 pairs of     #   alternating visits (8 weeks) for a total of 15 weeks.     times = c(7, 4) ) lofwallLattice_char ## [1] \"ooooooo_o_o_o_o\" ###  Calculate Weighted Abstinence  ### outcomesAbs_df <-      outcomesAbs_df %>%   rowwise() %>%    # Change mixed and missing results to positive     mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS,             missing_is = \"*\"         )     ) %>%    mutate(     udsPattern = recode_missing_visits(udsPattern)   ) %>%    # \"observe\" only the UDS that would have been caught by the protocol     mutate(         udsLattice = view_by_lattice(             use_pattern = udsPattern,             lattice_pattern = str_sub(lofwallLattice_char, end = 15) # first 15 weeks         )     ) %>%      # Impute the visits that were not \"observed\"     mutate(         udsLatticeLOCF = impute_missing_visits(             use_pattern = udsLattice,             method = \"locf\",             missing_is = \"_\",             quietly = TRUE         )     ) %>%    # Count for Weeks 5-7; Week 8; and Weeks 9-15     mutate(         prop57 = count_matches(             udsLatticeLOCF,             match_is = \"-\",             start = 5L,             end = 7L,             proportion = TRUE         ),         clean8 = count_matches(             udsLatticeLOCF,             match_is = \"-\",             start = 8L,             end = 8L         ),         prop915 = count_matches(             udsLatticeLOCF,             match_is = \"-\",             start = 9L,             end = 15L,             proportion = TRUE         ),     ) %>%    # Check interval counts/proportions     mutate(         Ab_lofwall_2018 = (prop57 >= 2/3) & (clean8 == 1) & (prop915 >= 5/6)     ) %>%      select(who, Ab_lofwall_2018) %>%      left_join(outcomesAbs_df, ., by = \"who\")  outcomesAbs_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Ab_lofwall_2018) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Ab_lofwall_2018 ##    <dbl> <chr>                               <lgl>           ##  1     1 ooooooooooooooo                     FALSE           ##  2     4 -------------------o-o-o            TRUE            ##  3    13 ------------o-oooooooooo            FALSE           ##  4    17 --++*++++++-++++++-+++-             FALSE           ##  5   163 -o---o---o--o+----------            FALSE           ##  6   210 -++++++++-+++-----------            FALSE           ##  7   233 *+++++++++++o++++++++++o            FALSE           ##  8   242 -----------------------             TRUE            ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o FALSE           ## 10  2089 ++++---+--------------o-            TRUE"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_abstinence_20220711.html","id":"mokri_medical_2016","dir":"Articles","previous_headings":"Abstinence from Substance Use Endpoints","what":"Mokri et al. (2016)","title":"CTNote Library: Abstinence Outcomes","text":"Definition: Days 1st positive UOS; missing positive comfortable using “survival” “time--event” data structures, definition can modified following code:","code":"outcomesAbs_df <-      outcomesAbs_df %>%   rowwise() %>%    mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS         )     ) %>%     mutate(         udsPattern = recode_missing_visits(             use_pattern = udsPattern,             missing_is = \"*\"         )     ) %>%   # Find the number of weeks until the first \"+\"     mutate(         mokri2016_abs = detect_in_window(             use_pattern = udsPattern,             window_width = 1L,             threshold = 1L         )     ) %>%     unnest(cols = \"mokri2016_abs\", names_sep = \"_\") %>%     select(who, starts_with(\"mokri2016_abs\")) %>%   rename(     AbT_mokri_2016 = mokri2016_abs_time,     AbE_mokri_2016 = mokri2016_abs_event   ) %>%      left_join(outcomesAbs_df, ., by = \"who\")    outcomesAbs_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, contains(\"mokri_2016\")) ## # A tibble: 10 × 4 ##      who usePatternUDS                       AbT_mokri_2016 AbE_mokri_2016 ##    <dbl> <chr>                                        <int>          <int> ##  1     1 ooooooooooooooo                                  1              1 ##  2     4 -------------------o-o-o                        20              1 ##  3    13 ------------o-oooooooooo                        13              1 ##  4    17 --++*++++++-++++++-+++-                          3              1 ##  5   163 -o---o---o--o+----------                         2              1 ##  6   210 -++++++++-+++-----------                         2              1 ##  7   233 *+++++++++++o++++++++++o                         1              1 ##  8   242 -----------------------                         23              0 ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o              1              1 ## 10  2089 ++++---+--------------o-                         1              1 outcomesAbs_df %>%    filter(who %in% examplePeople_int) %>%    mutate(     mokri2016_wksAbst = survival::Surv(       time = AbT_mokri_2016,       event = AbE_mokri_2016     )   ) %>%    # FOR PRINTING THE TABLE ONLY. DO NOT USE NEXT LINE IN PRACTICE!!!   mutate(mokri2016_wksAbst = as.character(mokri2016_wksAbst)) %>%    select(who, usePatternUDS, mokri2016_wksAbst) ## # A tibble: 10 × 3 ##      who usePatternUDS                       mokri2016_wksAbst ##    <dbl> <chr>                               <chr>             ##  1     1 ooooooooooooooo                     \" 1\"              ##  2     4 -------------------o-o-o            \"20\"              ##  3    13 ------------o-oooooooooo            \"13\"              ##  4    17 --++*++++++-++++++-+++-             \" 3\"              ##  5   163 -o---o---o--o+----------            \" 2\"              ##  6   210 -++++++++-+++-----------            \" 2\"              ##  7   233 *+++++++++++o++++++++++o            \" 1\"              ##  8   242 -----------------------             \"23+\"             ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o \" 1\"              ## 10  2089 ++++---+--------------o-            \" 1\""},{"path":"https://ctn-0094.github.io/CTNote/articles/library_abstinence_20220711.html","id":"schottenfeld_methadone_2005","dir":"Articles","previous_headings":"Abstinence from Substance Use Endpoints","what":"Richard S. Schottenfeld et al. (2005)","title":"CTNote Library: Abstinence Outcomes","text":"Definition: Max. number consecutive weeks negative UOS, missing ignored","code":"outcomesAbs_df <-      outcomesAbs_df %>%   rowwise() %>%    # Ignore missing visits   mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS,             missing_becomes = \"\"         )     ) %>%    # Mixed are positive     mutate(         udsPattern = recode_missing_visits(             use_pattern = udsPattern,             missing_is = \"*\"         )     ) %>%    # Measure the length of the longest period of continuous abstinence     mutate(         Ab_schottenfeld_2005 = measure_abstinence_period(             use_pattern_binary = udsPattern         )     ) %>%      select(who, Ab_schottenfeld_2005) %>%      left_join(outcomesAbs_df, ., by = \"who\")     outcomesAbs_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Ab_schottenfeld_2005) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Ab_schottenfeld_2005 ##    <dbl> <chr>                                              <int> ##  1     1 ooooooooooooooo                                        0 ##  2     4 -------------------o-o-o                              21 ##  3    13 ------------o-oooooooooo                              13 ##  4    17 --++*++++++-++++++-+++-                                2 ##  5   163 -o---o---o--o+----------                              10 ##  6   210 -++++++++-+++-----------                              11 ##  7   233 *+++++++++++o++++++++++o                               0 ##  8   242 -----------------------                               23 ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o                   14 ## 10  2089 ++++---+--------------o-                              15"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_abstinence_20220711.html","id":"schottenfeld_maintenance_2008-a-and-b","dir":"Articles","previous_headings":"Abstinence from Substance Use Endpoints","what":"Richard S. Schottenfeld, Chawarski, and Mazlan (2008) (A) and (B)","title":"CTNote Library: Abstinence Outcomes","text":"two definitions paper include reduction section library: Longest period negative UOS Days 1st positive UOS randomization.","code":""},{"path":"https://ctn-0094.github.io/CTNote/articles/library_abstinence_20220711.html","id":"schottenfeld-chawarski-mazlan-2008-a","dir":"Articles","previous_headings":"Abstinence from Substance Use Endpoints > Richard S. Schottenfeld, Chawarski, and Mazlan (2008) (A) and (B)","what":"Schottenfeld, Chawarski, & Mazlan, 2008 (A)","title":"CTNote Library: Abstinence Outcomes","text":"Definition: Days 1st positive UOS randomization, missing positive","code":"outcomesAbs_df <-      outcomesAbs_df %>%   rowwise() %>%    mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS         )     ) %>%      mutate(         udsPattern = recode_missing_visits(             use_pattern = udsPattern,             missing_is = \"*\"         )     ) %>%      mutate(         schottenfeld2008A_abs = detect_in_window(             use_pattern = udsPattern,             window_width = 1L,             threshold = 1L         )     ) %>%      unnest(cols = \"schottenfeld2008A_abs\", names_sep = \"_\") %>%      select(who, starts_with(\"schottenfeld2008A_abs\")) %>%    rename(     AbT_schottenfeldA_2008 = schottenfeld2008A_abs_time,     AbE_schottenfeldA_2008 = schottenfeld2008A_abs_event   ) %>%      left_join(outcomesAbs_df, ., by = \"who\")    outcomesAbs_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, contains(\"schottenfeldA_2008\")) ## # A tibble: 10 × 4 ##      who usePatternUDS             AbT_schottenfeldA_2008 AbE_schottenfeldA_2008 ##    <dbl> <chr>                                      <int>                  <int> ##  1     1 ooooooooooooooo                                1                      1 ##  2     4 -------------------o-o-o                      20                      1 ##  3    13 ------------o-oooooooooo                      13                      1 ##  4    17 --++*++++++-++++++-+++-                        3                      1 ##  5   163 -o---o---o--o+----------                       2                      1 ##  6   210 -++++++++-+++-----------                       2                      1 ##  7   233 *+++++++++++o++++++++++o                       1                      1 ##  8   242 -----------------------                       23                      0 ##  9  1103 ++--oo--o-+-+--o--------…                      1                      1 ## 10  2089 ++++---+--------------o-                       1                      1"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_abstinence_20220711.html","id":"schottenfeld-et-al--2008-b","dir":"Articles","previous_headings":"Abstinence from Substance Use Endpoints > Richard S. Schottenfeld, Chawarski, and Mazlan (2008) (A) and (B)","what":"Schottenfeld et al., 2008 (B)","title":"CTNote Library: Abstinence Outcomes","text":"Definition: Longest period negative UOS, missing positive","code":"outcomesAbs_df <-      outcomesAbs_df %>%   rowwise() %>%    mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS         )     ) %>%      mutate(         udsPattern = recode_missing_visits(             use_pattern = udsPattern,             missing_is = \"*\"         )     ) %>%     mutate(         Ab_schottenfeldB_2008 = measure_abstinence_period(             use_pattern_binary = udsPattern         )     ) %>%      select(who, Ab_schottenfeldB_2008) %>%      left_join(outcomesAbs_df, ., by = \"who\")     outcomesAbs_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Ab_schottenfeldB_2008) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Ab_schottenfeldB_2008 ##    <dbl> <chr>                                               <int> ##  1     1 ooooooooooooooo                                         0 ##  2     4 -------------------o-o-o                               19 ##  3    13 ------------o-oooooooooo                               12 ##  4    17 --++*++++++-++++++-+++-                                 2 ##  5   163 -o---o---o--o+----------                               10 ##  6   210 -++++++++-+++-----------                               11 ##  7   233 *+++++++++++o++++++++++o                                0 ##  8   242 -----------------------                                23 ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o                    10 ## 10  2089 ++++---+--------------o-                               14"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_abstinence_20220711.html","id":"shufman_efficacy_1994","dir":"Articles","previous_headings":"Abstinence from Substance Use Endpoints","what":"Shufman et al. (1994)","title":"CTNote Library: Abstinence Outcomes","text":"Definition: Weeks 1st day NTX administration 1st positive UOS, missing ignored (treated negative order count weeks properly)","code":"outcomesAbs_df <-      outcomesAbs_df %>%   rowwise() %>%    # Set \"o\" to \"-\"     mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS,             missing_becomes = \"-\"         )     ) %>%      # Set \"*\" to \"+\"     mutate(         udsPattern = recode_missing_visits(             use_pattern = udsPattern,             missing_is = \"*\"         )     ) %>%      mutate(         shufman1994_absN = detect_in_window(             use_pattern = udsPattern,             window_width = 1L,             threshold = 1L         )     ) %>%      unnest(cols = \"shufman1994_absN\", names_sep = \"_\") %>%      select(who, starts_with(\"shufman1994_absN\")) %>%    rename(     AbT_shufman_1994 = shufman1994_absN_time,     AbE_shufman_1994 = shufman1994_absN_event   ) %>%      left_join(outcomesAbs_df, ., by = \"who\")     outcomesAbs_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, contains(\"shufman_1994\")) ## # A tibble: 10 × 4 ##      who usePatternUDS                       AbT_shufman_1994 AbE_shufman_1994 ##    <dbl> <chr>                                          <int>            <int> ##  1     1 ooooooooooooooo                                   15                0 ##  2     4 -------------------o-o-o                          24                0 ##  3    13 ------------o-oooooooooo                          24                0 ##  4    17 --++*++++++-++++++-+++-                            3                1 ##  5   163 -o---o---o--o+----------                          14                1 ##  6   210 -++++++++-+++-----------                           2                1 ##  7   233 *+++++++++++o++++++++++o                           1                1 ##  8   242 -----------------------                           23                0 ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o                1                1 ## 10  2089 ++++---+--------------o-                           1                1"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_abstinence_20220711.html","id":"weiss_adjunctive_2011-ctn-0030","dir":"Articles","previous_headings":"Abstinence from Substance Use Endpoints","what":"Weiss et al. (2011, CTN–0030)","title":"CTNote Library: Abstinence Outcomes","text":"Definition: Negative UOS last week least 2 previous 3 weeks third month BUP/NX treatment, missing positive. Note: definition looking one following four abstinence patterns last 4 weeks: \"----\", \"+---\", \"-+--\", \"--+-\". definition just insanely strict measure study retention. first part definition (“negative last week”) already fails anyone didn’t stay study entire protocol period (last week UDS automatically \"o\").","code":"outcomesAbs_df <-      outcomesAbs_df %>%   rowwise() %>%    mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS,         )     ) %>%      mutate(         udsPattern = recode_missing_visits(             use_pattern = udsPattern,             missing_is = \"*\"         )     ) %>%      mutate(         cleanLastWeek = detect_subpattern(             use_pattern = udsPattern,             subpattern = \"-\",             start = -1,             end = -1         )     ) %>%      mutate(         finalUseCount = count_matches(             use_pattern = udsPattern,             match_is = \"+\",             # 3 weeks leading up to the last week             start = -4L,             end = -2L         )     ) %>%      mutate(Ab_ctnThirty_2011 = cleanLastWeek & (finalUseCount <= 1)) %>%      select(who, Ab_ctnThirty_2011) %>%      left_join(outcomesAbs_df, ., by = \"who\")     outcomesAbs_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Ab_ctnThirty_2011) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Ab_ctnThirty_2011 ##    <dbl> <chr>                               <lgl>             ##  1     1 ooooooooooooooo                     FALSE             ##  2     4 -------------------o-o-o            FALSE             ##  3    13 ------------o-oooooooooo            FALSE             ##  4    17 --++*++++++-++++++-+++-             FALSE             ##  5   163 -o---o---o--o+----------            TRUE              ##  6   210 -++++++++-+++-----------            TRUE              ##  7   233 *+++++++++++o++++++++++o            FALSE             ##  8   242 -----------------------             TRUE              ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o FALSE             ## 10  2089 ++++---+--------------o-            TRUE"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_abstinence_20220711.html","id":"computing-environment","dir":"Articles","previous_headings":"","what":"Computing Environment","title":"CTNote Library: Abstinence Outcomes","text":"information concerning system configuration, packages, versions used computation:","code":"sessionInfo() ## R version 4.3.1 (2023-06-16) ## Platform: x86_64-pc-linux-gnu (64-bit) ## Running under: Ubuntu 22.04.3 LTS ##  ## Matrix products: default ## BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3  ## LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0 ##  ## locale: ##  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8        ##  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8    ##  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C           ## [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C    ##  ## time zone: UTC ## tzcode source: system (glibc) ##  ## attached base packages: ## [1] stats     graphics  grDevices utils     datasets  methods   base      ##  ## other attached packages: ##  [1] lubridate_1.9.2  forcats_1.0.0    stringr_1.5.0    dplyr_1.1.2      ##  [5] purrr_1.0.2      readr_2.1.4      tidyr_1.3.0      tibble_3.2.1     ##  [9] ggplot2_3.4.3    tidyverse_2.0.0  kableExtra_1.3.4 readxl_1.4.3     ## [13] CTNote_0.1.3     ##  ## loaded via a namespace (and not attached): ##  [1] gtable_0.3.3      xfun_0.40         bslib_0.5.1       lattice_0.21-8    ##  [5] tzdb_0.4.0        vctrs_0.6.3       tools_4.3.1       generics_0.1.3    ##  [9] fansi_1.0.4       highr_0.10        pkgconfig_2.0.3   Matrix_1.5-4.1    ## [13] desc_1.4.2        webshot_0.5.5     lifecycle_1.0.3   compiler_4.3.1    ## [17] textshaping_0.3.6 munsell_0.5.0     htmltools_0.5.6   sass_0.4.7        ## [21] yaml_2.3.7        pillar_1.9.0      pkgdown_2.0.7     jquerylib_0.1.4   ## [25] cachem_1.0.8      tidyselect_1.2.0  rvest_1.0.3       digest_0.6.33     ## [29] stringi_1.7.12    splines_4.3.1     rprojroot_2.0.3   fastmap_1.1.1     ## [33] grid_4.3.1        colorspace_2.1-0  cli_3.6.1         magrittr_2.0.3    ## [37] survival_3.5-5    utf8_1.2.3        withr_2.5.0       scales_1.2.1      ## [41] timechange_0.2.0  rmarkdown_2.24    httr_1.4.6        cellranger_1.1.0  ## [45] ragg_1.2.5        hms_1.1.3         memoise_2.0.1     evaluate_0.21     ## [49] knitr_1.43        viridisLite_0.4.2 rlang_1.1.1       glue_1.6.2        ## [53] xml2_1.3.5        svglite_2.1.1     rstudioapi_0.15.0 jsonlite_1.8.7    ## [57] R6_2.5.1          systemfonts_1.0.4 fs_1.6.3"},{"path":[]},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"CTNote Library: Reduction Outcomes","text":"document contains algorithms necessary code outcomes measure “substance use reduction”. include outcomes result single value per subject. outcomes : use table participant opioid use patterns ctn0094DataExtra package calculate endpoints (copy endpoints dataset outcomesCTN0094). Importantly, wish apply algorithms calculate endpoints data, participants’ substance use patterns must stored “substance use pattern word” format shown . also show subset data visualize variety different real substance use patterns. first define following five-value legend: +: positive substance(s) specified window time (day, week, month, etc.) urine screen (participant self report, data interest) –: negative substance(s) o: subject failed provide urine sample *: inconclusive results mixed results (e.g. subject provided one urine sample time interval agree) _: specimens required (weekends, holidays, pre-randomization period, alternating visit days/weeks) example, participant 1 use pattern ooooooooooooooo (missing UDS), means dropped study. contrast, participant 233 use pattern *+++++++++++o++++++++++o (nearly positive UDS): drop study, treatment completely ineffective . Participant 2089 started study rough patch, greatly improved treatment time (++++---+--------------o-).","code":"###  Full Data  ### udsOutcomes_df <-      CTNote::outcomesCTN0094 %>%    select(who, usePatternUDS)  # Make a copy outcomesRed_df <- udsOutcomes_df   ###  Examples  ### examplePeople_int <- c(1, 163, 210, 242, 4, 17, 13, 1103, 233, 2089) outcomesRed_df %>%    filter(who %in% examplePeople_int) ## # A tibble: 10 × 2 ##      who usePatternUDS                       ##    <dbl> <chr>                               ##  1     1 ooooooooooooooo                     ##  2     4 -------------------o-o-o            ##  3    13 ------------o-oooooooooo            ##  4    17 --++*++++++-++++++-+++-             ##  5   163 -o---o---o--o+----------            ##  6   210 -++++++++-+++-----------            ##  7   233 *+++++++++++o++++++++++o            ##  8   242 -----------------------             ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o ## 10  2089 ++++---+--------------o-"},{"path":[]},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"comer_injectable_2006","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Comer et al. (2006)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Percentage negative UOS 8 weeks treatment","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%      mutate(         Rd_comer_2006 = count_matches(             use_pattern = usePatternUDS,             match_is = \"-\",             # Mixed results weeks count as half of a negative week             mixed_results_are = \"*\", mixed_weight = 0.5,             # first 8 weeks of treatment             start = 1, end = 8,             proportion = TRUE         )     ) %>%     select(who, Rd_comer_2006) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_comer_2006) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_comer_2006 ##    <dbl> <chr>                                       <dbl> ##  1     1 ooooooooooooooo                            0      ##  2     4 -------------------o-o-o                   1      ##  3    13 ------------o-oooooooooo                   1      ##  4    17 --++*++++++-++++++-+++-                    0.312  ##  5   163 -o---o---o--o+----------                   0.75   ##  6   210 -++++++++-+++-----------                   0.125  ##  7   233 *+++++++++++o++++++++++o                   0.0625 ##  8   242 -----------------------                    1      ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o        0.5    ## 10  2089 ++++---+--------------o-                   0.375"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"eissenberg_dose-related_1997","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Eissenberg et al. (1997)","title":"CTNote Library: Reduction Outcomes","text":"Definition: subject retained study least 17 weeks subject showed 4 consecutive negative UDS weeks 1-17 paper, read “urinalysis data missing entire week (5 1836 data points; 0.3%) average patient’s results 2 weeks surrounding missing week substituted missing value.” Also, trials retained subjects 15-16 weeks, changed cutoff 15 weeks order apply definition data.","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    # Check for 15 weeks of participation   mutate(         completedProtocol = measure_retention(usePatternUDS) >= 15     ) %>%      # Impute local missings     mutate(         useImputed = impute_missing_visits(             use_pattern = usePatternUDS,             method = \"kNV\",             knvWeights_num = c(`o` = NA, `+` = 1, `*` = 0.5, `-` = 0),             quietly = TRUE         )     ) %>%      # detect 4 consecutive negative UDS     mutate(         consecNeg = detect_subpattern(             use_pattern = useImputed,             subpattern = \"----\",             # we use 15 weeks of study (instead of 17)             start = 1, end = 15         )     ) %>%      # non-participation penalty: if the participant didn't stay in the study the   #   whole time, then the treatment was a failure     mutate(         Rd_eissenberg_1997 = case_when(             completedProtocol  ~ consecNeg,             !completedProtocol ~ FALSE         )     ) %>%      select(who, Rd_eissenberg_1997) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_eissenberg_1997) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_eissenberg_1997 ##    <dbl> <chr>                               <lgl>              ##  1     1 ooooooooooooooo                     FALSE              ##  2     4 -------------------o-o-o            TRUE               ##  3    13 ------------o-oooooooooo            FALSE              ##  4    17 --++*++++++-++++++-+++-             FALSE              ##  5   163 -o---o---o--o+----------            TRUE               ##  6   210 -++++++++-+++-----------            FALSE              ##  7   233 *+++++++++++o++++++++++o            FALSE              ##  8   242 -----------------------             TRUE               ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o TRUE               ## 10  2089 ++++---+--------------o-            TRUE"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"fiellin_counseling_2006","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Fiellin et al. (2006)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Percentage negative UOS","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    mutate(         Rd_fiellin_2006 = count_matches(             use_pattern = usePatternUDS,             match_is = \"-\",             # Mixed results weeks count as half of a negative week             mixed_results_are = \"*\", mixed_weight = 0.5,             proportion = TRUE         )     ) %>%     select(who, Rd_fiellin_2006) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_fiellin_2006) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_fiellin_2006 ##    <dbl> <chr>                                         <dbl> ##  1     1 ooooooooooooooo                              0      ##  2     4 -------------------o-o-o                     0.875  ##  3    13 ------------o-oooooooooo                     0.542  ##  4    17 --++*++++++-++++++-+++-                      0.239  ##  5   163 -o---o---o--o+----------                     0.792  ##  6   210 -++++++++-+++-----------                     0.542  ##  7   233 *+++++++++++o++++++++++o                     0.0208 ##  8   242 -----------------------                      1      ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o          0.571  ## 10  2089 ++++---+--------------o-                     0.75"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"fudala_office-based_2003","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Fudala et al. (2003)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Percentage negative UOS; exclude missing values.","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    # Drop weeks with missing UDS   mutate(         usePatternPresent = recode_missing_visits(             usePatternUDS,             missing_becomes = \"\"         )     ) %>%     mutate(         Rd_fudala_2003 = count_matches(             use_pattern = usePatternPresent,             match_is = \"-\",             # Mixed results weeks count as half of a negative week             mixed_results_are = \"*\", mixed_weight = 0.5,             proportion = TRUE         )     ) %>%      select(who, Rd_fudala_2003) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_fudala_2003) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_fudala_2003 ##    <dbl> <chr>                                        <dbl> ##  1     1 ooooooooooooooo                             0      ##  2     4 -------------------o-o-o                    1      ##  3    13 ------------o-oooooooooo                    1      ##  4    17 --++*++++++-++++++-+++-                     0.239  ##  5   163 -o---o---o--o+----------                    0.95   ##  6   210 -++++++++-+++-----------                    0.542  ##  7   233 *+++++++++++o++++++++++o                    0.0227 ##  8   242 -----------------------                     1      ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o         0.769  ## 10  2089 ++++---+--------------o-                    0.783"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"haight_efficacy_2019","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Haight et al. (2019)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Percentage negative UOS week 5 week 24","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    mutate(         Rd_haight_2019 = count_matches(             use_pattern = usePatternUDS,             match_is = \"-\",             # Mixed results weeks count as half of a negative week             mixed_results_are = \"*\", mixed_weight = 0.5,             # The end-of-protocol for our trials is 15-16 weeks             start = 5, end = 15,             proportion = TRUE         )     ) %>%     select(who, Rd_haight_2019) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_haight_2019) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_haight_2019 ##    <dbl> <chr>                                        <dbl> ##  1     1 ooooooooooooooo                              0     ##  2     4 -------------------o-o-o                     1     ##  3    13 ------------o-oooooooooo                     0.818 ##  4    17 --++*++++++-++++++-+++-                      0.136 ##  5   163 -o---o---o--o+----------                     0.636 ##  6   210 -++++++++-+++-----------                     0.273 ##  7   233 *+++++++++++o++++++++++o                     0     ##  8   242 -----------------------                      1     ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o          0.545 ## 10  2089 ++++---+--------------o-                     0.909"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"jaffe_methadyl_1972","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Jaffe et al. (1972)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Percentage treatment weeks characterized negative UOS patients completed ≥8 weeks study; missing values imputed mode participant.","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    # Mark if participants completed 8 weeks of treatment; remove those who do not   #   (but we will add them back in at the end)   mutate(lastWeek_idx = measure_retention(use_pattern = usePatternUDS)) %>%      filter(lastWeek_idx >= 8) %>%      # For participants who stayed in the trials at least 8 weeks, impute their   #   missing weeks to their personal most common UDS result; in the event of a   #   tie between a negative and a positive result for the mode, the tiebreaker   #   is a positive result.     mutate(         usePatternImputed = impute_missing_visits(             use_pattern = usePatternUDS,             method = \"mode\"         )     ) %>%      mutate(         Rd_jaffe_1972 = count_matches(             usePatternImputed,             match_is = \"-\",             mixed_results_are = \"*\",             mixed_weight = 0.5,             proportion = TRUE         )     ) %>%      select(who, Rd_jaffe_1972) %>%      left_join(outcomesRed_df, ., by = \"who\") %>%      # Lots of NAs from the participants who did not make it to week 8; replace     #   these NAs with 0     replace_na(list(Rd_jaffe_1972 = 0))  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_jaffe_1972) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_jaffe_1972 ##    <dbl> <chr>                                       <dbl> ##  1     1 ooooooooooooooo                            0      ##  2     4 -------------------o-o-o                   1      ##  3    13 ------------o-oooooooooo                   1      ##  4    17 --++*++++++-++++++-+++-                    0.239  ##  5   163 -o---o---o--o+----------                   0.958  ##  6   210 -++++++++-+++-----------                   0.542  ##  7   233 *+++++++++++o++++++++++o                   0.0208 ##  8   242 -----------------------                    1      ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o        0.829  ## 10  2089 ++++---+--------------o-                   0.792"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"johnson_controlled_1992","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Johnson, Jaffe, and Fudala (1992)","title":"CTNote Library: Reduction Outcomes","text":"Definitions: Average percentage negative UOS","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    mutate(         Rd_johnson_1992 = count_matches(             use_pattern = usePatternUDS,             match_is = \"-\",             # Mixed results weeks count as half of a negative week             mixed_results_are = \"*\", mixed_weight = 0.5,             proportion = TRUE         )     ) %>%      select(who, Rd_johnson_1992) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_johnson_1992) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_johnson_1992 ##    <dbl> <chr>                                         <dbl> ##  1     1 ooooooooooooooo                              0      ##  2     4 -------------------o-o-o                     0.875  ##  3    13 ------------o-oooooooooo                     0.542  ##  4    17 --++*++++++-++++++-+++-                      0.239  ##  5   163 -o---o---o--o+----------                     0.792  ##  6   210 -++++++++-+++-----------                     0.542  ##  7   233 *+++++++++++o++++++++++o                     0.0208 ##  8   242 -----------------------                      1      ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o          0.571  ## 10  2089 ++++---+--------------o-                     0.75"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"kosten_buprenorphine_1993","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Kosten et al. (1993)","title":"CTNote Library: Reduction Outcomes","text":"Definition: ≥70% negative UOS 24-week trial period; missing UDS excluded Note: multiple definitions treatment failure paper; provide algorithm definition results single value participant.","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    # Exclude missing visits   mutate(         usePatternPresent = recode_missing_visits(             usePatternUDS,             missing_becomes = \"\"         )     ) %>%     mutate(         kosten1993B_prop = count_matches(             use_pattern = usePatternPresent,             match_is = \"-\",             # Mixed results weeks count as half of a negative week             mixed_results_are = \"*\", mixed_weight = 0.5,             start = 1,             end = 15,             proportion = TRUE         )     ) %>%      mutate(Rd_kostenB_1993 = kosten1993B_prop >= 0.7) %>%      select(who, Rd_kostenB_1993) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_kostenB_1993) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_kostenB_1993 ##    <dbl> <chr>                               <lgl>           ##  1     1 ooooooooooooooo                     FALSE           ##  2     4 -------------------o-o-o            TRUE            ##  3    13 ------------o-oooooooooo            TRUE            ##  4    17 --++*++++++-++++++-+++-             FALSE           ##  5   163 -o---o---o--o+----------            TRUE            ##  6   210 -++++++++-+++-----------            FALSE           ##  7   233 *+++++++++++o++++++++++o            FALSE           ##  8   242 -----------------------             TRUE            ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o TRUE            ## 10  2089 ++++---+--------------o-            FALSE"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"ling_buprenorphine_1998-a-and-c","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Ling et al. (1998) (A) and (C)","title":"CTNote Library: Reduction Outcomes","text":"two definitions paper include reduction section library: Mean percentage negative UOS . negative UOS (“treatment effectiveness score”). outcome definitions exclude missing UDS. also include abstinence endpoint paper “abstinence relapse endpoints” section.","code":""},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"ling-et-al--1998-a","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints > Ling et al. (1998) (A) and (C)","what":"Ling et al., 1998 (A)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Mean percentage negative UOS","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    # Exclude missing UDS   mutate(         usePatternPresent = recode_missing_visits(             usePatternUDS,             missing_becomes = \"\"         )     ) %>%     mutate(         Rd_lingA_1998 = count_matches(             use_pattern = usePatternPresent,             match_is = \"-\",             # Mixed results weeks count as half of a negative week             mixed_results_are = \"*\", mixed_weight = 0.5,             start = 1, end = 15,             proportion = TRUE         )     ) %>%      select(who, Rd_lingA_1998) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_lingA_1998) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_lingA_1998 ##    <dbl> <chr>                                       <dbl> ##  1     1 ooooooooooooooo                            0      ##  2     4 -------------------o-o-o                   1      ##  3    13 ------------o-oooooooooo                   1      ##  4    17 --++*++++++-++++++-+++-                    0.233  ##  5   163 -o---o---o--o+----------                   0.933  ##  6   210 -++++++++-+++-----------                   0.267  ##  7   233 *+++++++++++o++++++++++o                   0.0333 ##  8   242 -----------------------                    1      ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o        0.733  ## 10  2089 ++++---+--------------o-                   0.667"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"ling-et-al--1998-c","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints > Ling et al. (1998) (A) and (C)","what":"Ling et al., 1998 (C)","title":"CTNote Library: Reduction Outcomes","text":"Definition: . negative UOS (“treatment effectiveness score”)","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    mutate(         Rd_lingC_1998 = count_matches(             use_pattern = usePatternUDS,             match_is = \"-\",             end = 15,             mixed_results_are = \"*\",             mixed_weight = 0.5         )     ) %>%      select(who, Rd_lingC_1998) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_lingC_1998) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_lingC_1998 ##    <dbl> <chr>                                       <dbl> ##  1     1 ooooooooooooooo                               0   ##  2     4 -------------------o-o-o                     15   ##  3    13 ------------o-oooooooooo                     13   ##  4    17 --++*++++++-++++++-+++-                       3.5 ##  5   163 -o---o---o--o+----------                     10   ##  6   210 -++++++++-+++-----------                      4   ##  7   233 *+++++++++++o++++++++++o                      0.5 ##  8   242 -----------------------                      15   ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o           8   ## 10  2089 ++++---+--------------o-                     10"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"ling_buprenorphine_2010","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Ling et al. (2010)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Percentage negative UOS weeks 1-16 trial","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    mutate(         Rd_ling_2010 = count_matches(             use_pattern = usePatternUDS,             match_is = \"-\",             # Mixed results weeks count as half of a negative week             mixed_results_are = \"*\", mixed_weight = 0.5,             # We only have 15 weeks of data from some arms             start = 1, end = 15,             proportion = TRUE         )     ) %>%      select(who, Rd_ling_2010) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_ling_2010) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_ling_2010 ##    <dbl> <chr>                                      <dbl> ##  1     1 ooooooooooooooo                           0      ##  2     4 -------------------o-o-o                  1      ##  3    13 ------------o-oooooooooo                  0.867  ##  4    17 --++*++++++-++++++-+++-                   0.233  ##  5   163 -o---o---o--o+----------                  0.667  ##  6   210 -++++++++-+++-----------                  0.267  ##  7   233 *+++++++++++o++++++++++o                  0.0333 ##  8   242 -----------------------                   1      ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o       0.533  ## 10  2089 ++++---+--------------o-                  0.667"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"ling_methadyl_1976","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Ling et al. (1976)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Index illicit morphine use ([0, 120]). Note: complex definition; details see original paper.","code":""},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"original","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints > Ling et al. (1976)","what":"Original","title":"CTNote Library: Reduction Outcomes","text":"definition paper quite complex, well thought . one favorite MOUD treatment endpoints flexibility.","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    # Rule 1: mark induction failures   # The Ling et al. protocol lasted 40 weeks while requiring 7 weeks of data for   #   the subjects to be counted as \"estimable participants\"; our 3 studies each     #   lasted at least 15 weeks. Therefore, we should require at least   #   (7/40) * 15) ~= 3 weeks of data to consider a participant \"estimable\"     mutate(         inductFail = measure_retention(usePatternUDS) <= 3     ) %>%      mutate(         usePatternTrunc = str_sub(usePatternUDS, end = 15)     ) %>%      # Rules 2-4: weighting and scaling visits. The flexibility here is amazing.     #   If we think that dropout is worse than positive, then we can reflect that     #   in the weights. Ling et al. counted a missing visit as 0.22 of a positive;   #   and they use a step function to increase the penalty of a positive UDS    #   over time.     mutate(         ling1976o22_use = weight_positive_visits(             use_pattern = usePatternTrunc,             weights_num = c(`+` = 1.0, `*` = 0.5, `o` = 0.22, `-` = 0),             posPenalty_num = rep(1:5, each = 3) # step function for 15 weeks         )     ) %>%      mutate(         ling1976o22_use = case_when(             inductFail  ~ 120,             !inductFail ~ ling1976o22_use         ),         Rd_lingA_1976 = 120 - ling1976o22_use     ) %>%     select(who, Rd_lingA_1976) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_lingA_1976) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_lingA_1976 ##    <dbl> <chr>                                       <dbl> ##  1     1 ooooooooooooooo                               0   ##  2     4 -------------------o-o-o                    120   ##  3    13 ------------o-oooooooooo                    119.  ##  4    17 --++*++++++-++++++-+++-                      18.7 ##  5   163 -o---o---o--o+----------                    104.  ##  6   210 -++++++++-+++-----------                     40   ##  7   233 *+++++++++++o++++++++++o                     14.1 ##  8   242 -----------------------                     120   ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o          88.9 ## 10  2089 ++++---+--------------o-                     98.7"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"a-variant","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints > Ling et al. (1976)","what":"A Variant","title":"CTNote Library: Reduction Outcomes","text":"also include variant definition includes greater penalty missing values smooth function increase weights positive UDS.","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%      mutate(         inductFail = measure_retention(usePatternUDS) <= 3     ) %>%      mutate(         usePatternTrunc = str_sub(usePatternUDS, end = 15)     ) %>%      mutate(         ling1976o100_use = weight_positive_visits(             use_pattern = usePatternTrunc,             # Higher weight for missing values             weights_num = c(`+` = 0.8, `*` = 0.4, `o` = 1.0, `-` = 0),             # Smooth penalty function for increasing positive UDS             posPenalty_num = seq(                 from = 1, to = 5, length.out = str_length(usePatternTrunc)             )         )     ) %>%      mutate(       ling1976o100_use = case_when(             inductFail  ~ 120,             !inductFail ~ ling1976o100_use         ),         Rd_lingB_1976 = 120 - ling1976o100_use     ) %>%     select(who, Rd_lingB_1976) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_lingB_1976) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_lingB_1976 ##    <dbl> <chr>                                       <dbl> ##  1     1 ooooooooooooooo                               0   ##  2     4 -------------------o-o-o                    120   ##  3    13 ------------o-oooooooooo                    113.  ##  4    17 --++*++++++-++++++-+++-                      20.6 ##  5   163 -o---o---o--o+----------                     94.2 ##  6   210 -++++++++-+++-----------                     38.5 ##  7   233 *+++++++++++o++++++++++o                     10.4 ##  8   242 -----------------------                     120   ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o          82.0 ## 10  2089 ++++---+--------------o-                     96.9"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"lofwall_weekly_2018","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Lofwall et al. (2018)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Mean percentage negative UOS weeks 1 24; urine screens collected week first 12 weeks, every week weeks 13-24. project onto 15-16 week protocol requiring UDS week first 7 weeks, every week next 8. , impute skipped weeks whatever value UDS last visit.","code":"###  Define a Visit Pattern (Lattice)  ### lofwallLattice_char <- collapse_lattice(     lattice_patterns = c(\"o\", \"_o\"),     # For the lattice as defined over 24 weeks, you need 12 weeks of weekly visits     #   and 6 sets of alternating \"no visit\" and \"visit\" week pairs, or c(12, 6).     #   For us, we want 7 weeks straight of weekly visits followed by 4 pairs of     #   alternating visits (8 weeks) for a total of 15 weeks.     times = c(7, 4) ) lofwallLattice_char ## [1] \"ooooooo_o_o_o_o\" ###  Calculate the Endpoint  ### outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    # Mark all missing UDS as positive     mutate(         udsPattern = recode_missing_visits(usePatternUDS)     ) %>%    # View the current use pattern \"through\" the Lofwall protocol     mutate(         udsLattice = view_by_lattice(             use_pattern = udsPattern,             lattice_pattern = str_sub(lofwallLattice_char, end = 15) # first 15 weeks         )     ) %>%    # Impute the visits from the \"unobserved\" weeks to the last observed week     mutate(         udsLatticeLOCF = impute_missing_visits(             use_pattern = udsLattice,             method = \"locf\",             # This is only imputing values that we wouldn't have seen because of the             #   protocol (\"_\" means missing by design; \"o\" means missing)             missing_is = \"_\",             quietly = TRUE         )     ) %>%      mutate(         Rd_lofwall_2018 = count_matches(             use_pattern = udsLatticeLOCF,             match_is = \"-\",             # Mixed results weeks count as half of a negative week             mixed_results_are = \"*\", mixed_weight = 0.5,             start = 1, end = 15, # first 15 weeks             proportion = TRUE         )     ) %>%     select(who, Rd_lofwall_2018) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_lofwall_2018) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_lofwall_2018 ##    <dbl> <chr>                                         <dbl> ##  1     1 ooooooooooooooo                              0      ##  2     4 -------------------o-o-o                     1      ##  3    13 ------------o-oooooooooo                     0.8    ##  4    17 --++*++++++-++++++-+++-                      0.167  ##  5   163 -o---o---o--o+----------                     0.733  ##  6   210 -++++++++-+++-----------                     0.133  ##  7   233 *+++++++++++o++++++++++o                     0.0333 ##  8   242 -----------------------                      1      ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o          0.333  ## 10  2089 ++++---+--------------o-                     0.733"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"mattick_buprenorphine_2003-a-and-b","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Mattick et al. (2003) (A) and (B)","title":"CTNote Library: Reduction Outcomes","text":"also two definitions paper included library.","code":""},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"mattick-et-al--2003-a","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints > Mattick et al. (2003) (A) and (B)","what":"Mattick et al., 2003 (A)","title":"CTNote Library: Reduction Outcomes","text":"Definition: “Percentage clean urines (PCU)”: Rate negative UOS time patient remained study","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    # Find out how long the participant stayed in the study   mutate(lastWeek_idx = measure_retention(use_pattern = usePatternUDS)) %>%      mutate(         Rd_mattickA_2003 = count_matches(             use_pattern = usePatternUDS,             match_is = \"-\",             # Mixed results weeks count as half of a negative week             mixed_results_are = \"*\", mixed_weight = 0.5,             # Measure proportion of negative UDS only during study participation             start = 1, end = lastWeek_idx,             proportion = TRUE         )     ) %>%     select(who, Rd_mattickA_2003) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_mattickA_2003) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_mattickA_2003 ##    <dbl> <chr>                                          <dbl> ##  1     1 ooooooooooooooo                               0      ##  2     4 -------------------o-o-o                      0.913  ##  3    13 ------------o-oooooooooo                      0.929  ##  4    17 --++*++++++-++++++-+++-                       0.239  ##  5   163 -o---o---o--o+----------                      0.792  ##  6   210 -++++++++-+++-----------                      0.542  ##  7   233 *+++++++++++o++++++++++o                      0.0217 ##  8   242 -----------------------                       1      ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o           0.588  ## 10  2089 ++++---+--------------o-                      0.75"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"mattick-et-al--2003-b","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints > Mattick et al. (2003) (A) and (B)","what":"Mattick et al., 2003 (B)","title":"CTNote Library: Reduction Outcomes","text":"Definition: “treatment effectiveness percentage (TEP)”: Rate negative UOS full 13‐week study (ITT)","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    mutate(         Rd_mattickB_2003 = count_matches(             use_pattern = usePatternUDS,             match_is = \"-\",             # Mixed results weeks count as half of a negative week             mixed_results_are = \"*\", mixed_weight = 0.5,             # They used a 13-week protocol             start = 1, end = 13,             proportion = TRUE         )     ) %>%     select(who, Rd_mattickB_2003) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_mattickB_2003) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_mattickB_2003 ##    <dbl> <chr>                                          <dbl> ##  1     1 ooooooooooooooo                               0      ##  2     4 -------------------o-o-o                      1      ##  3    13 ------------o-oooooooooo                      0.923  ##  4    17 --++*++++++-++++++-+++-                       0.269  ##  5   163 -o---o---o--o+----------                      0.692  ##  6   210 -++++++++-+++-----------                      0.154  ##  7   233 *+++++++++++o++++++++++o                      0.0385 ##  8   242 -----------------------                       1      ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o           0.462  ## 10  2089 ++++---+--------------o-                      0.615"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"pani_buprenorphine_2000-a-and-b","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Pani et al. (2000) (A) and (B)","title":"CTNote Library: Reduction Outcomes","text":"also two definitions paper included library.","code":""},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"pani-et-al--2000-a","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints > Pani et al. (2000) (A) and (B)","what":"Pani et al., 2000 (A)","title":"CTNote Library: Reduction Outcomes","text":"Definition: PCC: Percentage ratio negative UOS total number UOS carried patient period treatment","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    # Remove weeks where participant failed to provide UDS   mutate(         usePatternPresent = recode_missing_visits(             usePatternUDS,             missing_becomes = \"\"         )     ) %>%     mutate(         Rd_paniA_2000 = count_matches(             use_pattern = usePatternPresent,             match_is = \"-\",             # Mixed results weeks count as half of a negative week             mixed_results_are = \"*\", mixed_weight = 0.5,             proportion = TRUE         )     ) %>%      select(who, Rd_paniA_2000) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_paniA_2000) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_paniA_2000 ##    <dbl> <chr>                                       <dbl> ##  1     1 ooooooooooooooo                            0      ##  2     4 -------------------o-o-o                   1      ##  3    13 ------------o-oooooooooo                   1      ##  4    17 --++*++++++-++++++-+++-                    0.239  ##  5   163 -o---o---o--o+----------                   0.95   ##  6   210 -++++++++-+++-----------                   0.542  ##  7   233 *+++++++++++o++++++++++o                   0.0227 ##  8   242 -----------------------                    1      ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o        0.769  ## 10  2089 ++++---+--------------o-                   0.783"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"pani-et-al--2000-b","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints > Pani et al. (2000) (A) and (B)","what":"Pani et al., 2000 (B)","title":"CTNote Library: Reduction Outcomes","text":"Definition: TEC: Percentage ratio number negative UOS number UOS per protocol","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    mutate(         Rd_paniB_2000 = count_matches(             use_pattern = usePatternUDS,             match_is = \"-\",             # Mixed results weeks count as half of a negative week             mixed_results_are = \"*\", mixed_weight = 0.5,             proportion = TRUE         )     ) %>%      select(who, Rd_paniB_2000) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_paniB_2000) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_paniB_2000 ##    <dbl> <chr>                                       <dbl> ##  1     1 ooooooooooooooo                            0      ##  2     4 -------------------o-o-o                   0.875  ##  3    13 ------------o-oooooooooo                   0.542  ##  4    17 --++*++++++-++++++-+++-                    0.239  ##  5   163 -o---o---o--o+----------                   0.792  ##  6   210 -++++++++-+++-----------                   0.542  ##  7   233 *+++++++++++o++++++++++o                   0.0208 ##  8   242 -----------------------                    1      ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o        0.571  ## 10  2089 ++++---+--------------o-                   0.75"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"petitjean_double-blind_2001","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Petitjean et al. (2001)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Weekly proportion positive UOS (intent--treat completer analysis)","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    mutate(         udsPattern = recode_missing_visits(usePatternUDS)     ) %>%      mutate(         petitjean2001_use = count_matches(             use_pattern = udsPattern,             match_is = \"+\",             mixed_results_are = \"*\",             proportion = TRUE         )     ) %>%      mutate(         Rd_petitjean_2001 = 1 - petitjean2001_use     ) %>%      select(who, Rd_petitjean_2001) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_petitjean_2001) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_petitjean_2001 ##    <dbl> <chr>                                           <dbl> ##  1     1 ooooooooooooooo                                0      ##  2     4 -------------------o-o-o                       0.875  ##  3    13 ------------o-oooooooooo                       0.542  ##  4    17 --++*++++++-++++++-+++-                        0.239  ##  5   163 -o---o---o--o+----------                       0.792  ##  6   210 -++++++++-+++-----------                       0.542  ##  7   233 *+++++++++++o++++++++++o                       0.0208 ##  8   242 -----------------------                        1      ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o            0.571  ## 10  2089 ++++---+--------------o-                       0.75"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"preston_methadone_2000","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Preston, Umbricht, and Epstein (2000)","title":"CTNote Library: Reduction Outcomes","text":"Definition: “Mean intervention percent negative”: Percentage negative UOS treatment phase","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    mutate(         Rd_preston_2000 = count_matches(             use_pattern = usePatternUDS,             match_is = \"-\",             # Mixed results weeks count as half of a negative week             mixed_results_are = \"*\", mixed_weight = 0.5,             # 13-week protocol used             end = 13,             proportion = TRUE         )     ) %>%      select(who, Rd_preston_2000) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_preston_2000) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_preston_2000 ##    <dbl> <chr>                                         <dbl> ##  1     1 ooooooooooooooo                              0      ##  2     4 -------------------o-o-o                     1      ##  3    13 ------------o-oooooooooo                     0.923  ##  4    17 --++*++++++-++++++-+++-                      0.269  ##  5   163 -o---o---o--o+----------                     0.692  ##  6   210 -++++++++-+++-----------                     0.154  ##  7   233 *+++++++++++o++++++++++o                     0.0385 ##  8   242 -----------------------                      1      ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o          0.462  ## 10  2089 ++++---+--------------o-                     0.615"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"schottenfeld_methadone_2005","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Schottenfeld et al. (2005)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Proportion negative UOS; exclude missing UDS","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    # Exclude missing   mutate(         usePatternPresent = recode_missing_visits(             usePatternUDS,             missing_becomes = \"\"         )     ) %>%   # Count negative     mutate(         Rd_schottenfeld_2005 = count_matches(             use_pattern = usePatternPresent,             match_is = \"-\",             # Mixed results weeks count as half of a negative week             mixed_results_are = \"*\", mixed_weight = 0.5,             proportion = TRUE         )     ) %>%      select(who, Rd_schottenfeld_2005) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_schottenfeld_2005) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_schottenfeld_2005 ##    <dbl> <chr>                                              <dbl> ##  1     1 ooooooooooooooo                                   0      ##  2     4 -------------------o-o-o                          1      ##  3    13 ------------o-oooooooooo                          1      ##  4    17 --++*++++++-++++++-+++-                           0.239  ##  5   163 -o---o---o--o+----------                          0.95   ##  6   210 -++++++++-+++-----------                          0.542  ##  7   233 *+++++++++++o++++++++++o                          0.0227 ##  8   242 -----------------------                           1      ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o               0.769  ## 10  2089 ++++---+--------------o-                          0.783"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"schwartz_randomized_2006","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Schwartz et al. (2006)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Number positive UOS 120-day follow-definition cohort-level definition, individual definition. individual endpoint “participant abstinent substance interest 120-day follow-? (17 weeks randomization). participants uniformly 17 weeks data, assess week 15 instead. NOTE: authors classified outcome ”reduction” metric (therefore include “reduction” section outcomes library), label outcome prefix “Ab” abstinence.","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    mutate(     schwartz2006_abs = count_matches(         use_pattern = usePatternUDS,         match_is = \"-\",         start = 15, end = 15,         mixed_results_are = \"*\"     )   ) %>%      ungroup() %>%      mutate(         Ab_schwartz_2006 = schwartz2006_abs == 1     ) %>%      select(who, Ab_schwartz_2006) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Ab_schwartz_2006) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Ab_schwartz_2006 ##    <dbl> <chr>                               <lgl>            ##  1     1 ooooooooooooooo                     FALSE            ##  2     4 -------------------o-o-o            TRUE             ##  3    13 ------------o-oooooooooo            FALSE            ##  4    17 --++*++++++-++++++-+++-             FALSE            ##  5   163 -o---o---o--o+----------            TRUE             ##  6   210 -++++++++-+++-----------            TRUE             ##  7   233 *+++++++++++o++++++++++o            FALSE            ##  8   242 -----------------------             TRUE             ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o TRUE             ## 10  2089 ++++---+--------------o-            TRUE"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"shufman_efficacy_1994","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Shufman et al. (1994)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Percentage positive UOS; missing ignored","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    # Count \"+\" UDS; 0 could be complete dropout or all negative     mutate(         shufman1994_useP = count_matches(             use_pattern = usePatternUDS,             match_is = \"+\",             mixed_results_are = \"*\",             proportion = TRUE         )     ) %>%      mutate(Rd_shufman_1994 = 1 - shufman1994_useP) %>%      select(who, Rd_shufman_1994) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_shufman_1994) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_shufman_1994 ##    <dbl> <chr>                                         <dbl> ##  1     1 ooooooooooooooo                               1     ##  2     4 -------------------o-o-o                      1     ##  3    13 ------------o-oooooooooo                      1     ##  4    17 --++*++++++-++++++-+++-                       0.239 ##  5   163 -o---o---o--o+----------                      0.958 ##  6   210 -++++++++-+++-----------                      0.542 ##  7   233 *+++++++++++o++++++++++o                      0.104 ##  8   242 -----------------------                       1     ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o           0.829 ## 10  2089 ++++---+--------------o-                      0.792"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"soyka_retention_2008","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Soyka et al. (2008)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Monthly rates positive UOS; missing ignored paper .","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    # Ignore missing UDS     mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS,             missing_becomes = \"\"         )     ) %>%      # Count \"+\" UDS; 0 could be complete dropout or all negative     mutate(         soyka2008_use = count_matches(             use_pattern = udsPattern,             match_is = \"+\",             mixed_results_are = \"*\",             mixed_weight = 0.5,             proportion = TRUE         )     ) %>%      mutate(Rd_soyka_2008 = 1 - soyka2008_use) %>%      ungroup() %>%      select(who, Rd_soyka_2008) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_soyka_2008) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_soyka_2008 ##    <dbl> <chr>                                       <dbl> ##  1     1 ooooooooooooooo                            1      ##  2     4 -------------------o-o-o                   1      ##  3    13 ------------o-oooooooooo                   1      ##  4    17 --++*++++++-++++++-+++-                    0.239  ##  5   163 -o---o---o--o+----------                   0.95   ##  6   210 -++++++++-+++-----------                   0.542  ##  7   233 *+++++++++++o++++++++++o                   0.0227 ##  8   242 -----------------------                    1      ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o        0.769  ## 10  2089 ++++---+--------------o-                   0.783"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"strain_dose-response_1993","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Strain et al. (1993)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Rate positive UOS end stable dosing period; missing defined Paper ","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    # Count \"+\" UDS; 0 could be complete dropout or all negative     mutate(         strain1993_use = count_matches(             use_pattern = usePatternUDS,             match_is = \"+\",             # The stable dosing period began in week 6             start = 6, end = 15,             mixed_results_are = \"*\",             proportion = TRUE         )     ) %>%      mutate(Rd_strain_1993 = 1 - strain1993_use) %>%      select(who, Rd_strain_1993) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_strain_1993) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_strain_1993 ##    <dbl> <chr>                                        <dbl> ##  1     1 ooooooooooooooo                                1   ##  2     4 -------------------o-o-o                       1   ##  3    13 ------------o-oooooooooo                       1   ##  4    17 --++*++++++-++++++-+++-                        0.1 ##  5   163 -o---o---o--o+----------                       0.9 ##  6   210 -++++++++-+++-----------                       0.3 ##  7   233 *+++++++++++o++++++++++o                       0.1 ##  8   242 -----------------------                        1   ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o            0.8 ## 10  2089 ++++---+--------------o-                       0.9"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"strain_comparison_1994","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Strain et al. (1994)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Overall rate positive UOS; missing ignored Paper ","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%      # Ignore missing     mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS,             missing_becomes = \"\"         )     ) %>%    # Count \"+\" UDS; 0 could be complete dropout or all negative     mutate(         strain1994_use = count_matches(             use_pattern = usePatternUDS,             match_is = \"+\",             mixed_results_are = \"*\",             proportion = TRUE         )     ) %>%      mutate(Rd_strain_1994 = 1 - strain1994_use) %>%      select(who, Rd_strain_1994) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_strain_1994) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_strain_1994 ##    <dbl> <chr>                                        <dbl> ##  1     1 ooooooooooooooo                              1     ##  2     4 -------------------o-o-o                     1     ##  3    13 ------------o-oooooooooo                     1     ##  4    17 --++*++++++-++++++-+++-                      0.239 ##  5   163 -o---o---o--o+----------                     0.958 ##  6   210 -++++++++-+++-----------                     0.542 ##  7   233 *+++++++++++o++++++++++o                     0.104 ##  8   242 -----------------------                      1     ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o          0.829 ## 10  2089 ++++---+--------------o-                     0.792"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"strain_buprenorphine_1996","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Strain et al. (1996)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Percentage positive UOS – Overall summarized consecutive 2-week blocks; missing ignored “two-weeks blocks” definition results one value per participant, provide library. definition now identical Strain, Stitzer, Liebson, & Bigelow (1994).","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%      # Ignore missing     mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS,             missing_becomes = \"\"         )     ) %>%      # Count \"+\" UDS; 0 could be complete dropout or all negative     mutate(         strain1996_use = count_matches(             use_pattern = udsPattern,             match_is = \"+\",             mixed_results_are = \"*\",             proportion = TRUE         )     ) %>%      mutate(Rd_strain_1996 = 1 - strain1996_use) %>%      select(who, Rd_strain_1996) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_strain_1996) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_strain_1996 ##    <dbl> <chr>                                        <dbl> ##  1     1 ooooooooooooooo                             1      ##  2     4 -------------------o-o-o                    1      ##  3    13 ------------o-oooooooooo                    1      ##  4    17 --++*++++++-++++++-+++-                     0.239  ##  5   163 -o---o---o--o+----------                    0.95   ##  6   210 -++++++++-+++-----------                    0.542  ##  7   233 *+++++++++++o++++++++++o                    0.0227 ##  8   242 -----------------------                     1      ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o         0.769  ## 10  2089 ++++---+--------------o-                    0.783"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"strain_moderate-_1999","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Strain et al. (1999)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Percentage positive UOS paper gave commentary missing values processed, statistical software SAS capable handling missing values. SAS, default, excludes missing values analyses. Therefore, definition also identical Strain, Stitzer, Liebson, & Bigelow (1994).","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%      # Ignore missing     mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS,             missing_becomes = \"\"         )     ) %>%    # Count \"+\" UDS; 0 could be complete dropout or all negative     mutate(         strain1999_use = count_matches(             use_pattern = usePatternUDS,             match_is = \"+\",             mixed_results_are = \"*\",             proportion = TRUE         )     ) %>%      mutate(Rd_strain_1999 = 1 - strain1999_use) %>%      select(who, Rd_strain_1999) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_strain_1999) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_strain_1999 ##    <dbl> <chr>                                        <dbl> ##  1     1 ooooooooooooooo                              1     ##  2     4 -------------------o-o-o                     1     ##  3    13 ------------o-oooooooooo                     1     ##  4    17 --++*++++++-++++++-+++-                      0.239 ##  5   163 -o---o---o--o+----------                     0.958 ##  6   210 -++++++++-+++-----------                     0.542 ##  7   233 *+++++++++++o++++++++++o                     0.104 ##  8   242 -----------------------                      1     ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o          0.829 ## 10  2089 ++++---+--------------o-                     0.792"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"strang_supervised_2010","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Strang et al. (2010)","title":"CTNote Library: Reduction Outcomes","text":"Definitions: ≥50% negative UOS weeks 14-26 protocols uniformly contain 26 weeks data, apply definition “last 12 weeks protocol.”","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    mutate(         cleanProp = count_matches(             use_pattern = usePatternUDS,             match_is = \"-\",             # Mixed results weeks count as half of a negative week             mixed_results_are = \"*\", mixed_weight = 0.5,             # Syntax to select the LAST visits uses a negative sign; this means \"12             #   weeks before the end of the data\" to \"the last week of the data\"             start = -12, end = -1,             proportion = TRUE         )     ) %>%      mutate(Rd_strang_2010 = cleanProp >= 0.5) %>%      ungroup() %>%      select(who, Rd_strang_2010) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_strang_2010) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_strang_2010 ##    <dbl> <chr>                               <lgl>          ##  1     1 ooooooooooooooo                     FALSE          ##  2     4 -------------------o-o-o            TRUE           ##  3    13 ------------o-oooooooooo            FALSE          ##  4    17 --++*++++++-++++++-+++-             FALSE          ##  5   163 -o---o---o--o+----------            TRUE           ##  6   210 -++++++++-+++-----------            TRUE           ##  7   233 *+++++++++++o++++++++++o            FALSE          ##  8   242 -----------------------             TRUE           ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o FALSE          ## 10  2089 ++++---+--------------o-            TRUE"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"strang_extended-release_2019","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Strang et al. (2019)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Proportion negative UOS end 12‐week post-randomization time point Paper ","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    mutate(         Rd_strang_2019 = count_matches(             use_pattern = usePatternUDS,             match_is = \"-\",             # Mixed results weeks count as half of a negative week             mixed_results_are = \"*\", mixed_weight = 0.5,             # Only look at the first 12 weeks after randomization             start = 1, end = 12,             proportion = TRUE         )     ) %>%     select(who, Rd_strang_2019) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_strang_2019) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_strang_2019 ##    <dbl> <chr>                                        <dbl> ##  1     1 ooooooooooooooo                             0      ##  2     4 -------------------o-o-o                    1      ##  3    13 ------------o-oooooooooo                    1      ##  4    17 --++*++++++-++++++-+++-                     0.292  ##  5   163 -o---o---o--o+----------                    0.75   ##  6   210 -++++++++-+++-----------                    0.167  ##  7   233 *+++++++++++o++++++++++o                    0.0417 ##  8   242 -----------------------                     1      ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o         0.5    ## 10  2089 ++++---+--------------o-                    0.583"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"tanum_effectiveness_2017","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Tanum et al. (2017)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Rate negative UOS: Number negative UOS divided total number attended tests (group proportion) Note definition written group outcome, participant outcome. Therefore, calculate subject “rate negative UOS time patient remained study.”","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    # How long was each subject retained?   mutate(lastWeek_idx = measure_retention(use_pattern = usePatternUDS)) %>%      mutate(         Rd_tanum_2017 = count_matches(             use_pattern = usePatternUDS,             match_is = \"-\",             # Mixed results weeks count as half of a negative week             mixed_results_are = \"*\", mixed_weight = 0.5,             start = 1, end = lastWeek_idx,             proportion = TRUE         )     ) %>%     select(who, Rd_tanum_2017) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_tanum_2017) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_tanum_2017 ##    <dbl> <chr>                                       <dbl> ##  1     1 ooooooooooooooo                            0      ##  2     4 -------------------o-o-o                   0.913  ##  3    13 ------------o-oooooooooo                   0.929  ##  4    17 --++*++++++-++++++-+++-                    0.239  ##  5   163 -o---o---o--o+----------                   0.792  ##  6   210 -++++++++-+++-----------                   0.542  ##  7   233 *+++++++++++o++++++++++o                   0.0217 ##  8   242 -----------------------                    1      ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o        0.588  ## 10  2089 ++++---+--------------o-                   0.75"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"wolstein_randomized_2009","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Wolstein et al. (2009)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Number negative UOS per number weeks study participation","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    # Because we are measuring outcomes only while \"participating\", remove missing     #   weeks from the use pattern     mutate(         usePatternPresent = recode_missing_visits(             usePatternUDS,             missing_becomes = \"\"         )     ) %>%        mutate(         Rd_wolstein_2009 = count_matches(             use_pattern = usePatternPresent,             match_is = \"-\",             # Mixed results weeks count as half of a negative week             mixed_results_are = \"*\", mixed_weight = 0.5,             proportion = TRUE         )     ) %>%     select(who, Rd_wolstein_2009) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_wolstein_2009) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_wolstein_2009 ##    <dbl> <chr>                                          <dbl> ##  1     1 ooooooooooooooo                               0      ##  2     4 -------------------o-o-o                      1      ##  3    13 ------------o-oooooooooo                      1      ##  4    17 --++*++++++-++++++-+++-                       0.239  ##  5   163 -o---o---o--o+----------                      0.95   ##  6   210 -++++++++-+++-----------                      0.542  ##  7   233 *+++++++++++o++++++++++o                      0.0227 ##  8   242 -----------------------                       1      ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o           0.769  ## 10  2089 ++++---+--------------o-                      0.783"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"woody_extended_2008","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Woody et al. (2008)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Percentage positive UOS weeks 4, 8, 12 paper contains rather exotic methods missing value imputation, authors remark setting “missing positive” change final results. may include imputation method future versions code library.","code":"###  Define a Visit Pattern (Lattice)  ### woodyLattice_char <- collapse_lattice(lattice_patterns = \"___o\", times = 3) woodyLattice_char ## [1] \"___o___o___o\" ###  Calculate the Endpoint  ### outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    # Only observe scheduled UDS   mutate(         udsLattice = view_by_lattice(             use_pattern = usePatternUDS,             lattice_pattern = woodyLattice_char         )     ) %>%      # Remove the non-protocol weeks     mutate(         udsLattice2 = recode_missing_visits(             use_pattern = udsLattice,             missing_is = \"_\",             missing_becomes = \"\"         )     ) %>%      # Mark missing UDS as \"+\"     mutate(         udsLattice3 = recode_missing_visits(use_pattern = udsLattice2)     ) %>%      # Count \"+\" UDS; 0 could be complete dropout or all negative     mutate(         woody2008_use = count_matches(             use_pattern = udsLattice3,             match_is = \"+\",             mixed_results_are = \"*\",             proportion = TRUE         )     ) %>%      mutate(Rd_woody_2008 = 1 - woody2008_use) %>%      select(who, Rd_woody_2008) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_woody_2008) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_woody_2008 ##    <dbl> <chr>                                       <dbl> ##  1     1 ooooooooooooooo                             0     ##  2     4 -------------------o-o-o                    1     ##  3    13 ------------o-oooooooooo                    1     ##  4    17 --++*++++++-++++++-+++-                     0.333 ##  5   163 -o---o---o--o+----------                    1     ##  6   210 -++++++++-+++-----------                    0     ##  7   233 *+++++++++++o++++++++++o                    0     ##  8   242 -----------------------                     1     ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o         1     ## 10  2089 ++++---+--------------o-                    0.333"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"zaks_levomethadyl_1972","dir":"Articles","previous_headings":"Substance Use Reduction Endpoints","what":"Zaks, Fink, and Freedman (1972)","title":"CTNote Library: Reduction Outcomes","text":"Definition: Number positive UOS; missing ignored","code":"outcomesRed_df <-      outcomesRed_df %>%   rowwise() %>%    # Ignore missing     mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS,             missing_becomes = \"\"         )     ) %>%      # Count \"+\" UDS; 0 could be complete dropout or all negative     mutate(         zaks1972_use = count_matches(             use_pattern = udsPattern,             match_is = \"+\",             mixed_results_are = \"*\"         )     ) %>%    # For each participant, the \"abstinent\" metric is the number of total weeks   #   of study participation - the number of positive weeks     mutate(Rd_zaks_1972 = str_length(udsPattern) - zaks1972_use) %>%      ungroup() %>%      select(who, Rd_zaks_1972) %>%      left_join(outcomesRed_df, ., by = \"who\")  outcomesRed_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rd_zaks_1972) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rd_zaks_1972 ##    <dbl> <chr>                                      <dbl> ##  1     1 ooooooooooooooo                              0   ##  2     4 -------------------o-o-o                    21   ##  3    13 ------------o-oooooooooo                    13   ##  4    17 --++*++++++-++++++-+++-                      5.5 ##  5   163 -o---o---o--o+----------                    19   ##  6   210 -++++++++-+++-----------                    13   ##  7   233 *+++++++++++o++++++++++o                     0.5 ##  8   242 -----------------------                     23   ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o         20   ## 10  2089 ++++---+--------------o-                    18"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_reduction_20220630.html","id":"computing-environment","dir":"Articles","previous_headings":"","what":"Computing Environment","title":"CTNote Library: Reduction Outcomes","text":"information concerning system configuration, packages, versions used computation:","code":"sessionInfo() ## R version 4.3.1 (2023-06-16) ## Platform: x86_64-pc-linux-gnu (64-bit) ## Running under: Ubuntu 22.04.3 LTS ##  ## Matrix products: default ## BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3  ## LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0 ##  ## locale: ##  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8        ##  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8    ##  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C           ## [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C    ##  ## time zone: UTC ## tzcode source: system (glibc) ##  ## attached base packages: ## [1] stats     graphics  grDevices utils     datasets  methods   base      ##  ## other attached packages: ##  [1] lubridate_1.9.2  forcats_1.0.0    stringr_1.5.0    dplyr_1.1.2      ##  [5] purrr_1.0.2      readr_2.1.4      tidyr_1.3.0      tibble_3.2.1     ##  [9] ggplot2_3.4.3    tidyverse_2.0.0  kableExtra_1.3.4 readxl_1.4.3     ## [13] CTNote_0.1.3     ##  ## loaded via a namespace (and not attached): ##  [1] generics_0.1.3    sass_0.4.7        utf8_1.2.3        xml2_1.3.5        ##  [5] stringi_1.7.12    hms_1.1.3         digest_0.6.33     magrittr_2.0.3    ##  [9] timechange_0.2.0  evaluate_0.21     grid_4.3.1        fastmap_1.1.1     ## [13] cellranger_1.1.0  rprojroot_2.0.3   jsonlite_1.8.7    httr_1.4.6        ## [17] rvest_1.0.3       fansi_1.0.4       viridisLite_0.4.2 scales_1.2.1      ## [21] textshaping_0.3.6 jquerylib_0.1.4   cli_3.6.1         rlang_1.1.1       ## [25] munsell_0.5.0     withr_2.5.0       cachem_1.0.8      yaml_2.3.7        ## [29] tools_4.3.1       tzdb_0.4.0        memoise_2.0.1     colorspace_2.1-0  ## [33] webshot_0.5.5     vctrs_0.6.3       R6_2.5.1          lifecycle_1.0.3   ## [37] fs_1.6.3          ragg_1.2.5        pkgconfig_2.0.3   desc_1.4.2        ## [41] pkgdown_2.0.7     bslib_0.5.1       pillar_1.9.0      gtable_0.3.3      ## [45] glue_1.6.2        systemfonts_1.0.4 highr_0.10        tidyselect_1.2.0  ## [49] xfun_0.40         rstudioapi_0.15.0 knitr_1.43        htmltools_0.5.6   ## [53] rmarkdown_2.24    svglite_2.1.1     compiler_4.3.1"},{"path":[]},{"path":"https://ctn-0094.github.io/CTNote/articles/library_relapse_20220711.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"CTNote Library: Relapse Outcomes","text":"document contains algorithms necessary code outcomes measure “abstinence substance use” “relapse substance use”. include outcomes result single value per subject. outcomes : use table participant opioid use patterns ctn0094DataExtra package calculate endpoints (copy endpoints dataset outcomesCTN0094). Importantly, wish apply algorithms calculate endpoints data, participants’ substance use patterns must stored “substance use pattern word” format shown . also show subset data visualize variety different real substance use patterns. first define following five-value legend: +: positive substance(s) specified window time (day, week, month, etc.) urine screen (participant self report, data interest) –: negative substance(s) o: subject failed provide urine sample *: inconclusive results mixed results (e.g. subject provided one urine sample time interval agree) _: specimens required (weekends, holidays, pre-randomization period, alternating visit days/weeks) example, participant 1 use pattern ooooooooooooooo (missing UDS), means dropped study. contrast, participant 233 use pattern *+++++++++++o++++++++++o (nearly positive UDS): drop study, treatment completely ineffective . Participant 2089 started study rough patch, greatly improved treatment time (++++---+--------------o-).","code":"###  Full Data  ### udsOutcomes_df <-      CTNote::outcomesCTN0094 %>%    select(who, usePatternUDS)  # Make a copy outcomesRel_df <- udsOutcomes_df   ###  Examples  ### examplePeople_int <- c(1, 163, 210, 242, 4, 17, 13, 1103, 233, 2089) outcomesRel_df %>%    filter(who %in% examplePeople_int) ## # A tibble: 10 × 2 ##      who usePatternUDS                       ##    <dbl> <chr>                               ##  1     1 ooooooooooooooo                     ##  2     4 -------------------o-o-o            ##  3    13 ------------o-oooooooooo            ##  4    17 --++*++++++-++++++-+++-             ##  5   163 -o---o---o--o+----------            ##  6   210 -++++++++-+++-----------            ##  7   233 *+++++++++++o++++++++++o            ##  8   242 -----------------------             ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o ## 10  2089 ++++---+--------------o-"},{"path":[]},{"path":"https://ctn-0094.github.io/CTNote/articles/library_relapse_20220711.html","id":"ctn-0094-endpoints","dir":"Articles","previous_headings":"“Relapse to Substance Use” Endpoints","what":"CTN-0094 Endpoints","title":"CTNote Library: Relapse Outcomes","text":"CTN-0094 research group two relapse outcomes: Weeks relapse (4 consecutive weeks positive UOS) Weeks study dropout (4 consecutive weeks missing UOS).","code":""},{"path":"https://ctn-0094.github.io/CTNote/articles/library_relapse_20220711.html","id":"ctn-0094-relapse","dir":"Articles","previous_headings":"“Relapse to Substance Use” Endpoints > CTN-0094 Endpoints","what":"CTN-0094 Relapse","title":"CTNote Library: Relapse Outcomes","text":"Definition: Weeks relapse (4 consecutive weeks positive UOS); missing positive","code":"outcomesRel_df <-      outcomesRel_df %>%   rowwise() %>%    mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS         )     ) %>%     mutate(         udsPattern = recode_missing_visits(             use_pattern = udsPattern,             missing_is = \"*\"         )     ) %>%    mutate(         ctn0094_relapse = detect_in_window(             use_pattern = udsPattern,             window_width = 4L,             threshold = 4L         )     ) %>%      unnest(cols = \"ctn0094_relapse\", names_sep = \"_\") %>%      select(who, starts_with(\"ctn0094_relapse\")) %>%    rename(     RsT_ctnNinetyFour_2023 = ctn0094_relapse_time,     RsE_ctnNinetyFour_2023 = ctn0094_relapse_event   ) %>%      left_join(outcomesRel_df, ., by = \"who\")  outcomesRel_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, RsT_ctnNinetyFour_2023, RsE_ctnNinetyFour_2023) ## # A tibble: 10 × 4 ##      who usePatternUDS             RsT_ctnNinetyFour_2023 RsE_ctnNinetyFour_2023 ##    <dbl> <chr>                                      <int>                  <int> ##  1     1 ooooooooooooooo                                1                      1 ##  2     4 -------------------o-o-o                      21                      0 ##  3    13 ------------o-oooooooooo                      15                      1 ##  4    17 --++*++++++-++++++-+++-                        3                      1 ##  5   163 -o---o---o--o+----------                      21                      0 ##  6   210 -++++++++-+++-----------                       2                      1 ##  7   233 *+++++++++++o++++++++++o                       1                      1 ##  8   242 -----------------------                       20                      0 ##  9  1103 ++--oo--o-+-+--o--------…                     31                      1 ## 10  2089 ++++---+--------------o-                       1                      1"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_relapse_20220711.html","id":"ctn-0094-dropout","dir":"Articles","previous_headings":"“Relapse to Substance Use” Endpoints > CTN-0094 Endpoints","what":"CTN-0094 Dropout","title":"CTNote Library: Relapse Outcomes","text":"Definition: Weeks study dropout (4 consecutive weeks missing UOS)","code":"outcomesRel_df <-      outcomesRel_df %>%   rowwise() %>%    # do NOT recode any missing visits   mutate(         ctn0094_dropout = detect_in_window(             use_pattern = usePatternUDS,             window_width = 4L,             threshold = 4L,             match_is = \"o\"         )     ) %>%      unnest(cols = \"ctn0094_dropout\", names_sep = \"_\") %>%      select(who, starts_with(\"ctn0094_dropout\")) %>%    rename(     DrT_ctnNinetyFour_2023 = ctn0094_dropout_time,     DrE_ctnNinetyFour_2023 = ctn0094_dropout_event   ) %>%      left_join(outcomesRel_df, ., by = \"who\")  outcomesRel_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, DrT_ctnNinetyFour_2023, DrE_ctnNinetyFour_2023) ## # A tibble: 10 × 4 ##      who usePatternUDS             DrT_ctnNinetyFour_2023 DrE_ctnNinetyFour_2023 ##    <dbl> <chr>                                      <int>                  <int> ##  1     1 ooooooooooooooo                                1                      1 ##  2     4 -------------------o-o-o                      21                      0 ##  3    13 ------------o-oooooooooo                      15                      1 ##  4    17 --++*++++++-++++++-+++-                       20                      0 ##  5   163 -o---o---o--o+----------                      21                      0 ##  6   210 -++++++++-+++-----------                      21                      0 ##  7   233 *+++++++++++o++++++++++o                      21                      0 ##  8   242 -----------------------                       20                      0 ##  9  1103 ++--oo--o-+-+--o--------…                     32                      0 ## 10  2089 ++++---+--------------o-                      21                      0"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_relapse_20220711.html","id":"johnson_controlled_1992","dir":"Articles","previous_headings":"“Relapse to Substance Use” Endpoints","what":"Johnson, Jaffe, and Fudala (1992)","title":"CTNote Library: Relapse Outcomes","text":"Definition: Failure rate: 2 consecutive positive UOS following 4 weeks treatment; missing positive","code":"outcomesRel_df <-      outcomesRel_df %>%   rowwise() %>%    mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS,         )     ) %>%      mutate(         udsPattern = recode_missing_visits(             use_pattern = udsPattern,             missing_is = \"*\"         )     ) %>%      mutate(         Rs_johnson_1992 = detect_subpattern(             use_pattern = udsPattern,             subpattern = \"++\",             # Starting at 4 weeks of treatment             start = 4L         )     ) %>%      select(who, Rs_johnson_1992) %>%      left_join(outcomesRel_df, ., by = \"who\")  outcomesRel_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rs_johnson_1992) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rs_johnson_1992 ##    <dbl> <chr>                               <lgl>           ##  1     1 ooooooooooooooo                     TRUE            ##  2     4 -------------------o-o-o            FALSE           ##  3    13 ------------o-oooooooooo            TRUE            ##  4    17 --++*++++++-++++++-+++-             TRUE            ##  5   163 -o---o---o--o+----------            TRUE            ##  6   210 -++++++++-+++-----------            TRUE            ##  7   233 *+++++++++++o++++++++++o            TRUE            ##  8   242 -----------------------             FALSE           ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o TRUE            ## 10  2089 ++++---+--------------o-            FALSE"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_relapse_20220711.html","id":"krupitsky_naltrexone_2004-and-krupitsky_naltrexone_2006","dir":"Articles","previous_headings":"“Relapse to Substance Use” Endpoints","what":"Evgeny M. Krupitsky et al. (2004) and Evgeny M. Krupitsky et al. (2006)","title":"CTNote Library: Relapse Outcomes","text":"Definition: Relapse rate (3 consecutive positive UOS); missing positive (papers explicitly state missing UDS, previous protocols treated missing positive).","code":"outcomesRel_df <-      outcomesRel_df %>%   rowwise() %>%    mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS,         )     ) %>%      mutate(         udsPattern = recode_missing_visits(             use_pattern = udsPattern,             missing_is = \"*\"         )     ) %>%      mutate(         Rs_krupitsky_2004 = detect_subpattern(             use_pattern = udsPattern,             subpattern = \"+++\"         )     ) %>%      select(who, Rs_krupitsky_2004) %>%      left_join(outcomesRel_df, ., by = \"who\")  outcomesRel_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, Rs_krupitsky_2004) ## # A tibble: 10 × 3 ##      who usePatternUDS                       Rs_krupitsky_2004 ##    <dbl> <chr>                               <lgl>             ##  1     1 ooooooooooooooo                     TRUE              ##  2     4 -------------------o-o-o            FALSE             ##  3    13 ------------o-oooooooooo            TRUE              ##  4    17 --++*++++++-++++++-+++-             TRUE              ##  5   163 -o---o---o--o+----------            FALSE             ##  6   210 -++++++++-+++-----------            TRUE              ##  7   233 *+++++++++++o++++++++++o            TRUE              ##  8   242 -----------------------             FALSE             ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o TRUE              ## 10  2089 ++++---+--------------o-            TRUE"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_relapse_20220711.html","id":"lee_extended-release_2016","dir":"Articles","previous_headings":"“Relapse to Substance Use” Endpoints","what":"Joshua D. Lee et al. (2016)","title":"CTNote Library: Relapse Outcomes","text":"Definition: Weeks relapse (≥10 days opioid use 28‐day period [positive UOS computed 5 days opioid use]); missing positive interpret outcome “two positive weekly UDS 4-week window”.","code":"outcomesRel_df <-      outcomesRel_df %>%   rowwise() %>%    mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS         )     ) %>%      mutate(         udsPattern = recode_missing_visits(             use_pattern = udsPattern,             missing_is = \"*\"         )     ) %>%      mutate(         lee2016_rel = detect_in_window(             use_pattern = udsPattern,             window_width = 4L,             threshold = 2L         )     ) %>%      unnest(cols = \"lee2016_rel\", names_sep = \"_\") %>%      select(who, starts_with(\"lee2016_rel\")) %>%    rename(     RsT_lee_2016 = lee2016_rel_time,     RsE_lee_2016 = lee2016_rel_event   ) %>%      left_join(outcomesRel_df, ., by = \"who\")  outcomesRel_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, contains(\"lee_2016\")) ## # A tibble: 10 × 4 ##      who usePatternUDS                       RsT_lee_2016 RsE_lee_2016 ##    <dbl> <chr>                                      <int>        <int> ##  1     1 ooooooooooooooo                                3            1 ##  2     4 -------------------o-o-o                      21            1 ##  3    13 ------------o-oooooooooo                      14            1 ##  4    17 --++*++++++-++++++-+++-                        3            1 ##  5   163 -o---o---o--o+----------                      12            1 ##  6   210 -++++++++-+++-----------                       3            1 ##  7   233 *+++++++++++o++++++++++o                       3            1 ##  8   242 -----------------------                       22            0 ##  9  1103 ++--oo--o-+-+--o----------o-o-oo++o            3            1 ## 10  2089 ++++---+--------------o-                       3            1"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_relapse_20220711.html","id":"lee_comparative_2018-ctn-0051","dir":"Articles","previous_headings":"“Relapse to Substance Use” Endpoints","what":"Joshua D. Lee et al. (2018, CTN–0051)","title":"CTNote Library: Relapse Outcomes","text":"Definition: Weeks relapse (starting day 21 post-randomization: 4 consecutive weeks positive UOS); missing positive","code":"outcomesRel_df <-      outcomesRel_df %>%   rowwise() %>%    mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS         )     ) %>%      mutate(         udsPattern = recode_missing_visits(             use_pattern = udsPattern,             missing_is = \"*\"         )     ) %>%      mutate(         udsPatternTrimmed = str_sub(udsPattern, start = 3L)     ) %>%      rowwise() %>%      mutate(         lee2018_rel = detect_in_window(             use_pattern = udsPatternTrimmed,             window_width = 4L,             threshold = 4L         )     ) %>%      unnest(cols = \"lee2018_rel\", names_sep = \"_\") %>%      mutate(lee2018_rel_time = lee2018_rel_time + 2) %>%      select(who, starts_with(\"lee2018_rel\")) %>%    rename(     RsT_ctnFiftyOne_2018 = lee2018_rel_time,     RsE_ctnFiftyOne_2018 = lee2018_rel_event   ) %>%      left_join(outcomesRel_df, ., by = \"who\")  outcomesRel_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, contains(\"ctnFiftyOne_2018\")) ## # A tibble: 10 × 4 ##      who usePatternUDS                 RsT_ctnFiftyOne_2018 RsE_ctnFiftyOne_2018 ##    <dbl> <chr>                                        <dbl>                <int> ##  1     1 ooooooooooooooo                                  3                    1 ##  2     4 -------------------o-o-o                        21                    0 ##  3    13 ------------o-oooooooooo                        15                    1 ##  4    17 --++*++++++-++++++-+++-                          3                    1 ##  5   163 -o---o---o--o+----------                        21                    0 ##  6   210 -++++++++-+++-----------                         3                    1 ##  7   233 *+++++++++++o++++++++++o                         3                    1 ##  8   242 -----------------------                         20                    0 ##  9  1103 ++--oo--o-+-+--o----------o-…                   31                    1 ## 10  2089 ++++---+--------------o-                        21                    0"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_relapse_20220711.html","id":"schottenfeld_maintenance_2008","dir":"Articles","previous_headings":"“Relapse to Substance Use” Endpoints","what":"Schottenfeld, Chawarski, and Mazlan (2008)","title":"CTNote Library: Relapse Outcomes","text":"Definition: Days relapse (3 consecutive positive UOS); missing positive","code":"outcomesRel_df <-      outcomesRel_df %>%   rowwise() %>%    mutate(         udsPattern = recode_missing_visits(             use_pattern = usePatternUDS         )     ) %>%      mutate(         udsPattern = recode_missing_visits(             use_pattern = udsPattern,             missing_is = \"*\"         )     ) %>%      mutate(         schottenfeld2008_rel = detect_in_window(             use_pattern = udsPattern,             window_width = 3L,             threshold = 3L         )     ) %>%      unnest(cols = \"schottenfeld2008_rel\", names_sep = \"_\") %>%      select(who, starts_with(\"schottenfeld2008_rel\")) %>%    rename(     RsT_schottenfeld_2008 = schottenfeld2008_rel_time,     RsE_schottenfeld_2008 = schottenfeld2008_rel_event   ) %>%      left_join(outcomesRel_df, ., by = \"who\")  outcomesRel_df %>%    filter(who %in% examplePeople_int) %>%    select(who, usePatternUDS, contains(\"schottenfeld_2008\")) ## # A tibble: 10 × 4 ##      who usePatternUDS               RsT_schottenfeld_2008 RsE_schottenfeld_2008 ##    <dbl> <chr>                                       <int>                 <int> ##  1     1 ooooooooooooooo                                 1                     1 ##  2     4 -------------------o-o-o                       22                     0 ##  3    13 ------------o-oooooooooo                       15                     1 ##  4    17 --++*++++++-++++++-+++-                         3                     1 ##  5   163 -o---o---o--o+----------                       22                     0 ##  6   210 -++++++++-+++-----------                        2                     1 ##  7   233 *+++++++++++o++++++++++o                        1                     1 ##  8   242 -----------------------                        21                     0 ##  9  1103 ++--oo--o-+-+--o----------…                    31                     1 ## 10  2089 ++++---+--------------o-                        1                     1"},{"path":"https://ctn-0094.github.io/CTNote/articles/library_relapse_20220711.html","id":"computing-environment","dir":"Articles","previous_headings":"","what":"Computing Environment","title":"CTNote Library: Relapse Outcomes","text":"information concerning system configuration, packages, versions used computation:","code":"sessionInfo() ## R version 4.3.1 (2023-06-16) ## Platform: x86_64-pc-linux-gnu (64-bit) ## Running under: Ubuntu 22.04.3 LTS ##  ## Matrix products: default ## BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3  ## LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0 ##  ## locale: ##  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8        ##  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8    ##  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C           ## [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C    ##  ## time zone: UTC ## tzcode source: system (glibc) ##  ## attached base packages: ## [1] stats     graphics  grDevices utils     datasets  methods   base      ##  ## other attached packages: ##  [1] lubridate_1.9.2  forcats_1.0.0    stringr_1.5.0    dplyr_1.1.2      ##  [5] purrr_1.0.2      readr_2.1.4      tidyr_1.3.0      tibble_3.2.1     ##  [9] ggplot2_3.4.3    tidyverse_2.0.0  kableExtra_1.3.4 readxl_1.4.3     ## [13] CTNote_0.1.3     ##  ## loaded via a namespace (and not attached): ##  [1] generics_0.1.3    sass_0.4.7        utf8_1.2.3        xml2_1.3.5        ##  [5] stringi_1.7.12    hms_1.1.3         digest_0.6.33     magrittr_2.0.3    ##  [9] timechange_0.2.0  evaluate_0.21     grid_4.3.1        fastmap_1.1.1     ## [13] cellranger_1.1.0  rprojroot_2.0.3   jsonlite_1.8.7    httr_1.4.6        ## [17] rvest_1.0.3       fansi_1.0.4       viridisLite_0.4.2 scales_1.2.1      ## [21] textshaping_0.3.6 jquerylib_0.1.4   cli_3.6.1         rlang_1.1.1       ## [25] munsell_0.5.0     withr_2.5.0       cachem_1.0.8      yaml_2.3.7        ## [29] tools_4.3.1       tzdb_0.4.0        memoise_2.0.1     colorspace_2.1-0  ## [33] webshot_0.5.5     vctrs_0.6.3       R6_2.5.1          lifecycle_1.0.3   ## [37] fs_1.6.3          ragg_1.2.5        pkgconfig_2.0.3   desc_1.4.2        ## [41] pkgdown_2.0.7     bslib_0.5.1       pillar_1.9.0      gtable_0.3.3      ## [45] glue_1.6.2        systemfonts_1.0.4 highr_0.10        tidyselect_1.2.0  ## [49] xfun_0.40         rstudioapi_0.15.0 knitr_1.43        htmltools_0.5.6   ## [53] rmarkdown_2.24    svglite_2.1.1     compiler_4.3.1"},{"path":[]},{"path":"https://ctn-0094.github.io/CTNote/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Gabriel Odom. Author, maintainer. Laura Brandt. Author. Raymond Balise. Author. Layla Bouzoubaa. Contributor.","code":""},{"path":"https://ctn-0094.github.io/CTNote/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Odom G, Brandt L, Balise R (2023). CTNote: CTN Outcomes, Treatments, Endpoints. R package version 0.1.3, https://ctn-0094.github.io/CTNote/.","code":"@Manual{,   title = {CTNote: CTN Outcomes, Treatments, and Endpoints},   author = {Gabriel Odom and Laura Brandt and Raymond Balise},   year = {2023},   note = {R package version 0.1.3},   url = {https://ctn-0094.github.io/CTNote/}, }"},{"path":"https://ctn-0094.github.io/CTNote/index.html","id":"introduction-to-ctnote-the-ctn-outcomes-treatments-and-endpoints-library","dir":"","previous_headings":"","what":"CTN Outcomes, Treatments, and Endpoints","title":"CTN Outcomes, Treatments, and Endpoints","text":"package CTNote exists comprehensive implementation outcomes, treatments, endpoints used clinical trials evaluate efficacy medication-assisted treatment substance use disorders (SUDs). functions package programmatic building blocks construct algorithms calculate single-value summaries clinical trial participants’ substance use patterns. assume person-specific substance use patterns time symbolized “word” (see ). vignettes package include standard code-based library algorithms treatment outcome definitions useful evaluate medication-based treatments SUDs. envision vignettes “library”, sense someone interested using endpoint previously-published study can simply “borrow” (.e., copy paste) code vignettes analysis scripts. cases, simply ask cite original paper endpoint choice package.","code":""},{"path":"https://ctn-0094.github.io/CTNote/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"CTN Outcomes, Treatments, and Endpoints","text":"can install released version CTNote CRAN :","code":"install.packages(\"CTNote\")"},{"path":"https://ctn-0094.github.io/CTNote/index.html","id":"citing-this-package","dir":"","previous_headings":"","what":"Citing this Package","title":"CTN Outcomes, Treatments, and Endpoints","text":"expect paper corresponding package published shortly PLOS One. expected citation Odom GJ/Brandt L, Castro C, Luo SX, Feaster DJ, Balise, RR, CTN-0094 Team. (Review, expected 2023). Capturing drug use patterns glance: n-ary word sufficient statistic repeated univariate categorical values. PLOS One. find citation information package, call following code:","code":"citation(\"CTNote\")"},{"path":"https://ctn-0094.github.io/CTNote/index.html","id":"use-pattern-words","dir":"","previous_headings":"","what":"Use Pattern “Words”","title":"CTN Outcomes, Treatments, and Endpoints","text":"wish apply functions package create algorithms calculate endpoints data, participants’ substance use patterns must stored “substance use pattern word” format shown . define following five-value legend: +: positive substance(s) specified window time (day, week, month, etc.) urine screen (participant self report, data interest) –: negative substance(s) o: subject failed provide urine sample *: inconclusive results mixed results (e.g. subject provided one urine sample time interval agree) _: specimens required (weekends, holidays, pre-randomization period, alternating visit days/weeks) example, participant attended clinic three consecutive weeks Mondays, Wednesdays, Fridays, abstinent substance interest days first two, substance use pattern recorded (assuming week starts Sunday): another example, consider clinical trial urine samples submitted weekly 12 week protocol. trial participant submitted positive urine samples first 3 weeks, return clinic remainder trial (lost follow-), substance use pattern recorded “word” :","code":"\"_+_+_-__-_-_-__-_-_-_\" \"+++ooooooooo\""},{"path":"https://ctn-0094.github.io/CTNote/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"CTN Outcomes, Treatments, and Endpoints","text":"basic example shows measure participant’s duration study: function count number visits (weeks case) last non-missing symbol observed—case, 28 weeks, including first two weeks randomization period (shown __).","code":"library(CTNote)  usePattern_char <- \"__++++*o-------+--+-o-o-o+o+oooooo\"  measure_retention(usePattern_char)"},{"path":"https://ctn-0094.github.io/CTNote/reference/collapse_lattice.html","id":null,"dir":"Reference","previous_headings":"","what":"Combine Multiple Simple Study Design ","title":"Combine Multiple Simple Study Design ","text":"Given vector simple study visits patterns, combine complex study visit lattice","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/collapse_lattice.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Combine Multiple Simple Study Design ","text":"","code":"collapse_lattice(lattice_patterns, times)"},{"path":"https://ctn-0094.github.io/CTNote/reference/collapse_lattice.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Combine Multiple Simple Study Design ","text":"lattice_patterns character vector simple study design lattices times integer vector indicating number times repeat simple lattice. length times argument match length lattice_patterns argument.","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/collapse_lattice.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Combine Multiple Simple Study Design ","text":"combined lattice pattern, built combinations smaller lattices.","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/collapse_lattice.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Combine Multiple Simple Study Design ","text":"function designed handle outcomes clinical trial protocol staggered non-sequential visits. example, observed pattern \"-ooo\", cases interpret mean subject present clinic first visit, missed next three visits. trial outcomes count three missing visits positive relapse. However, use pattern observed late subject follow-, time protocol subject required visit clinic monthly (long supplied UDS negative). function basically wrapper around paste0 function collapse = \"\". added support repeat subpatterns.","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/collapse_lattice.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Combine Multiple Simple Study Design ","text":"","code":"# Example 1: a 16 week observation period with visits every 4 weeks:   # \"___o___o___o___o\"   collapse_lattice(     lattice_patterns = \"___o\",     times = 4   ) #> [1] \"___o___o___o___o\"      # Example 2: 24 week observation period with weekly visits for the first   #   12 weeks, then monthly visits (during the second week) thereafter:   # \"oooooooooooo_o___o___o__\"   collapse_lattice(     lattice_patterns = c(\"o\", \"_o__\"),     times = c(12, 3)   ) #> [1] \"oooooooooooo_o___o___o__\"      # Example 3: 6 week observation period with clinic visits on set days,   #   M-W-F for the first 3 weeks, then Monday only for the next 3 weeks:   # \"o_o_o__o_o_o__o_o_o__o______o______o______\"   collapse_lattice(     lattice_patterns = c(\"o_o_o__\", \"o______\"),     times = c(3, 3)   ) #> [1] \"o_o_o__o_o_o__o_o_o__o______o______o______\""},{"path":"https://ctn-0094.github.io/CTNote/reference/count_matches.html","id":null,"dir":"Reference","previous_headings":"","what":"Count Periods of Substance Use / Abstinence — count_matches","title":"Count Periods of Substance Use / Abstinence — count_matches","text":"Given use pattern string, count number times pattern contains certain substance use indicator","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/count_matches.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Count Periods of Substance Use / Abstinence — count_matches","text":"","code":"count_matches(   use_pattern,   match_is,   start = 1,   end = -1,   mixed_results_are = NULL,   mixed_weight = 0.5,   proportion = FALSE )"},{"path":"https://ctn-0094.github.io/CTNote/reference/count_matches.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Count Periods of Substance Use / Abstinence — count_matches","text":"use_pattern character string showing daily, visit, weekly substance use pattern single subject match_is single character value use indicator interest; e.g. \"+\" use positive \"-\" use negative. start two arguments give integer range wherein look use sub-pattern interest. Usually, start week randomization. Defaults 1. end end detection range. often end followup (denoted -1, default value, represents last item string), set number weeks visits, 12 weeks 48 visits. mixed_results_are single character value indicating partial use week; e.g. \"*\" means subject least one positive least one negative test substance(s) interest week. Defaults NULL. mixed_weight fraction showing proportional use value mixed result week. example, studies state positive UDS counts three days use (3/7), studies regard positive UDS five days use (5/7). value substance-specific, default 0.5. proportion function return count proportion matching use periods? Defaults FALSE, signifying count matches returned. Note remaining string (trimming values start end) length 0, function return 0 rather NaN (0/0). interpreting value, 0 represents subject use periods matching chosen outcome.","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/count_matches.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Count Periods of Substance Use / Abstinence — count_matches","text":"single integer (real) value measuring count (proportion) use periods subject substance use value interest","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/count_matches.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Count Periods of Substance Use / Abstinence — count_matches","text":"current, allow many symbols use pattern \"word\", \"_\" missing study design, \"o\" missing protocol non-compliance (common form missing), \"+\" positive, \"-\" negative, \"*\" mixed positive negative results (usually comes visit represents multiple days positive negative results days; example, subject tested weekly; provided positive test Tuesday came back provide negative test following day).","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/count_matches.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Count Periods of Substance Use / Abstinence — count_matches","text":"","code":"# This pattern represents 26 weeks of treatment UDS   pattern_char <- \"++++*o-------+--+-o-o-o+o+\"      # Replace any missing UDS (\"o\") with positive   cleanPattern_char <- recode_missing_visits(pattern_char)      # Example: find the proportion of the subject's negative use weeks after   #   randomization but before the end of a 12-week observation   #   period   count_matches(     cleanPattern_char,     match_is = \"-\",     end = 12,     mixed_results_are = \"*\",     mixed_weight = 0.5,     proportion = TRUE   ) #> [1] 0.5416667      # Example: find the number of times the subject used non-study opioids   #   after being clean at least one week   count_matches(     cleanPattern_char,     match_is = \"-+\"   ) #> [1] 5"},{"path":"https://ctn-0094.github.io/CTNote/reference/detect_in_window.html","id":null,"dir":"Reference","previous_headings":"","what":"Detect Visits before Matching a Fuzzy Sub-Pattern — detect_in_window","title":"Detect Visits before Matching a Fuzzy Sub-Pattern — detect_in_window","text":"Given use pattern string, use fuzzy logic detect sub-pattern interest present within specified detection window many visits required find said match.","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/detect_in_window.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Detect Visits before Matching a Fuzzy Sub-Pattern — detect_in_window","text":"","code":"detect_in_window(   use_pattern,   window_width = 4L,   threshold = 3L,   offset = window_width - threshold,   match_is = c(\"+\", \"o\", \"-\") )"},{"path":"https://ctn-0094.github.io/CTNote/reference/detect_in_window.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Detect Visits before Matching a Fuzzy Sub-Pattern — detect_in_window","text":"use_pattern character string showing daily, visit, weekly window_width wide inspection window ? Defaults four visits. threshold many successes failures required within specified window? Defaults three. offset case event, detection window event time recorded? Defaults window_width - threshold; , start actual pattern. Another option 0, indicates event recorded start window detected. match_is constitutes outcome interest? \"+\" represents positive UDS visit event interest, \"-\" negative, \"o\" means subject provide valid UDS time period question.","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/detect_in_window.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Detect Visits before Matching a Fuzzy Sub-Pattern — detect_in_window","text":"two column data frame () column time representing number visits first window match detected (b) column event indicating match occurs window use pattern.","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/detect_in_window.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Detect Visits before Matching a Fuzzy Sub-Pattern — detect_in_window","text":"function can used calculate time--event (survival) metrics subjects treatment. example, default arguments represent definition relapse (\"three positive UDS within four-week window\"). Thus, output function default values time first relapse relapse indicator. Concerning offset argument: take, example, use pattern \"-------++++\". subject began use substance(s) interest week 8. relapse definition detect 4 weeks use 4 week window, relapse time recorded week 8. Similarly, expect relapse definition detect 2 3 weeks use 4 week window, relapse time also week 8. default value offset argument : \"shift\" detection use start use. However, see pattern believe relapse recorded week 7 relapse defined 3 weeks use 4-week window week 6 2 weeks use 4-week window, set offset = 0. Defining use symbols: current, allow many symbols use pattern \"word\", \"_\" missing study design, \"o\" missing protocol non-compliance (common form missing), \"+\" positive, \"-\" negative, \"*\" mixed positive negative results (usually comes visit represents multiple days positive negative results days; example, subject tested weekly; provided positive test Tuesday came back provide negative test following day).","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/detect_in_window.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Detect Visits before Matching a Fuzzy Sub-Pattern — detect_in_window","text":"","code":"# Find the first relapse event   detect_in_window(\"o-o+++\") #>   time event #> 1    4     1      # Find the start of the window that contains the first relapse event   detect_in_window(\"o-o+++\", offset = 0) #>   time event #> 1    3     1      # Find the first positive UDS   detect_in_window(\"o-o+++\", window_width = 1L, threshold = 1L) #>   time event #> 1    4     1"},{"path":"https://ctn-0094.github.io/CTNote/reference/detect_subpattern.html","id":null,"dir":"Reference","previous_headings":"","what":"Detect a Consecutive Sub-Pattern — detect_subpattern","title":"Detect a Consecutive Sub-Pattern — detect_subpattern","text":"Given use pattern string, detect pattern contains consecutive sub-pattern interest","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/detect_subpattern.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Detect a Consecutive Sub-Pattern — detect_subpattern","text":"","code":"detect_subpattern(use_pattern, subpattern, start = 1, end = -1)"},{"path":"https://ctn-0094.github.io/CTNote/reference/detect_subpattern.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Detect a Consecutive Sub-Pattern — detect_subpattern","text":"use_pattern character string showing daily, visit, weekly substance use pattern single subject subpattern character string containing sub-pattern interest. example, study dropout seven consecutive missing UDS, sub-pattern \"ooooooo\". start two arguments give integer range wherein look use sub-pattern interest. Usually, start week randomization. Defaults 1. end end detection range. often end followup (denoted -1, default value, represents last item string), set number weeks visits, 12 weeks 48 visits.","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/detect_subpattern.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Detect a Consecutive Sub-Pattern — detect_subpattern","text":"single logical value indicating use subpattern present overall use pattern string","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/detect_subpattern.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Detect a Consecutive Sub-Pattern — detect_subpattern","text":"function can used detect consecutive periods drug abstinence, drug use, study non-compliance (measured failure supply urine). example, detect subject three consecutive use weeks, sub-pattern set \"+++\". current, allow many symbols use pattern \"word\", \"_\" missing study design, \"o\" missing protocol non-compliance (common form missing), \"+\" positive, \"-\" negative, \"*\" mixed positive negative results (usually comes visit represents multiple days positive negative results days; example, subject tested weekly; provided positive test Tuesday came back provide negative test following day).","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/detect_subpattern.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Detect a Consecutive Sub-Pattern — detect_subpattern","text":"","code":"# This pattern represents 26 weeks of treatment UDS   pattern_char <- \"+++++o-------+--+-o-o-o+o+\"      # Replace any missing UDS (\"o\") with positive   cleanPattern_char <- recode_missing_visits(pattern_char)      # Example: detect if the subject was able to stay clean for at least 4   #   weeks after randomization but before the end of a 12-week observation   #   period   detect_subpattern(     cleanPattern_char,     subpattern = \"----\",     end = 12   ) #> [1] TRUE      # Example: detect if the subject was abstinent during the last 3 weeks   detect_subpattern(     cleanPattern_char,     subpattern = \"---\",     start = -3,      end = -1   ) #> [1] FALSE"},{"path":"https://ctn-0094.github.io/CTNote/reference/egOpioidsCTN0094.html","id":null,"dir":"Reference","previous_headings":"","what":"Opioid Use by Study Day for Example CTN-0094 Participants — egOpioidsCTN0094","title":"Opioid Use by Study Day for Example CTN-0094 Participants — egOpioidsCTN0094","text":"data set table daily positive opioid use indicator 10 participants CTN-0094 harmonized data sets. subset used example timeline-style opioid use data.","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/egOpioidsCTN0094.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Opioid Use by Study Day for Example CTN-0094 Participants — egOpioidsCTN0094","text":"","code":"data(egOpioidsCTN0094)"},{"path":"https://ctn-0094.github.io/CTNote/reference/egOpioidsCTN0094.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Opioid Use by Study Day for Example CTN-0094 Participants — egOpioidsCTN0094","text":"tibble 71 rows 3 columns. columns include Patient ID factor indicating substance(s) present urine day ; trivially, substances \"opioids\" example data. number days since signed study consent","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/egOpioidsCTN0094.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Opioid Use by Study Day for Example CTN-0094 Participants — egOpioidsCTN0094","text":"data created script inst/scripts/create_allDrugs_opioid_subset_20220916.R. \"\" column measures number days signed consent participant opioid-positive urine screen collected.","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/impute_missing_visits.html","id":null,"dir":"Reference","previous_headings":"","what":"Naively Impute Missing Visits — impute_missing_visits","title":"Naively Impute Missing Visits — impute_missing_visits","text":"Given use pattern string missing visits, make naive imputations missing visit","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/impute_missing_visits.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Naively Impute Missing Visits — impute_missing_visits","text":"","code":"impute_missing_visits(   use_pattern,   method = c(\"locf\", \"locfD\", \"mode\", \"kNV\"),   missing_is = \"o\",   mixed_is = \"*\",   tiebreaker = \"+\",   k = 1,   knvWeights_num = c(o = NA, `+` = 1, `*` = 0.5, `-` = 0),   quietly = FALSE )"},{"path":"https://ctn-0094.github.io/CTNote/reference/impute_missing_visits.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Naively Impute Missing Visits — impute_missing_visits","text":"use_pattern character string showing daily, visit, weekly substance use pattern single subject method naive imputation method used? Current supported options \"locf\" (last observation carried forward), \"locfD\" (last observation carried forward dropout), \"mode\" (common non-missing value), \"kNV\" (k nearest visits). missing_is single character used mark missing UDS use pattern string? Defaults \"o\". mixed_is single character used mark mixed UDS (positive negative UDS visit block) use pattern string? Defaults \"*\". imputing mode, mixed result UDS assigned tiebreaker value order calculate mode remain unchanged returned use pattern string. tiebreaker event ties two modes, positive negative UDS mode? Defaults positive (\"+\"). k number nearest visits use kNV imputation. defaults 1; recommend parameter stays 1 unless use patterns data extraordinarily missing values. knvWeights_num named vector matching use pattern word \"letters\" numerical use values. names vector match \"letters\" use pattern word exactly; use backticks escape special characters. example, study protocol counts mixed result (one positive one negative UDS single observation period [week]) worth three \"use days\", mixed results  weight 3/7. Additionally, study protocol may count missing values five \"use days\" week. defaults function leave \"o\" missing (NA), give weights 1, 1/2, 0 visits \"+\", \"*\", \"-\" UDS, respectively. quietly warning messages muted? Defaults FALSE","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/impute_missing_visits.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Naively Impute Missing Visits — impute_missing_visits","text":"use pattern string length use_pattern missing values imputed according chosen imputation method.","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/impute_missing_visits.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Naively Impute Missing Visits — impute_missing_visits","text":"like replace UDS missing visits single, pre-specified value (positive), please use recode_missing_visits instead. Furthermore, likely still missing values use pattern even imputation. occur values missing, first values use pattern missing (LOCF used), first /last values use pattern missing (LOCF-D used), back back missing visits (kNV k = 1 used). , may need call recode_missing_visits pipeline function replace remove remaining non-imputable missing visits. using kNV imputation option, caveats consider. Due rounding rules, rounding ties broken order values knvWeights_num vector. instance, consider subject negative UDS one week, missing UDS next week, two UDS following week (one positive negative). represented use pattern \"-o*\". default behavior kNV method impute \"-**\" order knvWeights_num vector \"+\", \"*\", \"-\" UDS values. order, positive result trumps mixed result, mixed result trumps negative result. Similarly, use pattern \"+o*\" imputed \"++*\" default. current, allow many symbols use pattern \"word\", \"_\" missing study design, \"o\" missing protocol non-compliance (common form missing), \"+\" positive, \"-\" negative, \"*\" mixed positive negative results (usually comes visit represents multiple days positive negative results days; example, subject tested weekly; provided positive test Tuesday came back provide negative test following day).","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/impute_missing_visits.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Naively Impute Missing Visits — impute_missing_visits","text":"","code":"pattern_char <- \"__++++*o-------+--+-o-o-o+o+oooooo\"   impute_missing_visits(pattern_char) #> [1] \"__++++**-------+--+------+++++++++\"   impute_missing_visits(pattern_char, method = \"locfD\") #> [1] \"__++++**-------+--+------+++oooooo\"   impute_missing_visits(pattern_char, method = \"mode\") #> [1] \"__++++*--------+--+------+-+------\"      pattern2_char <- \"ooooooooooo\"   impute_missing_visits(pattern2_char) #> Warning: No non-missing visits. No imputation done. #> [1] \"ooooooooooo\""},{"path":"https://ctn-0094.github.io/CTNote/reference/measure_abstinence_period.html","id":null,"dir":"Reference","previous_headings":"","what":"Measure the Length of the Longest Abstinent Period — measure_abstinence_period","title":"Measure the Length of the Longest Abstinent Period — measure_abstinence_period","text":"Find longest number sequential visits pattern negative UDS","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/measure_abstinence_period.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Measure the Length of the Longest Abstinent Period — measure_abstinence_period","text":"","code":"measure_abstinence_period(use_pattern_binary, use_is = \"+\")"},{"path":"https://ctn-0094.github.io/CTNote/reference/measure_abstinence_period.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Measure the Length of the Longest Abstinent Period — measure_abstinence_period","text":"use_pattern_binary character string showing daily, visit, weekly substance use pattern single subject, recoded binary use abstinence indicators. use_is single character used mark positive UDS use pattern string? Defaults \"+\".","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/measure_abstinence_period.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Measure the Length of the Longest Abstinent Period — measure_abstinence_period","text":"integer measuring longest number sequential visits subject abstinent substance(s) interest. subject's entire use pattern missing, 0.","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/measure_abstinence_period.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Measure the Length of the Longest Abstinent Period — measure_abstinence_period","text":"use pattern MUST binary code function work. use patterns coded default language (see \"dictionary\" Details section measure_retention), binary form \"_\" (missing study protocol) visits replaced \"-\" \"o\" (missing non-compliance) \"*\" (mixed positive negative) visits replaced \"+\". See example .","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/measure_abstinence_period.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Measure the Length of the Longest Abstinent Period — measure_abstinence_period","text":"","code":"pattern_char <- \"__++++*o-------+--+-o-o-o+o+oooooo\"      # replace \"_\" with \"-\"   pattern2_char <- recode_missing_visits(     pattern_char,     missing_is = \"_\",     missing_becomes = \"-\"   )   # replace \"o\" with \"+\"   pattern3_char <- recode_missing_visits(pattern2_char)   # replace \"*\" with \"+\"   pattern4_char <- recode_missing_visits(pattern3_char, missing_is = \"*\")      measure_abstinence_period(pattern4_char) #> [1] 7"},{"path":"https://ctn-0094.github.io/CTNote/reference/measure_retention.html","id":null,"dir":"Reference","previous_headings":"","what":"Measure Length of Use Pattern before Dropout — measure_retention","title":"Measure Length of Use Pattern before Dropout — measure_retention","text":"Find number visits pattern last subject contact","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/measure_retention.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Measure Length of Use Pattern before Dropout — measure_retention","text":"","code":"measure_retention(use_pattern, missing_is = \"o\")"},{"path":"https://ctn-0094.github.io/CTNote/reference/measure_retention.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Measure Length of Use Pattern before Dropout — measure_retention","text":"use_pattern character string showing daily, visit, weekly substance use pattern single subject missing_is single character used mark missing UDS use pattern string? Defaults \"o\".","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/measure_retention.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Measure Length of Use Pattern before Dropout — measure_retention","text":"integer measuring number visits subject lost follow-. subject's entire use pattern missing, 0.","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/measure_retention.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Measure Length of Use Pattern before Dropout — measure_retention","text":"current, allow many symbols use pattern \"word\", \"_\" missing study design, \"o\" missing protocol non-compliance (common form missing), \"+\" positive, \"-\" negative, \"*\" mixed positive negative results (usually comes visit represents multiple days positive negative results days; example, subject tested weekly; provided positive test Tuesday came back provide negative test following day).","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/measure_retention.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Measure Length of Use Pattern before Dropout — measure_retention","text":"","code":"pattern_char <- \"__++++*o-------+--+-o-o-o+o+oooooo\"   measure_retention(pattern_char) #> [1] 28      pattern2_char <- \"ooooooooooo\"   measure_retention(pattern2_char) #> [1] 0"},{"path":"https://ctn-0094.github.io/CTNote/reference/outcomesCTN0094.html","id":null,"dir":"Reference","previous_headings":"","what":"All Treatment Outcomes for CTN-0094 Participants — outcomesCTN0094","title":"All Treatment Outcomes for CTN-0094 Participants — outcomesCTN0094","text":"data set table 53 treatment outcomes calculated 3560 participants three clinical trials assess efficacy medication-assisted treatment opioid use disorder.","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/outcomesCTN0094.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"All Treatment Outcomes for CTN-0094 Participants — outcomesCTN0094","text":"","code":"data(outcomesCTN0094)"},{"path":"https://ctn-0094.github.io/CTNote/reference/outcomesCTN0094.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"All Treatment Outcomes for CTN-0094 Participants — outcomesCTN0094","text":"tibble 3,560 rows 64 columns. columns include Patient ID usePatternUDS character string containing \"use pattern word\", represents weekly opioid use participant day randomization. information, see link[ctn0094DataExtra]{derived_weeklyOpioidPattern} ... calculated treatment outcomes 53 endpoints. endpoints composites \"time event\" \"event\" indicator, included two separate columns named *_time *_event, respectively.","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/outcomesCTN0094.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"All Treatment Outcomes for CTN-0094 Participants — outcomesCTN0094","text":"outcomes based harmonized set data three clinical trials. harmonized data trials contained packages ctn0094data ctn0094DataExtra. outcomes calculated three abstinence, relapse, reduction \"library\" vignettes package. data dictionary currently stored Excel spreadsheet inst/suppl_docs/definitions_20221123.xlsx.","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/recode_missing_visits.html","id":null,"dir":"Reference","previous_headings":"","what":"Recode Missing or Ambiguous UDS in a Subject Use Pattern — recode_missing_visits","title":"Recode Missing or Ambiguous UDS in a Subject Use Pattern — recode_missing_visits","text":"Replace missing UDS \"o\" use pattern string","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/recode_missing_visits.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recode Missing or Ambiguous UDS in a Subject Use Pattern — recode_missing_visits","text":"","code":"recode_missing_visits(   use_pattern,   missing_is = \"o\",   missing_becomes = c(\"+\", \"\", \"-\") )"},{"path":"https://ctn-0094.github.io/CTNote/reference/recode_missing_visits.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recode Missing or Ambiguous UDS in a Subject Use Pattern — recode_missing_visits","text":"use_pattern character string showing daily, visit, weekly substance use pattern single subject missing_is single character used mark missing UDS use pattern string? Defaults \"o\". missing_becomes missing UDS treated? Defaults marking subject positive missing period. Options \"+\" positive, \"\" ignore, \"-\" negative (note last option used case \"missing\" UDS regular expected artefact study design preceding following UDS negative).","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/recode_missing_visits.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recode Missing or Ambiguous UDS in a Subject Use Pattern — recode_missing_visits","text":"character string missing UDS values (marked \"o\" unless different value supplied missing_is) replaces value supplied missing_becomes.","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/recode_missing_visits.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Recode Missing or Ambiguous UDS in a Subject Use Pattern — recode_missing_visits","text":"current, allow many symbols use pattern \"word\", \"_\" missing study design, \"o\" missing protocol non-compliance (common form missing), \"+\" positive, \"-\" negative, \"*\" mixed positive negative results (usually comes visit represents multiple days positive negative results days; example, subject tested weekly; provided positive test Tuesday came back provide negative test following day).","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/recode_missing_visits.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recode Missing or Ambiguous UDS in a Subject Use Pattern — recode_missing_visits","text":"","code":"pattern_char <- \"__++++*o-------+--+-o-o-o+o+\"      # Default: change all missing weeks to positive   recode_missing_visits(pattern_char) #> [1] \"__++++*+-------+--+-+-+-++++\"      # Other example: remove all weeks with no UDS by design   recode_missing_visits(pattern_char, missing_is = \"_\", missing_becomes = \"\") #> [1] \"++++*o-------+--+-o-o-o+o+\""},{"path":"https://ctn-0094.github.io/CTNote/reference/view_by_lattice.html","id":null,"dir":"Reference","previous_headings":"","what":"View a Pattern through a Study Design ","title":"View a Pattern through a Study Design ","text":"Given use pattern string pattern study visits, view use pattern string components congruent study design","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/view_by_lattice.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"View a Pattern through a Study Design ","text":"","code":"view_by_lattice(   use_pattern,   lattice_pattern,   visit_is = \"o\",   no_visit_is = \"_\" )"},{"path":"https://ctn-0094.github.io/CTNote/reference/view_by_lattice.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"View a Pattern through a Study Design ","text":"use_pattern character string showing daily, visit, weekly substance use pattern single subject lattice_pattern character string containing study design subject visits. example, study design required visits Monday, Wednesday, Friday lattice pattern \"o_o_o__\", \"o\" represents day wherein subject visit clinic (per study protocol) \"_\" represents non-visit days. symbols set visit_is no_visit_is, respectively. visit_is Symbol indicating subject appear clinic time period, dictated study protocol. Defaults \"o\" (outcome UDS unknown study designed). no_visit_is Symbol indicating subject required appear clinic time period, dictated study protocol. Defaults \"_\".","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/view_by_lattice.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"View a Pattern through a Study Design ","text":"variant use_pattern, non-protocol visits set \"_\". cases, use pattern vector passed impute_missing_visits \"_\" visits replaced last observed UDS. See Examples .","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/view_by_lattice.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"View a Pattern through a Study Design ","text":"function designed handle outcomes clinical trial protocol staggered non-sequential visits. example, observed pattern \"-ooo\", cases interpret mean subject present clinic first visit, missed next three visits. trial outcomes count three missing visits positive relapse. However, use pattern observed late subject follow-, time protocol subject required visit clinic monthly (long supplied UDS negative). Many lattice patterns can easily constructed using function collapse_lattice. example, repeat \"Monday-Wednesday-Friday\" visit pattern noted 4 times, can use collapse_lattice(\"o_o_o__\", 4) create vector weekly visit patterns, collapse (concatenate) together. complex visit patterns can constructed similar manner: first create vector simple repeating visit patterns, collapse together, setting number repeats times argument. current, package allows many symbols use pattern \"word\", \"_\" missing study design, \"o\" missing protocol non-compliance (common form missing), \"+\" positive, \"-\" negative, \"*\" mixed positive negative results (usually comes visit represents multiple days positive negative results days; example, subject tested weekly; provided positive test Tuesday came back provide negative test following day).","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/view_by_lattice.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"View a Pattern through a Study Design ","text":"","code":"# This pattern represents 26 weeks of treatment UDS   pattern_char  <- \"+++++o-------+--+-o-o-o+o+\"   pattern2_char <- recode_missing_visits(pattern_char)      # Example 1: a 16 week observation period with visits every 4 weeks   lattice1_char <- \"___o___o___o___o\"   useLattice1_char <- view_by_lattice(     use_pattern = pattern2_char,     lattice_pattern = lattice1_char   )   useLattice1_char #> [1] \"___+___-___-___-\"   impute_missing_visits(useLattice1_char, method = \"locf\", missing_is = \"_\") #> [1] \"___++++---------\"      # Example 2: 24 week observation period with weekly visits for the first   #   12 weeks, then monthly visits (during the second week) thereafter   lattice2_char <- \"oooooooooooo_o___o___o__\"   useLattice2_char <- view_by_lattice(     use_pattern = pattern2_char,     lattice_pattern = lattice2_char   )   useLattice2_char #> [1] \"++++++------_+___-___-__\"   impute_missing_visits(useLattice2_char, method = \"locf\", missing_is = \"_\") #> [1] \"++++++-------++++-------\""},{"path":"https://ctn-0094.github.io/CTNote/reference/weight_positive_visits.html","id":null,"dir":"Reference","previous_headings":"","what":"Weight Visits in a Subject Use Pattern — weight_positive_visits","title":"Weight Visits in a Subject Use Pattern — weight_positive_visits","text":"Add numeric weights use pattern string","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/weight_positive_visits.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Weight Visits in a Subject Use Pattern — weight_positive_visits","text":"","code":"weight_positive_visits(   use_pattern,   weights_num = c(`+` = 1, `*` = 0.5, o = 0.22, `-` = 0),   posPenalty_num = NULL,   missPenalty_num = NULL,   scaleMax = 120L,   scale = TRUE )"},{"path":"https://ctn-0094.github.io/CTNote/reference/weight_positive_visits.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Weight Visits in a Subject Use Pattern — weight_positive_visits","text":"use_pattern character string showing daily, visit, weekly substance use pattern single subject weights_num named numeric vector mapping symbols use pattern non-negative numeric values. default values, 1 positive UDS (\"+\"), 0.22 missing UDS (\"o\"), 0 negative UDS (\"-\"), values set Ling et al. (1976); see \"Details\" section information. default value mixed weekly result (\"*\": least one positive least one negative UDS single week) average positive negative weight (0.5 default). posPenalty_num numeric vector showing penalty positive mixed UDS (\"+\" \"*\") week use pattern. Defaults NULL, implying positive UDS weight week pattern. One useful option set weights increase along length study protocol, penalty positive UDS grows larger longer participant treatment. See Examples information. missPenalty_num numeric vector showing penalty missing UDS (\"o\") week use pattern. Defaults NULL, implying missing UDS weight week pattern. One useful option set weights decrease along length study protocol, penalty missing clinic visit grows smaller longer participant continued treatment. scaleMax Standardize score maximum? Defaults 120 match scoring scale Ling et al. (1976). See \"Details\" . scale Scale resulting score standard maximum (given scaleMax argument). defaults TRUE; changed unless developer trying debug code.","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/weight_positive_visits.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Weight Visits in a Subject Use Pattern — weight_positive_visits","text":"numeric value: results sum visit weight values use pattern","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/weight_positive_visits.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Weight Visits in a Subject Use Pattern — weight_positive_visits","text":"function exists code treatment outcome defined Ling et al. (1976): doi:10.1001/archpsyc.1976.01770060043007 . definition requires CTNote:: functions well, function written specifically definition. weights_num argument static \"penalty\" positive missing UDS values; change protocol weeks. values multiplied penalty vectors (posPenalty_num missPenalty_num).","code":""},{"path":"https://ctn-0094.github.io/CTNote/reference/weight_positive_visits.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Weight Visits in a Subject Use Pattern — weight_positive_visits","text":"","code":"pattern_char <- \"++o+*-------+--+-o-o-o+o+\"         ###  Defaults  ###   # See how the weights map to the symbols (DO NOT use in practice)   weight_positive_visits(pattern_char, scale = FALSE) #>  [1] 1.00 1.00 0.22 1.00 0.50 0.00 0.00 0.00 0.00 0.00 0.00 0.00 1.00 0.00 0.00 #> [16] 1.00 0.00 0.22 0.00 0.22 0.00 0.22 1.00 0.22 1.00      # Score this use pattern via default settings   weight_positive_visits(pattern_char) #> [1] 41.28         ###  Increase Static Weight of Missing UDS  ###   # Because the score for a missing UDS from the Ling et al. (1976) paper was   #   an estimated value from their data, other weights may better represent   #   modern addiction behavior patterns. For instance, we believe that    #   missing UDS values may be worse than a positive UDS in some instances,   #   because they indicate that the subject is no longer participating in    #   treatment at all. We then should change the static weights to reflect   #   this.   weight_positive_visits(     pattern_char,     weights_num = c(`+` = 0.8, `*` = 0.4, `o` = 1, `-` = 0)   ) #> [1] 52.8         ###  Increasing Positive UDS Penalty  ###   # Score this use pattern using an increasing positive UDS penalty (similar   #   to that shown in Lint et al. (1976))   newPosPenal_num <- seq(     from = 1, to  = 5,      length = stringr::str_length(pattern_char)   )   weight_positive_visits(pattern_char, posPenalty_num = newPosPenal_num) #> [1] 34.82667         ###  Variable Missing UDS Penalty  ###   # Score this use pattern using a step-down missing UDS penalty (based on   #   the idea that missing values during the treatment induction period are   #   much worse than missing any other time in the study)   newMissPenal_num <- rep(1, stringr::str_length(pattern_char))   newMissPenal_num[1:4] <- 3   weight_positive_visits(pattern_char, missPenalty_num = newMissPenal_num) #> [1] 43.392         ###  Composite Penalties  ###   # Score this use pattern with both increasing positive UDS and step-down   #   missing UDS penalties, while adjusting the weights.   weight_positive_visits(     pattern_char,     weights_num = c(`+` = 0.8, `*` = 0.4, `o` = 1, `-` = 0),     posPenalty_num = newPosPenal_num,     missPenalty_num = newMissPenal_num   ) #> [1] 41.52941"},{"path":"https://ctn-0094.github.io/CTNote/news/index.html","id":"ctnote-010","dir":"Changelog","previous_headings":"","what":"CTNote 0.1.0","title":"CTNote 0.1.0","text":"CRAN release: 2022-10-03 Added NEWS.md file track changes package. Submitting CRAN: see comments https://github.com/CTN-0094/CTNote/issues/11","code":""}]
