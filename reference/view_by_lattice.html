<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Given a use pattern string and the pattern of study visits,
view only the use pattern string components which are congruent with the
study design"><title>View a Pattern through a Study Design "Lattice" — view_by_lattice • CTNote</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="View a Pattern through a Study Design " lattice view_by_lattice><meta property="og:description" content="Given a use pattern string and the pattern of study visits,
view only the use pattern string components which are congruent with the
study design"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">CTNote</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-endpoints-library">Endpoints Library</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-endpoints-library">
    <a class="dropdown-item" href="../articles/library_abstinence_20220711.html">Abstinence Outcomes</a>
    <a class="dropdown-item" href="../articles/library_reduction_20220630.html">Use Reduction Outcomes</a>
    <a class="dropdown-item" href="../articles/library_relapse_20220711.html">Relapse Outcomes</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/CTN-0094/CTNote/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>View a Pattern through a Study Design "Lattice"</h1>
      <small class="dont-index">Source: <a href="https://github.com/CTN-0094/CTNote/blob/HEAD/R/view_by_lattice.R" class="external-link"><code>R/view_by_lattice.R</code></a></small>
      <div class="d-none name"><code>view_by_lattice.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Given a use pattern string and the pattern of study visits,
view only the use pattern string components which are congruent with the
study design</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">view_by_lattice</span><span class="op">(</span></span>
<span>  <span class="va">use_pattern</span>,</span>
<span>  <span class="va">lattice_pattern</span>,</span>
<span>  visit_is <span class="op">=</span> <span class="st">"o"</span>,</span>
<span>  no_visit_is <span class="op">=</span> <span class="st">"_"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>use_pattern</dt>
<dd><p>A character string showing the daily, by visit, or weekly
substance use pattern for a single subject</p></dd>


<dt>lattice_pattern</dt>
<dd><p>A character string containing the study design for
subject visits. For example, a study design with required visits on Monday,
Wednesday, and Friday would have the lattice pattern <code>"o_o_o__"</code>,
where <code>"o"</code> represents a day wherein the subject should visit the
clinic (per study protocol) and <code>"_"</code> represents the other non-visit
days. These symbols are set by <code>visit_is</code> and <code>no_visit_is</code>,
respectively.</p></dd>


<dt>visit_is</dt>
<dd><p>Symbol indicating that the subject should appear in the
clinic for that time period, as dictated by the study protocol. Defaults to
<code>"o"</code> (because the outcome of the UDS will be unknown before the study
has been designed).</p></dd>


<dt>no_visit_is</dt>
<dd><p>Symbol indicating that the subject is not required to
appear in the clinic for that time period, as dictated by the study
protocol. Defaults to <code>"_"</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A variant of <code>use_pattern</code>, but with all non-protocol visits set
to <code>"_"</code>. In most cases, this use pattern vector would be then passed
to <code><a href="impute_missing_visits.html">impute_missing_visits</a></code> so that the <code>"_"</code> visits could
be replaced with the last observed UDS. See the Examples below.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function was designed to handle outcomes where the clinical
trial protocol has staggered or non-sequential visits. For example, if we
observed the pattern <code>"-ooo"</code>, in most cases we would interpret this
to mean that the subject was present in the clinic for the first visit, but
missed the next three visits. Some trial outcomes would then count the
three missing visits as all positive or as a relapse. However, this use
pattern could have been observed late during subject follow-up, during
which time the protocol could be that the subject was only required to
visit the clinic monthly (so long as the supplied UDS was negative).</p>
<p>Many lattice patterns can be easily constructed by using the function
<code><a href="collapse_lattice.html">collapse_lattice</a></code>. For example, to repeat the
"Monday-Wednesday-Friday" visit pattern noted above 4 times, you can use
<code>collapse_lattice("o_o_o__", 4)</code> to create a vector of weekly visit
patterns, then collapse (concatenate) them all together. More complex visit
patterns can be constructed in a similar manner: first create a vector of
simple repeating visit patterns, then collapse them all together, setting
the number of repeats with the <code>times</code> argument.</p>
<p>At current, this package allows for many symbols in the use pattern "word",
such as "_" for missing by study design, "o" missing for protocol
non-compliance (the most common form of missing), "+" for positive, "-" for
negative, and "*" for mixed positive and negative results (this usually
comes up when the visit represents multiple days and there are both
positive and negative results in those days; for example, a subject is
tested weekly; they provided a positive test on Tuesday but came back to
provide a negative test the following day).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span>  <span class="co"># This pattern represents 26 weeks of treatment UDS</span></span></span>
<span class="r-in"><span>  <span class="va">pattern_char</span>  <span class="op">&lt;-</span> <span class="st">"+++++o-------+--+-o-o-o+o+"</span></span></span>
<span class="r-in"><span>  <span class="va">pattern2_char</span> <span class="op">&lt;-</span> <span class="fu"><a href="recode_missing_visits.html">recode_missing_visits</a></span><span class="op">(</span><span class="va">pattern_char</span><span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co"># Example 1: a 16 week observation period with visits every 4 weeks</span></span></span>
<span class="r-in"><span>  <span class="va">lattice1_char</span> <span class="op">&lt;-</span> <span class="st">"___o___o___o___o"</span></span></span>
<span class="r-in"><span>  <span class="va">useLattice1_char</span> <span class="op">&lt;-</span> <span class="fu">view_by_lattice</span><span class="op">(</span></span></span>
<span class="r-in"><span>    use_pattern <span class="op">=</span> <span class="va">pattern2_char</span>,</span></span>
<span class="r-in"><span>    lattice_pattern <span class="op">=</span> <span class="va">lattice1_char</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">useLattice1_char</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "___+___-___-___-"</span>
<span class="r-in"><span>  <span class="fu"><a href="impute_missing_visits.html">impute_missing_visits</a></span><span class="op">(</span><span class="va">useLattice1_char</span>, method <span class="op">=</span> <span class="st">"locf"</span>, missing_is <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "___++++---------"</span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co"># Example 2: 24 week observation period with weekly visits for the first</span></span></span>
<span class="r-in"><span>  <span class="co">#   12 weeks, then monthly visits (during the second week) thereafter</span></span></span>
<span class="r-in"><span>  <span class="va">lattice2_char</span> <span class="op">&lt;-</span> <span class="st">"oooooooooooo_o___o___o__"</span></span></span>
<span class="r-in"><span>  <span class="va">useLattice2_char</span> <span class="op">&lt;-</span> <span class="fu">view_by_lattice</span><span class="op">(</span></span></span>
<span class="r-in"><span>    use_pattern <span class="op">=</span> <span class="va">pattern2_char</span>,</span></span>
<span class="r-in"><span>    lattice_pattern <span class="op">=</span> <span class="va">lattice2_char</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">useLattice2_char</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "++++++------_+___-___-__"</span>
<span class="r-in"><span>  <span class="fu"><a href="impute_missing_visits.html">impute_missing_visits</a></span><span class="op">(</span><span class="va">useLattice2_char</span>, method <span class="op">=</span> <span class="st">"locf"</span>, missing_is <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "++++++-------++++-------"</span>
<span class="r-in"><span>     </span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://gabriel.quarto.pub/home/" class="external-link">Gabriel Odom</a>, <a href="https://www.ccny.cuny.edu/profiles/laura-brandt" class="external-link">Laura Brandt</a>, <a href="https://github.com/RaymondBalise" class="external-link">Raymond Balise</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

