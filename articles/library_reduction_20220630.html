<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="CTNote">
<title>CTNote Library: Reduction Outcomes • CTNote</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="CTNote Library: Reduction Outcomes">
<meta property="og:description" content="CTNote">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">CTNote</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9015</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/CTNote_vignette_20220926.html">An n-Ary Word Sufficient Statistic for Repeated Univariate Categorical Values: Applications to Standardized Urine Drug Screen Data</a>
    <a class="dropdown-item" href="../articles/clustering_treatment_outcomes_20220910.html">Empirically Contrasting Substance Use Disorder Treatment Outcome Definitions</a>
    <a class="dropdown-item" href="../articles/library_abstinence_20220711.html">CTNote Library: Abstinence Outcomes</a>
    <a class="dropdown-item" href="../articles/library_reduction_20220630.html">CTNote Library: Reduction Outcomes</a>
    <a class="dropdown-item" href="../articles/library_relapse_20220711.html">CTNote Library: Relapse Outcomes</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="library_reduction_20220630_files/kePrint-0.0.1/kePrint.js"></script><link href="library_reduction_20220630_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>CTNote Library: Reduction Outcomes</h1>
                        <h4 data-toc-skip class="author">Gabriel Odom, Laura Brandt, Sean Luo, and Ray Balise</h4>
            
            <h4 data-toc-skip class="date">2022-09-27</h4>
      
      
      <div class="d-none name"><code>library_reduction_20220630.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This document contains the algorithms necessary to code all the outcomes which measure “substance use reduction”. We only include outcomes which result in a single value per subject. These outcomes are:</p>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:500px; overflow-x: scroll; width:1000px; ">
<table class="table table table-striped lightable-minimal" style='font-size: 11px; margin-left: auto; margin-right: auto; font-family: "Trebuchet MS", verdana, sans-serif; margin-left: auto; margin-right: auto;'>
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Group
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Endpoint
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Class
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Reference
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Definition
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Missing is
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Rate of negative UOS
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Comer et al., 2006
</td>
<td style="text-align:left;width: 5cm; ">
Percentage of negative UOS during 8 weeks of treatment
</td>
<td style="text-align:left;">
Positive
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Opioid use rate
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Eissenberg et al., 1997
</td>
<td style="text-align:left;width: 5cm; ">
subject retained in study at least 17 weeks AND subject showed 4 consecutive negative UDS between weeks 1-17
</td>
<td style="text-align:left;">
Imputed
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Rate of negative UOS
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Fiellin et al., 2006
</td>
<td style="text-align:left;width: 5cm; ">
Percentage of negative UOS
</td>
<td style="text-align:left;">
Positive
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Rate of negative UOS
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Fudala et al., 2003
</td>
<td style="text-align:left;width: 5cm; ">
Percentage of negative UOS
</td>
<td style="text-align:left;">
Missing
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Rate of negative UOS
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Haight et al., 2019
</td>
<td style="text-align:left;width: 5cm; ">
Percentage of negative UOS from week 5 to week 24
</td>
<td style="text-align:left;">
Positive
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Rate of negative UOS
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Jaffe et al., 1972
</td>
<td style="text-align:left;width: 5cm; ">
Percentage of treatment weeks characterized by negative UOS for patients who completed ≥8 weeks of the study
</td>
<td style="text-align:left;">
Imputed
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Rate of negative UOS
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Johnson et al., 1992
</td>
<td style="text-align:left;width: 5cm; ">
Average percentage of negative UOS
</td>
<td style="text-align:left;">
Positive
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Rate of negative UOS
</td>
<td style="text-align:left;width: 3cm; ">
logical
</td>
<td style="text-align:left;width: 3cm; ">
Kosten et al., 1993
</td>
<td style="text-align:left;width: 5cm; ">
≥70% negative UOS during the 24-week trial period
</td>
<td style="text-align:left;">
Missing/not imputed
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Rate of negative UOS
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Ling et al., 1998
</td>
<td style="text-align:left;width: 5cm; ">
Mean percentage negative UOS
</td>
<td style="text-align:left;">
Missing/not imputed
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Rate of negative UOS
</td>
<td style="text-align:left;width: 3cm; ">
integer
</td>
<td style="text-align:left;width: 3cm; ">
Ling et al., 1998
</td>
<td style="text-align:left;width: 5cm; ">
no. of negative UOS (“treatment effectiveness score”)
</td>
<td style="text-align:left;">
Missing/not imputed
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Rate of negative UOS
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Ling et al., 2010
</td>
<td style="text-align:left;width: 5cm; ">
Percentage of negative UOS during weeks 1-16 of the trial
</td>
<td style="text-align:left;">
Positive
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Opioid use rate
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Ling, Charuvastra, Kaim, &amp; Klett, 1976
</td>
<td style="text-align:left;width: 5cm; ">
Index of illicit morphine use ([0, 120])
</td>
<td style="text-align:left;">
Positive
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Rate of negative UOS
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Lofwall et al., 2018
</td>
<td style="text-align:left;width: 5cm; ">
Mean percentage of negative UOS for weeks 1 to 24
</td>
<td style="text-align:left;">
Positive
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Rate of negative UOS
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Mattick et al., 2003
</td>
<td style="text-align:left;width: 5cm; ">
“Percentage of clean urines (PCU)”: Rate of negative UOS for the time that the patient remained in the study
</td>
<td style="text-align:left;">
Missing/not imputed
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Rate of negative UOS
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Mattick et al., 2003
</td>
<td style="text-align:left;width: 5cm; ">
“treatment effectiveness percentage (TEP)”: Rate of negative UOS for the full 13‐week study (ITT)
</td>
<td style="text-align:left;">
Missing/not imputed
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Rate of negative UOS
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Pani, Maremmani, Pirastu, Tagliamonte, &amp; Gessa, 2000
</td>
<td style="text-align:left;width: 5cm; ">
PCC: Percentage ratio of negative UOS and the total number of UOS carried out for each patient during the period of treatment
</td>
<td style="text-align:left;">
Positive
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Rate of negative UOS
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Pani, Maremmani, Pirastu, Tagliamonte, &amp; Gessa, 2000
</td>
<td style="text-align:left;width: 5cm; ">
TEC: Percentage ratio between the number of negative UOS and the number of UOS as per protocol
</td>
<td style="text-align:left;">
Positive
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Opioid use rate
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Petitjean et al., 2001
</td>
<td style="text-align:left;width: 5cm; ">
Weekly proportion of positive UOS (intent-to-treat and completer analysis)
</td>
<td style="text-align:left;">
Positive
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Rate of negative UOS
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Preston, Umbricht, &amp; Epstein, 2000
</td>
<td style="text-align:left;width: 5cm; ">
“Mean intervention percent negative”: Percentage of negative UOS in the treatment phase
</td>
<td style="text-align:left;">
Positive
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Rate of negative UOS
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Schottenfeld et al., 2005
</td>
<td style="text-align:left;width: 5cm; ">
Proportion of negative UOS
</td>
<td style="text-align:left;">
Missing
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Opioid use rate
</td>
<td style="text-align:left;width: 3cm; ">
integer
</td>
<td style="text-align:left;width: 3cm; ">
Schwartz et al., 2006
</td>
<td style="text-align:left;width: 5cm; ">
Number of positive UOS at 120-day follow-up
</td>
<td style="text-align:left;">
Missing/not imputed
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Opioid use rate
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Shufman et al., 1994
</td>
<td style="text-align:left;width: 5cm; ">
Percentage of positive UOS
</td>
<td style="text-align:left;">
Missing
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Opioid use rate
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Soyka, Zingg, Koller, &amp; Kuefner, 2008
</td>
<td style="text-align:left;width: 5cm; ">
Monthly rates of positive UOS
</td>
<td style="text-align:left;">
Missing/not imputed
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Opioid use rate
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Strain, Bigelow, Liebson, &amp; Stitzer, 1999
</td>
<td style="text-align:left;width: 5cm; ">
Percentage of positive UOS
</td>
<td style="text-align:left;">
Missing/not imputed
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Opioid use rate
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Strain, Stitzer, Liebson, &amp; Bigelow, 1993
</td>
<td style="text-align:left;width: 5cm; ">
Rate of positive UOS through the end of the stable dosing period
</td>
<td style="text-align:left;">
Not defined
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Opioid use rate
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Strain, Stitzer, Liebson, &amp; Bigelow, 1994
</td>
<td style="text-align:left;width: 5cm; ">
Overall rate of positive UOS
</td>
<td style="text-align:left;">
Missing/not imputed
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Opioid use rate
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Strain, Stitzer, Liebson, &amp; Bigelow, 1996
</td>
<td style="text-align:left;width: 5cm; ">
Percentage of positive UOS – Overall AND summarized in consecutive 2-week blocks
</td>
<td style="text-align:left;">
Missing/not imputed
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Rate of negative UOS
</td>
<td style="text-align:left;width: 3cm; ">
logical
</td>
<td style="text-align:left;width: 3cm; ">
Strang et al., 2010
</td>
<td style="text-align:left;width: 5cm; ">
≥50% negative UOS during weeks 14-26
</td>
<td style="text-align:left;">
Positive
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Rate of negative UOS
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Strang et al., 2019
</td>
<td style="text-align:left;width: 5cm; ">
Proportion of negative UOS at the end of the 12‐week post-randomization time point
</td>
<td style="text-align:left;">
Positive
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Rate of negative UOS
</td>
<td style="text-align:left;width: 3cm; ">
NA
</td>
<td style="text-align:left;width: 3cm; ">
Tanum et al., 2017
</td>
<td style="text-align:left;width: 5cm; ">
Rate of negative UOS: Number of negative UOS divided by the total number of attended tests (group proportion)
</td>
<td style="text-align:left;">
Positive
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Rate of negative UOS
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Wolstein et al., 2009
</td>
<td style="text-align:left;width: 5cm; ">
Number of negative UOS per number of weeks of study participation
</td>
<td style="text-align:left;">
Unknown
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Opioid use rate
</td>
<td style="text-align:left;width: 3cm; ">
ratio
</td>
<td style="text-align:left;width: 3cm; ">
Woody et al., 2008
</td>
<td style="text-align:left;width: 5cm; ">
Percentage of positive UOS at weeks 4, 8, and 12
</td>
<td style="text-align:left;">
Imputed
</td>
</tr>
<tr>
<td style="text-align:left;width: 3cm; ">
Reduction
</td>
<td style="text-align:left;width: 3cm; ">
Opioid use rate
</td>
<td style="text-align:left;width: 3cm; ">
integer
</td>
<td style="text-align:left;width: 3cm; ">
Zaks, Fink, &amp; Freedman, 1972
</td>
<td style="text-align:left;width: 5cm; ">
Number of positive UOS
</td>
<td style="text-align:left;">
Not defined
</td>
</tr>
</tbody>
</table>
</div>
<p>We will use the table of participant opioid use patterns from the <code>ctn0094DataExtra</code> package to calculate these endpoints (we have a copy of the endpoints in the dataset <code>outcomesCTN0094</code>). Importantly, if you wish to apply these algorithms to calculate endpoints for your data, the participants’ substance use patterns must be stored in the “substance use pattern word” format shown here. We also show a subset of the data to visualize a variety of different real substance use patterns.</p>
<p>We first define the following five-value legend:</p>
<ul>
<li>
<strong>+</strong>: positive for the substance(s) in a specified window of time (a day, week, month, etc.) by urine screen (or participant self report, if such data are of interest)</li>
<li>
<strong>–</strong>: negative for the substance(s)</li>
<li>
<strong>o</strong>: subject failed to provide a urine sample</li>
<li>
<b>*</b>: inconclusive results or mixed results (e.g. subject provided more than one urine sample in the time interval and they did not agree)</li>
<li>
<b>_</b>: no specimens required (weekends, holidays, pre-randomization period, alternating visit days/weeks)</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">###  Full Data  ###</span></span>
<span><span class="va">udsOutcomes_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="fu">CTNote</span><span class="fu">::</span><span class="va"><a href="../reference/outcomesCTN0094.html">outcomesCTN0094</a></span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Make a copy</span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> <span class="va">udsOutcomes_df</span></span>
<span></span>
<span></span>
<span><span class="co">###  Examples  ###</span></span>
<span><span class="va">examplePeople_int</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">163</span>, <span class="fl">210</span>, <span class="fl">242</span>, <span class="fl">4</span>, <span class="fl">17</span>, <span class="fl">13</span>, <span class="fl">1103</span>, <span class="fl">233</span>, <span class="fl">2089</span><span class="op">)</span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 2</span></span></span>
<span><span class="co">##      who usePatternUDS                      </span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                              </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-            </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------            </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-</span></span></code></pre>
<p>For example, participant 1 has a use pattern <code>ooooooooooooooo</code> (all missing UDS), which means that they dropped out of the study. In contrast, participant 233 has a use pattern <code>*+++++++++++o++++++++++o</code> (nearly all positive UDS): they did not drop out of the study, but the treatment was completely ineffective for them. Participant 2089 started the study in a rough patch, but greatly improved in treatment over time (<code>++++---+--------------o-</code>).</p>
<hr>
<p></p>
</div>
<div class="section level2">
<h2 id="substance-use-reduction-endpoints">Substance Use Reduction Endpoints<a class="anchor" aria-label="anchor" href="#substance-use-reduction-endpoints"></a>
</h2>
<div class="section level3">
<h3 id="comer_injectable_2006">
<span class="citation">Comer et al. (2006)</span><a class="anchor" aria-label="anchor" href="#comer_injectable_2006"></a>
</h3>
<p><strong>Definition</strong>: Percentage of negative UOS during 8 weeks of treatment</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        comer2006_red <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>            <span class="co"># Mixed results weeks count as half of a negative week</span></span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>, mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            <span class="co"># first 8 weeks of treatment</span></span>
<span>            start <span class="op">=</span> <span class="fl">1</span>, end <span class="op">=</span> <span class="fl">8</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">comer2006_red</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">comer2006_red</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       comer2006_red</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                            0     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                   1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                   1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                    0.312 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                   0.75  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                   0.125 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                   0.062<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                    1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o        0.5   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                   0.375</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="eissenberg_dose-related_1997">
<span class="citation">Eissenberg et al. (1997)</span><a class="anchor" aria-label="anchor" href="#eissenberg_dose-related_1997"></a>
</h3>
<p><strong>Definition</strong>: subject retained in study at least 17 weeks AND subject showed 4 consecutive negative UDS between weeks 1-17</p>
<p>From <a href="https://pubmed.ncbi.nlm.nih.gov/9200635/" class="external-link">their paper</a>, we read “Where urinalysis data were missing for an entire week (5 of 1836 data points; 0.3%) the average of that patient’s results from the 2 weeks surrounding the missing week was substituted for the missing value.” Also, because some of our trials only retained subjects for 15-16 weeks, we changed the cutoff to 15 weeks in order to apply this definition to our data.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># Check for 15 weeks of participation</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>        completedProtocol <span class="op">=</span> <span class="fu"><a href="../reference/measure_retention.html">measure_retention</a></span><span class="op">(</span><span class="va">usePatternUDS</span><span class="op">)</span> <span class="op">&gt;=</span> <span class="fl">15</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="co"># Impute local missings</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        useImputed <span class="op">=</span> <span class="fu"><a href="../reference/impute_missing_visits.html">impute_missing_visits</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            method <span class="op">=</span> <span class="st">"kNV"</span>,</span>
<span>            knvWeights_num <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>`o` <span class="op">=</span> <span class="cn">NA</span>, `+` <span class="op">=</span> <span class="fl">1</span>, `*` <span class="op">=</span> <span class="fl">0.5</span>, `-` <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,</span>
<span>            quietly <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="co"># detect 4 consecutive negative UDS</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        consecNeg <span class="op">=</span> <span class="fu"><a href="../reference/detect_subpattern.html">detect_subpattern</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">useImputed</span>,</span>
<span>            subpattern <span class="op">=</span> <span class="st">"----"</span>,</span>
<span>            <span class="co"># we use 15 weeks of study (instead of 17)</span></span>
<span>            start <span class="op">=</span> <span class="fl">1</span>, end <span class="op">=</span> <span class="fl">15</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="co"># non-participation penalty: if the participant didn't stay in the study the</span></span>
<span>  <span class="co">#   whole time, then the treatment was a failure</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        eissenberg1997_isAbs <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>            <span class="va">completedProtocol</span>  <span class="op">~</span> <span class="va">consecNeg</span>,</span>
<span>            <span class="op">!</span><span class="va">completedProtocol</span> <span class="op">~</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">eissenberg1997_isAbs</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">eissenberg1997_isAbs</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       eissenberg1997_isAbs</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                               <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>               </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                     FALSE               </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o            TRUE                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo            FALSE               </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-             FALSE               </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------            TRUE                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------            FALSE               </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o            FALSE               </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------             TRUE                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o TRUE                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-            TRUE</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="fiellin_counseling_2006">
<span class="citation">Fiellin et al. (2006)</span><a class="anchor" aria-label="anchor" href="#fiellin_counseling_2006"></a>
</h3>
<p><strong>Definition</strong>: Percentage of negative UOS</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>        fiellin2006_red <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>            <span class="co"># Mixed results weeks count as half of a negative week</span></span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>, mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">fiellin2006_red</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">fiellin2006_red</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       fiellin2006_red</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                              0     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                     0.875 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                     0.542 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                      0.239 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                     0.792 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                     0.542 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                     0.020<span style="text-decoration: underline;">8</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                      1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o          0.571 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                     0.75</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="fudala_office-based_2003">
<span class="citation">Fudala et al. (2003)</span><a class="anchor" aria-label="anchor" href="#fudala_office-based_2003"></a>
</h3>
<p><strong>Definition</strong>: Percentage of negative UOS; they exclude missing values.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># Drop weeks with missing UDS</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>        usePatternPresent <span class="op">=</span> <span class="fu"><a href="../reference/recode_missing_visits.html">recode_missing_visits</a></span><span class="op">(</span></span>
<span>            <span class="va">usePatternUDS</span>,</span>
<span>            missing_becomes <span class="op">=</span> <span class="st">""</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        fudala2003_red <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternPresent</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>            <span class="co"># Mixed results weeks count as half of a negative week</span></span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>, mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">fudala2003_red</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">fudala2003_red</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       fudala2003_red</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                             0     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                    1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                    1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                     0.239 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                    0.95  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                    0.542 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                    0.022<span style="text-decoration: underline;">7</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                     1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o         0.769 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                    0.783</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="haight_efficacy_2019">
<span class="citation">Haight et al. (2019)</span><a class="anchor" aria-label="anchor" href="#haight_efficacy_2019"></a>
</h3>
<p><strong>Definition</strong>: Percentage of negative UOS from week 5 to week 24</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>        haight2019_red <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>            <span class="co"># Mixed results weeks count as half of a negative week</span></span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>, mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            <span class="co"># The end-of-protocol for our trials is 15-16 weeks</span></span>
<span>            start <span class="op">=</span> <span class="fl">5</span>, end <span class="op">=</span> <span class="fl">15</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">haight2019_red</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">haight2019_red</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       haight2019_red</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                              0    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                     1    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                     0.818</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                      0.136</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                     0.636</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                     0.273</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                     0    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                      1    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o          0.545</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                     0.909</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="jaffe_methadyl_1972">
<span class="citation">Jaffe et al. (1972)</span><a class="anchor" aria-label="anchor" href="#jaffe_methadyl_1972"></a>
</h3>
<p><strong>Definition</strong>: Percentage of treatment weeks characterized by negative UOS for patients who completed ≥8 weeks of the study; and missing values were imputed to the mode for each participant.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># Mark if participants completed 8 weeks of treatment; remove those who do not</span></span>
<span>  <span class="co">#   (but we will add them back in at the end)</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>lastWeek_idx <span class="op">=</span> <span class="fu"><a href="../reference/measure_retention.html">measure_retention</a></span><span class="op">(</span>use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">lastWeek_idx</span> <span class="op">&gt;=</span> <span class="fl">8</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="co"># For participants who stayed in the trials at least 8 weeks, impute their</span></span>
<span>  <span class="co">#   missing weeks to their personal most common UDS result; in the event of a</span></span>
<span>  <span class="co">#   tie between a negative and a positive result for the mode, the tiebreaker</span></span>
<span>  <span class="co">#   is a positive result.</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        usePatternImputed <span class="op">=</span> <span class="fu"><a href="../reference/impute_missing_visits.html">impute_missing_visits</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            method <span class="op">=</span> <span class="st">"mode"</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        jaffe1972_red <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            <span class="va">usePatternImputed</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>,</span>
<span>            mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">jaffe1972_red</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="co"># Lots of NAs from the participants who did not make it to week 8; replace</span></span>
<span>    <span class="co">#   these NAs with 0</span></span>
<span>    <span class="fu">replace_na</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>jaffe1972_red <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">jaffe1972_red</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       jaffe1972_red</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                            0     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                   1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                   1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                    0.239 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                   0.958 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                   0.542 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                   0.020<span style="text-decoration: underline;">8</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                    1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o        0.829 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                   0.792</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="johnson_controlled_1992">
<span class="citation">Johnson, Jaffe, and Fudala (1992)</span><a class="anchor" aria-label="anchor" href="#johnson_controlled_1992"></a>
</h3>
<p><strong>Definitions</strong>: Average percentage of negative UOS</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>        johnson1992_red <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>            <span class="co"># Mixed results weeks count as half of a negative week</span></span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>, mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">johnson1992_red</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">johnson1992_red</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       johnson1992_red</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                              0     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                     0.875 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                     0.542 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                      0.239 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                     0.792 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                     0.542 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                     0.020<span style="text-decoration: underline;">8</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                      1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o          0.571 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                     0.75</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="kosten_buprenorphine_1993">
<span class="citation">Kosten et al. (1993)</span><a class="anchor" aria-label="anchor" href="#kosten_buprenorphine_1993"></a>
</h3>
<p><strong>Definition</strong>: ≥70% negative UOS during the 24-week trial period; missing UDS are excluded</p>
<p>Note: there are multiple definitions of treatment failure in this paper; we provide an algorithm for the definition which results in a single value for each participant.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># Exclude missing visits</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>        usePatternPresent <span class="op">=</span> <span class="fu"><a href="../reference/recode_missing_visits.html">recode_missing_visits</a></span><span class="op">(</span></span>
<span>            <span class="va">usePatternUDS</span>,</span>
<span>            missing_becomes <span class="op">=</span> <span class="st">""</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        kosten1993B_prop <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternPresent</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>            <span class="co"># Mixed results weeks count as half of a negative week</span></span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>, mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            start <span class="op">=</span> <span class="fl">1</span>,</span>
<span>            end <span class="op">=</span> <span class="fl">15</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span>kosten1993B_red <span class="op">=</span> <span class="va">kosten1993B_prop</span> <span class="op">&gt;=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">kosten1993B_red</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">kosten1993B_red</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       kosten1993B_red</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                               <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                     FALSE          </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o            TRUE           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo            TRUE           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-             FALSE          </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------            TRUE           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------            FALSE          </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o            FALSE          </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------             TRUE           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o TRUE           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-            FALSE</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="ling_buprenorphine_1998-a-and-c">
<span class="citation">Ling et al. (1998)</span> (A) and (C)<a class="anchor" aria-label="anchor" href="#ling_buprenorphine_1998-a-and-c"></a>
</h3>
<p>There are two definitions from <a href="https://pubmed.ncbi.nlm.nih.gov/9684386/" class="external-link">this paper</a> which we include in the reduction section our library: Mean percentage negative UOS and no. of negative UOS (“treatment effectiveness score”). Both of these outcome definitions <strong>exclude</strong> missing UDS. We also include an abstinence endpoint from this paper in our “abstinence and relapse endpoints” section.</p>
<div class="section level4">
<h4 id="ling-et-al--1998-a">Ling et al., 1998 (A)<a class="anchor" aria-label="anchor" href="#ling-et-al--1998-a"></a>
</h4>
<p><strong>Definition</strong>: Mean percentage negative UOS</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># Exclude missing UDS</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>        usePatternPresent <span class="op">=</span> <span class="fu"><a href="../reference/recode_missing_visits.html">recode_missing_visits</a></span><span class="op">(</span></span>
<span>            <span class="va">usePatternUDS</span>,</span>
<span>            missing_becomes <span class="op">=</span> <span class="st">""</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        ling1998A_red <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternPresent</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>            <span class="co"># Mixed results weeks count as half of a negative week</span></span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>, mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            start <span class="op">=</span> <span class="fl">1</span>, end <span class="op">=</span> <span class="fl">15</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">ling1998A_red</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">ling1998A_red</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       ling1998A_red</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                            0     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                   1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                   1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                    0.233 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                   0.933 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                   0.267 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                   0.033<span style="text-decoration: underline;">3</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                    1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o        0.733 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                   0.667</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="ling-et-al--1998-c">Ling et al., 1998 (C)<a class="anchor" aria-label="anchor" href="#ling-et-al--1998-c"></a>
</h4>
<p><strong>Definition</strong>: no. of negative UOS (“treatment effectiveness score”)</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>        ling1998C_red <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>            end <span class="op">=</span> <span class="fl">15</span>,</span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>,</span>
<span>            mixed_weight <span class="op">=</span> <span class="fl">0.5</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">ling1998C_red</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">ling1998C_red</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       ling1998C_red</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                               0  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                     15  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                     13  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                       3.5</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                     10  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                      4  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                      0.5</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                      15  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o           8  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                     10</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="ling_buprenorphine_2010">
<span class="citation">Ling et al. (2010)</span><a class="anchor" aria-label="anchor" href="#ling_buprenorphine_2010"></a>
</h3>
<p><strong>Definition</strong>: Percentage of negative UOS during weeks 1-16 of the trial</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>        ling2010_red <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>            <span class="co"># Mixed results weeks count as half of a negative week</span></span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>, mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            <span class="co"># We only have 15 weeks of data from some arms</span></span>
<span>            start <span class="op">=</span> <span class="fl">1</span>, end <span class="op">=</span> <span class="fl">15</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">ling2010_red</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">ling2010_red</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       ling2010_red</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                           0     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                  1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                  0.867 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                   0.233 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                  0.667 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                  0.267 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                  0.033<span style="text-decoration: underline;">3</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                   1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o       0.533 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                  0.667</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="ling_methadyl_1976">
<span class="citation">Ling et al. (1976)</span><a class="anchor" aria-label="anchor" href="#ling_methadyl_1976"></a>
</h3>
<p><strong>Definition</strong>: Index of illicit morphine use ([0, 120])</p>
<div class="section level4">
<h4 id="original">Original<a class="anchor" aria-label="anchor" href="#original"></a>
</h4>
<p>The definition in <a href="https://doi.org/10.1001/archpsyc.1976.01770060043007" class="external-link">this paper</a> is quite complex, but very well thought out. It is one of our favorite MOUD treatment endpoints because of its flexibility.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># Rule 1: mark induction failures</span></span>
<span>  <span class="co"># The Ling et al. protocol lasted 40 weeks while requiring 7 weeks of data for</span></span>
<span>  <span class="co">#   the subjects to be counted as "estimable participants"; our 3 studies each</span></span>
<span>    <span class="co">#   lasted at least 15 weeks. Therefore, we should require at least</span></span>
<span>  <span class="co">#   (7/40) * 15) ~= 3 weeks of data to consider a participant "estimable"</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        inductFail <span class="op">=</span> <span class="fu"><a href="../reference/measure_retention.html">measure_retention</a></span><span class="op">(</span><span class="va">usePatternUDS</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">3</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        usePatternTrunc <span class="op">=</span> <span class="fu">str_sub</span><span class="op">(</span><span class="va">usePatternUDS</span>, end <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="co"># Rules 2-4: weighting and scaling visits. The flexibility here is amazing.</span></span>
<span>    <span class="co">#   If we think that dropout is worse than positive, then we can reflect that</span></span>
<span>    <span class="co">#   in the weights. Ling et al. counted a missing visit as 0.22 of a positive;</span></span>
<span>  <span class="co">#   and they use a step function to increase the penalty of a positive UDS </span></span>
<span>  <span class="co">#   over time.</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        ling1976o22_use <span class="op">=</span> <span class="fu"><a href="../reference/weight_positive_visits.html">weight_positive_visits</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternTrunc</span>,</span>
<span>            weights_num <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>`+` <span class="op">=</span> <span class="fl">1.0</span>, `*` <span class="op">=</span> <span class="fl">0.5</span>, `o` <span class="op">=</span> <span class="fl">0.22</span>, `-` <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,</span>
<span>            posPenalty_num <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, each <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="co"># step function for 15 weeks</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        ling1976o22_use <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>            <span class="va">inductFail</span>  <span class="op">~</span> <span class="fl">120</span>,</span>
<span>            <span class="op">!</span><span class="va">inductFail</span> <span class="op">~</span> <span class="va">ling1976o22_use</span></span>
<span>        <span class="op">)</span>,</span>
<span>        ling1976o22_abs <span class="op">=</span> <span class="fl">120</span> <span class="op">-</span> <span class="va">ling1976o22_use</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">ling1976o22_abs</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">ling1976o22_abs</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       ling1976o22_abs</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                                 0  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                      120  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                      119. </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                        18.7</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                      104. </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                       40  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                       14.1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                       120  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o            88.9</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                       98.7</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="a-variant">A Variant<a class="anchor" aria-label="anchor" href="#a-variant"></a>
</h4>
<p>We also include a variant of this definition which includes a greater penalty for missing values and a smooth function to increase weights of positive UDS.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        inductFail <span class="op">=</span> <span class="fu"><a href="../reference/measure_retention.html">measure_retention</a></span><span class="op">(</span><span class="va">usePatternUDS</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">3</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        usePatternTrunc <span class="op">=</span> <span class="fu">str_sub</span><span class="op">(</span><span class="va">usePatternUDS</span>, end <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        ling1976o100_use <span class="op">=</span> <span class="fu"><a href="../reference/weight_positive_visits.html">weight_positive_visits</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternTrunc</span>,</span>
<span>            <span class="co"># Higher weight for missing values</span></span>
<span>            weights_num <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>`+` <span class="op">=</span> <span class="fl">0.8</span>, `*` <span class="op">=</span> <span class="fl">0.4</span>, `o` <span class="op">=</span> <span class="fl">1.0</span>, `-` <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,</span>
<span>            <span class="co"># Smooth penalty function for increasing positive UDS</span></span>
<span>            posPenalty_num <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span></span>
<span>                from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">5</span>, length.out <span class="op">=</span> <span class="fu">str_length</span><span class="op">(</span><span class="va">usePatternTrunc</span><span class="op">)</span></span>
<span>            <span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>      ling1976o100_use <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>            <span class="va">inductFail</span>  <span class="op">~</span> <span class="fl">120</span>,</span>
<span>            <span class="op">!</span><span class="va">inductFail</span> <span class="op">~</span> <span class="va">ling1976o100_use</span></span>
<span>        <span class="op">)</span>,</span>
<span>        ling1976o100_abs <span class="op">=</span> <span class="fl">120</span> <span class="op">-</span> <span class="va">ling1976o100_use</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">ling1976o100_abs</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">ling1976o100_abs</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       ling1976o100_abs</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                                  0  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                       120  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                       113. </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                         20.6</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                        94.2</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                        38.5</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                        10.4</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                        120  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o             82.0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                        96.9</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="lofwall_weekly_2018">
<span class="citation">Lofwall et al. (2018)</span><a class="anchor" aria-label="anchor" href="#lofwall_weekly_2018"></a>
</h3>
<p><strong>Definition</strong>: Mean percentage of negative UOS for weeks 1 to 24; but urine screens are collected each week for the first 12 weeks, then every other week for weeks 13-24. We project this onto a 15-16 week protocol by requiring UDS each week for the first 7 weeks, then every other week for the next 8. Then, we impute the skipped weeks to be whatever the value of the UDS was from the last visit.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">###  Define a Visit Pattern (Lattice)  ###</span></span>
<span><span class="va">lofwallLattice_char</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/collapse_lattice.html">collapse_lattice</a></span><span class="op">(</span></span>
<span>    lattice_patterns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"o"</span>, <span class="st">"_o"</span><span class="op">)</span>,</span>
<span>    <span class="co"># For the lattice as defined over 24 weeks, you need 12 weeks of weekly visits</span></span>
<span>    <span class="co">#   and 6 sets of alternating "no visit" and "visit" week pairs, or c(12, 6).</span></span>
<span>    <span class="co">#   For us, we want 7 weeks straight of weekly visits followed by 4 pairs of</span></span>
<span>    <span class="co">#   alternating visits (8 weeks) for a total of 15 weeks.</span></span>
<span>    times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">4</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">lofwallLattice_char</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "ooooooo_o_o_o_o"</span></span></code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">###  Calculate the Endpoint  ###</span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># Mark all missing UDS as positive</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        udsPattern <span class="op">=</span> <span class="fu"><a href="../reference/recode_missing_visits.html">recode_missing_visits</a></span><span class="op">(</span><span class="va">usePatternUDS</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># View the current use pattern "through" the Lofwall protocol</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        udsLattice <span class="op">=</span> <span class="fu"><a href="../reference/view_by_lattice.html">view_by_lattice</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">udsPattern</span>,</span>
<span>            lattice_pattern <span class="op">=</span> <span class="fu">str_sub</span><span class="op">(</span><span class="va">lofwallLattice_char</span>, end <span class="op">=</span> <span class="fl">15</span><span class="op">)</span> <span class="co"># first 15 weeks</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># Impute the visits from the "unobserved" weeks to the last observed week</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        udsLatticeLOCF <span class="op">=</span> <span class="fu"><a href="../reference/impute_missing_visits.html">impute_missing_visits</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">udsLattice</span>,</span>
<span>            method <span class="op">=</span> <span class="st">"locf"</span>,</span>
<span>            <span class="co"># This is only imputing values that we wouldn't have seen because of the</span></span>
<span>            <span class="co">#   protocol ("_" means missing by design; "o" means missing)</span></span>
<span>            missing_is <span class="op">=</span> <span class="st">"_"</span>,</span>
<span>            quietly <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        lofwall2018_red <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">udsLatticeLOCF</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>            <span class="co"># Mixed results weeks count as half of a negative week</span></span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>, mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            start <span class="op">=</span> <span class="fl">1</span>, end <span class="op">=</span> <span class="fl">15</span>, <span class="co"># first 15 weeks</span></span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">lofwall2018_red</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">lofwall2018_red</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       lofwall2018_red</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                              0     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                     1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                     0.8   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                      0.167 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                     0.733 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                     0.133 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                     0.033<span style="text-decoration: underline;">3</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                      1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o          0.333 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                     0.733</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="mattick_buprenorphine_2003-a-and-b">
<span class="citation">Mattick et al. (2003)</span> (A) and (B)<a class="anchor" aria-label="anchor" href="#mattick_buprenorphine_2003-a-and-b"></a>
</h3>
<p>There are also two definitions from <a href="https://pubmed.ncbi.nlm.nih.gov/12653814/" class="external-link">this paper</a> included in our library.</p>
<div class="section level4">
<h4 id="mattick-et-al--2003-a">Mattick et al., 2003 (A)<a class="anchor" aria-label="anchor" href="#mattick-et-al--2003-a"></a>
</h4>
<p><strong>Definition</strong>: “Percentage of clean urines (PCU)”: Rate of negative UOS for the time that the patient remained in the study</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># Find out how long the participant stayed in the study</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>lastWeek_idx <span class="op">=</span> <span class="fu"><a href="../reference/measure_retention.html">measure_retention</a></span><span class="op">(</span>use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        mattick2003A_red <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>            <span class="co"># Mixed results weeks count as half of a negative week</span></span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>, mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            <span class="co"># Measure proportion of negative UDS only during study participation</span></span>
<span>            start <span class="op">=</span> <span class="fl">1</span>, end <span class="op">=</span> <span class="va">lastWeek_idx</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">mattick2003A_red</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">mattick2003A_red</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       mattick2003A_red</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                               0     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                      0.913 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                      0.929 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                       0.239 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                      0.792 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                      0.542 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                      0.021<span style="text-decoration: underline;">7</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                       1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o           0.588 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                      0.75</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="mattick-et-al--2003-b">Mattick et al., 2003 (B)<a class="anchor" aria-label="anchor" href="#mattick-et-al--2003-b"></a>
</h4>
<p><strong>Definition</strong>: “treatment effectiveness percentage (TEP)”: Rate of negative UOS for the full 13‐week study (ITT)</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>        mattick2003B_red <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>            <span class="co"># Mixed results weeks count as half of a negative week</span></span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>, mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            <span class="co"># They used a 13-week protocol</span></span>
<span>            start <span class="op">=</span> <span class="fl">1</span>, end <span class="op">=</span> <span class="fl">13</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">mattick2003B_red</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">mattick2003B_red</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       mattick2003B_red</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                               0     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                      1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                      0.923 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                       0.269 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                      0.692 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                      0.154 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                      0.038<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                       1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o           0.462 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                      0.615</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="pani_buprenorphine_2000-a-and-b">
<span class="citation">Pani et al. (2000)</span> (A) and (B)<a class="anchor" aria-label="anchor" href="#pani_buprenorphine_2000-a-and-b"></a>
</h3>
<p>There are also two definitions from <a href="https://doi.org/10.1016/S0376-8716(00)80006-X" class="external-link">this paper</a> included in our library.</p>
<div class="section level4">
<h4 id="pani-et-al--2000-a">Pani et al., 2000 (A)<a class="anchor" aria-label="anchor" href="#pani-et-al--2000-a"></a>
</h4>
<p><strong>Definition</strong>: PCC: Percentage ratio of negative UOS and the total number of UOS carried out for each patient during the period of treatment</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># Remove weeks where participant failed to provide UDS</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>        usePatternPresent <span class="op">=</span> <span class="fu"><a href="../reference/recode_missing_visits.html">recode_missing_visits</a></span><span class="op">(</span></span>
<span>            <span class="va">usePatternUDS</span>,</span>
<span>            missing_becomes <span class="op">=</span> <span class="st">""</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        pani2000A_red <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternPresent</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>            <span class="co"># Mixed results weeks count as half of a negative week</span></span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>, mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">pani2000A_red</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">pani2000A_red</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       pani2000A_red</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                            0     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                   1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                   1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                    0.239 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                   0.95  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                   0.542 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                   0.022<span style="text-decoration: underline;">7</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                    1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o        0.769 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                   0.783</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="pani-et-al--2000-b">Pani et al., 2000 (B)<a class="anchor" aria-label="anchor" href="#pani-et-al--2000-b"></a>
</h4>
<p><strong>Definition</strong>: TEC: Percentage ratio between the number of negative UOS and the number of UOS as per protocol</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>        pani2000B_red <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>            <span class="co"># Mixed results weeks count as half of a negative week</span></span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>, mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">pani2000B_red</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">pani2000B_red</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       pani2000B_red</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                            0     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                   0.875 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                   0.542 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                    0.239 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                   0.792 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                   0.542 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                   0.020<span style="text-decoration: underline;">8</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                    1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o        0.571 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                   0.75</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="petitjean_double-blind_2001">
<span class="citation">Petitjean et al. (2001)</span><a class="anchor" aria-label="anchor" href="#petitjean_double-blind_2001"></a>
</h3>
<p><strong>Definition</strong>: Weekly proportion of positive UOS (intent-to-treat and completer analysis)</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>        udsPattern <span class="op">=</span> <span class="fu"><a href="../reference/recode_missing_visits.html">recode_missing_visits</a></span><span class="op">(</span><span class="va">usePatternUDS</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        petitjean2001_use <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">udsPattern</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"+"</span>,</span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        petitjean2001_abs <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">petitjean2001_use</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">petitjean2001_abs</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">petitjean2001_abs</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       petitjean2001_abs</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                                0     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                       0.875 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                       0.542 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                        0.239 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                       0.792 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                       0.542 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                       0.020<span style="text-decoration: underline;">8</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                        1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o            0.571 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                       0.75</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="preston_methadone_2000">
<span class="citation">Preston, Umbricht, and Epstein (2000)</span><a class="anchor" aria-label="anchor" href="#preston_methadone_2000"></a>
</h3>
<p><strong>Definition</strong>: “Mean intervention percent negative”: Percentage of negative UOS in the treatment phase</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>        preston2000_red <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>            <span class="co"># Mixed results weeks count as half of a negative week</span></span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>, mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            <span class="co"># 13-week protocol used</span></span>
<span>            end <span class="op">=</span> <span class="fl">13</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">preston2000_red</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">preston2000_red</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       preston2000_red</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                              0     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                     1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                     0.923 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                      0.269 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                     0.692 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                     0.154 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                     0.038<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                      1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o          0.462 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                     0.615</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="schottenfeld_methadone_2005">
<span class="citation">Schottenfeld et al. (2005)</span><a class="anchor" aria-label="anchor" href="#schottenfeld_methadone_2005"></a>
</h3>
<p><strong>Definition</strong>: Proportion of negative UOS; exclude missing UDS</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># Exclude missing</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>        usePatternPresent <span class="op">=</span> <span class="fu"><a href="../reference/recode_missing_visits.html">recode_missing_visits</a></span><span class="op">(</span></span>
<span>            <span class="va">usePatternUDS</span>,</span>
<span>            missing_becomes <span class="op">=</span> <span class="st">""</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># Count negative</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        schottenfeld2005_red <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternPresent</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>            <span class="co"># Mixed results weeks count as half of a negative week</span></span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>, mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">schottenfeld2005_red</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">schottenfeld2005_red</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       schottenfeld2005_red</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                                   0     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                          1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                          1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                           0.239 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                          0.95  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                          0.542 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                          0.022<span style="text-decoration: underline;">7</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                           1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o               0.769 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                          0.783</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="schwartz_randomized_2006">
<span class="citation">Schwartz et al. (2006)</span><a class="anchor" aria-label="anchor" href="#schwartz_randomized_2006"></a>
</h3>
<p><strong>Definition</strong>: Number of positive UOS at 120-day follow-up</p>
<p>This definition is a cohort-level definition, not an individual definition. The individual endpoint would be “was this participant abstinent from the substance of interest at the 120-day follow-up? (17 weeks from randomization). Our participants do not uniformly have 17 weeks of data, so we will assess them at week 15 instead.</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    schwartz2006_abs <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>        use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>        match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>        start <span class="op">=</span> <span class="fl">15</span>, end <span class="op">=</span> <span class="fl">15</span>,</span>
<span>        mixed_results_are <span class="op">=</span> <span class="st">"*"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        schwartz2006_isAbs <span class="op">=</span> <span class="va">schwartz2006_abs</span> <span class="op">==</span> <span class="fl">1</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">schwartz2006_isAbs</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">schwartz2006_isAbs</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       schwartz2006_isAbs</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                               <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>             </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                     FALSE             </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o            TRUE              </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo            FALSE             </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-             FALSE             </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------            TRUE              </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------            TRUE              </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o            FALSE             </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------             TRUE              </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o TRUE              </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-            TRUE</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="shufman_efficacy_1994">
<span class="citation">Shufman et al. (1994)</span><a class="anchor" aria-label="anchor" href="#shufman_efficacy_1994"></a>
</h3>
<p><strong>Definition</strong>: Percentage of positive UOS; missing is ignored</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># Count "+" UDS; 0 could be complete dropout or all negative</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        shufman1994_useP <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"+"</span>,</span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span>shufman1994_absP <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">shufman1994_useP</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">shufman1994_absP</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">schwartz2006_isAbs</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       schwartz2006_isAbs</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                               <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>             </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                     FALSE             </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o            TRUE              </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo            FALSE             </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-             FALSE             </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------            TRUE              </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------            TRUE              </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o            FALSE             </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------             TRUE              </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o TRUE              </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-            TRUE</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="soyka_retention_2008">
<span class="citation">Soyka et al. (2008)</span><a class="anchor" aria-label="anchor" href="#soyka_retention_2008"></a>
</h3>
<p><strong>Definition</strong>: Monthly rates of positive UOS; missing is ignored</p>
<p>The paper is <a href="https://pubmed.ncbi.nlm.nih.gov/18205978/" class="external-link">here</a>.</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># Ignore missing UDS</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        udsPattern <span class="op">=</span> <span class="fu"><a href="../reference/recode_missing_visits.html">recode_missing_visits</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            missing_becomes <span class="op">=</span> <span class="st">""</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="co"># Count "+" UDS; 0 could be complete dropout or all negative</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        soyka2008_use <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">udsPattern</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"+"</span>,</span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>,</span>
<span>            mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span>soyka2008_abs <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">soyka2008_use</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">soyka2008_abs</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">soyka2008_abs</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       soyka2008_abs</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                            1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                   1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                   1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                    0.239 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                   0.95  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                   0.542 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                   0.022<span style="text-decoration: underline;">7</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                    1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o        0.769 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                   0.783</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="strain_dose-response_1993">
<span class="citation">Strain et al. (1993)</span><a class="anchor" aria-label="anchor" href="#strain_dose-response_1993"></a>
</h3>
<p><strong>Definition</strong>: Rate of positive UOS through the end of the stable dosing period; missing is not defined</p>
<p>Paper <a href="https://doi.org/10.7326/0003-4819-119-1-199307010-00004" class="external-link">here</a></p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># Count "+" UDS; 0 could be complete dropout or all negative</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        strain1993_use <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"+"</span>,</span>
<span>            <span class="co"># The stable dosing period began in week 6</span></span>
<span>            start <span class="op">=</span> <span class="fl">6</span>, end <span class="op">=</span> <span class="fl">15</span>,</span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span>strain1993_abs <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">strain1993_use</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">strain1993_abs</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">strain1993_abs</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       strain1993_abs</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                                  1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                         1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                         1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                         -<span style="color: #BB0000;">8</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                         0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                        -<span style="color: #BB0000;">6</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                        -<span style="color: #BB0000;">8</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                          1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o             -<span style="color: #BB0000;">1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                         0</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="strain_comparison_1994">
<span class="citation">Strain et al. (1994)</span><a class="anchor" aria-label="anchor" href="#strain_comparison_1994"></a>
</h3>
<p><strong>Definition</strong>: Overall rate of positive UOS; missing is ignored</p>
<p>Paper <a href="https://doi.org/10.1176/ajp.151.7.1025" class="external-link">here</a></p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="co"># Ignore missing</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        udsPattern <span class="op">=</span> <span class="fu"><a href="../reference/recode_missing_visits.html">recode_missing_visits</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            missing_becomes <span class="op">=</span> <span class="st">""</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># Count "+" UDS; 0 could be complete dropout or all negative</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        strain1994_use <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"+"</span>,</span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span>strain1994_abs <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">strain1994_use</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">strain1994_abs</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">strain1994_abs</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       strain1994_abs</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                              1    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                     1    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                     1    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                      0.239</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                     0.958</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                     0.542</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                     0.104</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                      1    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o          0.829</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                     0.792</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="strain_buprenorphine_1996">
<span class="citation">Strain et al. (1996)</span><a class="anchor" aria-label="anchor" href="#strain_buprenorphine_1996"></a>
</h3>
<p><strong>Definition</strong>: Percentage of positive UOS – Overall AND summarized in consecutive 2-week blocks; missing is ignored</p>
<p>Because the “two-weeks blocks” definition results in more than one value per participant, we do not provide it in our library. This definition is now identical to that of Strain, Stitzer, Liebson, &amp; Bigelow (1994).</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="co"># Ignore missing</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        udsPattern <span class="op">=</span> <span class="fu"><a href="../reference/recode_missing_visits.html">recode_missing_visits</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            missing_becomes <span class="op">=</span> <span class="st">""</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="co"># Count "+" UDS; 0 could be complete dropout or all negative</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        strain1996_use <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">udsPattern</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"+"</span>,</span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span>strain1996_abs <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">strain1996_use</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">strain1996_abs</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">strain1996_abs</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       strain1996_abs</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                             1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                    1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                    1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                     0.239 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                    0.95  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                    0.542 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                    0.022<span style="text-decoration: underline;">7</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                     1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o         0.769 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                    0.783</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="strain_moderate-_1999">
<span class="citation">Strain et al. (1999)</span><a class="anchor" aria-label="anchor" href="#strain_moderate-_1999"></a>
</h3>
<p><strong>Definition</strong>: Percentage of positive UOS</p>
<p><a href="https://doi.org/10.1001/jama.281.11.1000" class="external-link">This paper</a> gave no commentary on <em>how</em> the missing values would be processed, only that the statistical software SAS was capable of handling missing values. SAS, by default, <a href="https://documentation.sas.com/doc/en/pgmsascdc/9.4_3.5/proc/n026epq8bpz1f9n10oeb7zen7s1e.htm" class="external-link">excludes missing values</a> from analyses. Therefore, this definition will also be identical to that of Strain, Stitzer, Liebson, &amp; Bigelow (1994).</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="co"># Ignore missing</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        udsPattern <span class="op">=</span> <span class="fu"><a href="../reference/recode_missing_visits.html">recode_missing_visits</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            missing_becomes <span class="op">=</span> <span class="st">""</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># Count "+" UDS; 0 could be complete dropout or all negative</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        strain1999_use <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"+"</span>,</span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span>strain1999_abs <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">strain1999_use</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">strain1999_abs</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">strain1999_abs</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       strain1999_abs</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                              1    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                     1    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                     1    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                      0.239</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                     0.958</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                     0.542</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                     0.104</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                      1    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o          0.829</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                     0.792</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="strang_supervised_2010">
<span class="citation">Strang et al. (2010)</span><a class="anchor" aria-label="anchor" href="#strang_supervised_2010"></a>
</h3>
<p><strong>Definitions</strong>: ≥50% negative UOS during weeks 14-26</p>
<p>Our protocols do not uniformly contain 26 weeks of data, so we apply this definition as “the last 12 weeks of the protocol.”</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>        cleanProp <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>            <span class="co"># Mixed results weeks count as half of a negative week</span></span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>, mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            <span class="co"># Syntax to select the LAST visits uses a negative sign; this means "12</span></span>
<span>            <span class="co">#   weeks before the end of the data" to "the last week of the data"</span></span>
<span>            start <span class="op">=</span> <span class="op">-</span><span class="fl">12</span>, end <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span>strang2010_hasRed <span class="op">=</span> <span class="va">cleanProp</span> <span class="op">&gt;=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">strang2010_hasRed</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">strang2010_hasRed</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       strang2010_hasRed</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                               <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>            </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                     FALSE            </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o            TRUE             </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo            FALSE            </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-             FALSE            </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------            TRUE             </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------            TRUE             </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o            FALSE            </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------             TRUE             </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o FALSE            </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-            TRUE</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="strang_extended-release_2019">
<span class="citation">Strang et al. (2019)</span><a class="anchor" aria-label="anchor" href="#strang_extended-release_2019"></a>
</h3>
<p><strong>Definition</strong>: Proportion of negative UOS at the end of the 12‐week post-randomization time point</p>
<p>Paper <a href="https://pubmed.ncbi.nlm.nih.gov/30702059/" class="external-link">here</a></p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>        strang2019_red <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>            <span class="co"># Mixed results weeks count as half of a negative week</span></span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>, mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            <span class="co"># Only look at the first 12 weeks after randomization</span></span>
<span>            start <span class="op">=</span> <span class="fl">1</span>, end <span class="op">=</span> <span class="fl">12</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">strang2019_red</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">strang2019_red</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       strang2019_red</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                             0     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                    1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                    1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                     0.292 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                    0.75  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                    0.167 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                    0.041<span style="text-decoration: underline;">7</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                     1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o         0.5   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                    0.583</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="tanum_effectiveness_2017">
<span class="citation">Tanum et al. (2017)</span><a class="anchor" aria-label="anchor" href="#tanum_effectiveness_2017"></a>
</h3>
<p><strong>Definition</strong>: Rate of negative UOS: Number of negative UOS divided by the total number of attended tests (group proportion)</p>
<p>Note that this definition as written is a group outcome, not a participant outcome. Therefore, we calculate this for each subject as the “rate of negative UOS for the time that the patient remained in the study.”</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># How long was each subject retained?</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>lastWeek_idx <span class="op">=</span> <span class="fu"><a href="../reference/measure_retention.html">measure_retention</a></span><span class="op">(</span>use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        tanum2017_red <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>            <span class="co"># Mixed results weeks count as half of a negative week</span></span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>, mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            start <span class="op">=</span> <span class="fl">1</span>, end <span class="op">=</span> <span class="va">lastWeek_idx</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">tanum2017_red</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">tanum2017_red</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       tanum2017_red</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                            0     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                   0.913 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                   0.929 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                    0.239 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                   0.792 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                   0.542 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                   0.021<span style="text-decoration: underline;">7</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                    1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o        0.588 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                   0.75</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="wolstein_randomized_2009">
<span class="citation">Wolstein et al. (2009)</span><a class="anchor" aria-label="anchor" href="#wolstein_randomized_2009"></a>
</h3>
<p><strong>Definition</strong>: Number of negative UOS per number of weeks of study participation</p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># Because we are measuring outcomes only while "participating", remove missing</span></span>
<span>    <span class="co">#   weeks from the use pattern</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        usePatternPresent <span class="op">=</span> <span class="fu"><a href="../reference/recode_missing_visits.html">recode_missing_visits</a></span><span class="op">(</span></span>
<span>            <span class="va">usePatternUDS</span>,</span>
<span>            missing_becomes <span class="op">=</span> <span class="st">""</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span>   </span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        wolstein2009_red <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternPresent</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>            <span class="co"># Mixed results weeks count as half of a negative week</span></span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>, mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">wolstein2009_red</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">wolstein2009_red</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       wolstein2009_red</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                               0     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                      1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                      1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                       0.239 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                      0.95  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                      0.542 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                      0.022<span style="text-decoration: underline;">7</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                       1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o           0.769 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                      0.783</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="woody_extended_2008">
<span class="citation">Woody et al. (2008)</span><a class="anchor" aria-label="anchor" href="#woody_extended_2008"></a>
</h3>
<p><strong>Definition</strong>: Percentage of positive UOS at weeks 4, 8, and 12</p>
<p><a href="https://doi.org/10.1001/jama.2008.574" class="external-link">This paper</a> contains rather exotic methods for missing value imputation, but the authors remark that setting “missing is positive” did not change their final results. We may include their imputation method in future versions of this code library.</p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">###  Define a Visit Pattern (Lattice)  ###</span></span>
<span><span class="va">woodyLattice_char</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/collapse_lattice.html">collapse_lattice</a></span><span class="op">(</span>lattice_patterns <span class="op">=</span> <span class="st">"___o"</span>, times <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">woodyLattice_char</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "___o___o___o"</span></span></code></pre>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">###  Calculate the Endpoint  ###</span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># Only observe scheduled UDS</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>        udsLattice <span class="op">=</span> <span class="fu"><a href="../reference/view_by_lattice.html">view_by_lattice</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            lattice_pattern <span class="op">=</span> <span class="va">woodyLattice_char</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="co"># Remove the non-protocol weeks</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        udsLattice2 <span class="op">=</span> <span class="fu"><a href="../reference/recode_missing_visits.html">recode_missing_visits</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">udsLattice</span>,</span>
<span>            missing_is <span class="op">=</span> <span class="st">"_"</span>,</span>
<span>            missing_becomes <span class="op">=</span> <span class="st">""</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="co"># Mark missing UDS as "+"</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        udsLattice3 <span class="op">=</span> <span class="fu"><a href="../reference/recode_missing_visits.html">recode_missing_visits</a></span><span class="op">(</span>use_pattern <span class="op">=</span> <span class="va">udsLattice2</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="co"># Count "+" UDS; 0 could be complete dropout or all negative</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        woody2008_use <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">udsLattice3</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"+"</span>,</span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span>,</span>
<span>            proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span>woody2008_abs <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">woody2008_use</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">woody2008_abs</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">woody2008_abs</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       woody2008_abs</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                             0    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                    1    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                    1    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                     0.333</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                    1    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                    0    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                    0    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                     1    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o         1    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                    0.333</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="zaks_levomethadyl_1972">
<span class="citation">Zaks, Fink, and Freedman (1972)</span><a class="anchor" aria-label="anchor" href="#zaks_levomethadyl_1972"></a>
</h3>
<p><strong>Definition</strong>: Number of positive UOS; missing is ignored</p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomesRed_df</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># Ignore missing</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        udsPattern <span class="op">=</span> <span class="fu"><a href="../reference/recode_missing_visits.html">recode_missing_visits</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">usePatternUDS</span>,</span>
<span>            missing_becomes <span class="op">=</span> <span class="st">""</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="co"># Count "+" UDS; 0 could be complete dropout or all negative</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        zaks1972_use <span class="op">=</span> <span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>            use_pattern <span class="op">=</span> <span class="va">udsPattern</span>,</span>
<span>            match_is <span class="op">=</span> <span class="st">"+"</span>,</span>
<span>            mixed_results_are <span class="op">=</span> <span class="st">"*"</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># For each participant, the "abstinent" metric is the number of total weeks</span></span>
<span>  <span class="co">#   of study participation - the number of positive weeks</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>zaks1972_abs <span class="op">=</span> <span class="fu">str_length</span><span class="op">(</span><span class="va">udsPattern</span><span class="op">)</span> <span class="op">-</span> <span class="va">zaks1972_use</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">zaks1972_abs</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">outcomesRed_df</span>, <span class="va">.</span>, by <span class="op">=</span> <span class="st">"who"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomesRed_df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">who</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">examplePeople_int</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">who</span>, <span class="va">usePatternUDS</span>, <span class="va">zaks1972_abs</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">##      who usePatternUDS                       zaks1972_abs</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ooooooooooooooo                              0  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4 -------------------o-o-o                    21  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>    13 ------------o-oooooooooo                    13  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    17 --++*++++++-++++++-+++-                      5.5</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   163 -o---o---o--o+----------                    19  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   210 -++++++++-+++-----------                    13  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   233 *+++++++++++o++++++++++o                     0.5</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   242 -----------------------                     23  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>103 ++--oo--o-+-+--o----------o-o-oo++o         20  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>089 ++++---+--------------o-                    18</span></span></code></pre>
<hr>
<p></p>
</div>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-comer_injectable_2006" class="csl-entry">
Comer, Sandra D., Maria A. Sullivan, Elmer Yu, Jami L. Rothenberg, Herbert D. Kleber, Kyle Kampman, Charles Dackis, and Charles P. O’Brien. 2006. <span>“Injectable, <span>Sustained</span>-<span>Release</span> <span>Naltrexone</span> for the <span>Treatment</span> of <span>Opioid</span> <span>Dependence</span>: <span>A</span> <span>Randomized</span>, <span>Placebo</span>-<span>Controlled</span> <span>Trial</span>.”</span> <em>Archives of General Psychiatry</em> 63 (2): 210–18. <a href="https://doi.org/10.1001/archpsyc.63.2.210" class="external-link">https://doi.org/10.1001/archpsyc.63.2.210</a>.
</div>
<div id="ref-eissenberg_dose-related_1997" class="csl-entry">
Eissenberg, Thomas, George E. Bigelow, Eric C. Strain, Sharon L. Walsh, Robert K. Brooner, Maxine L. Stitzer, and Rolley E. Johnson. 1997. <span>“Dose-<span>Related</span> <span>Efficacy</span> of <span>Levomethadyl</span> <span>Acetate</span> for <span>Treatment</span> of <span>Opioid</span> <span>Dependence</span>: <span>A</span> <span>Randomized</span> <span>Clinical</span> <span>Trial</span>.”</span> <em>Journal of the American Medical Association</em> 277 (24): 1945–51. <a href="https://doi.org/10.1001/jama.1997.03540480045037" class="external-link">https://doi.org/10.1001/jama.1997.03540480045037</a>.
</div>
<div id="ref-fiellin_counseling_2006" class="csl-entry">
Fiellin, David A., Michael V. Pantalon, Marek C. Chawarski, Brent A. Moore, Lynn E. Sullivan, Patrick G. O’Connor, and Richard S. Schottenfeld. 2006. <span>“Counseling Plus <span>Buprenorphine</span>–<span>Naloxone</span> <span>Maintenance</span> <span>Therapy</span> for <span>Opioid</span> <span>Dependence</span>.”</span> <em>New England Journal of Medicine</em> 355 (4): 365–74. <a href="https://doi.org/10.1056/NEJMoa055255" class="external-link">https://doi.org/10.1056/NEJMoa055255</a>.
</div>
<div id="ref-fudala_office-based_2003" class="csl-entry">
Fudala, Paul J., T. Peter Bridge, Susan Herbert, William O. Williford, C. Nora Chiang, Karen Jones, Joseph Collins, et al. 2003. <span>“Office-<span>Based</span> <span>Treatment</span> of <span>Opiate</span> <span>Addiction</span> with a <span>Sublingual</span>-<span>Tablet</span> <span>Formulation</span> of <span>Buprenorphine</span> and <span>Naloxone</span>.”</span> <em>New England Journal of Medicine</em> 349 (10): 949–58. <a href="https://doi.org/10.1056/NEJMoa022164" class="external-link">https://doi.org/10.1056/NEJMoa022164</a>.
</div>
<div id="ref-haight_efficacy_2019" class="csl-entry">
Haight, Barbara R, Susan M Learned, Celine M Laffont, Paul J Fudala, Yue Zhao, Amanda S Garofalo, Mark K Greenwald, et al. 2019. <span>“Efficacy and Safety of a Monthly Buprenorphine Depot Injection for Opioid Use Disorder: A Multicentre, Randomised, Double-Blind, Placebo-Controlled, Phase 3 Trial.”</span> <em>The Lancet</em> 393 (10173): 778–90. <a href="https://doi.org/10.1016/S0140-6736(18)32259-1" class="external-link">https://doi.org/10.1016/S0140-6736(18)32259-1</a>.
</div>
<div id="ref-jaffe_methadyl_1972" class="csl-entry">
Jaffe, Jerome H., Edward C. Senay, Charles R. Schuster, Pierre R. Renault, Beth Smith, and Salvatore DiMenza. 1972. <span>“Methadyl <span>Acetate</span> Vs <span>Methadone</span>: <span>A</span> <span>Double</span>-<span>Blind</span> <span>Study</span> in <span>Heroin</span> <span>Users</span>.”</span> <em>Journal of the American Medical Association</em> 222 (4): 437–42. <a href="https://doi.org/10.1001/jama.1972.03210040013004" class="external-link">https://doi.org/10.1001/jama.1972.03210040013004</a>.
</div>
<div id="ref-johnson_controlled_1992" class="csl-entry">
Johnson, Rolley E., Jerome H. Jaffe, and Paul J. Fudala. 1992. <span>“A <span>Controlled</span> <span>Trial</span> of <span>Buprenorphine</span> <span>Treatment</span> for <span>Opioid</span> <span>Dependence</span>.”</span> <em>Journal of the American Medical Association</em> 267 (20): 2750–55. <a href="https://doi.org/10.1001/jama.1992.03480200058024" class="external-link">https://doi.org/10.1001/jama.1992.03480200058024</a>.
</div>
<div id="ref-kosten_buprenorphine_1993" class="csl-entry">
Kosten, Thomas R., Richard Schottenfeld, Douglas Ziedonis, and Jean Falcioni. 1993. <span>“Buprenorphine Versus <span>Methadone</span> <span>Maintenance</span> for <span>Opioid</span> <span>Dependence</span>.”</span> <em>The Journal of Nervous and Mental Disease</em> 181 (6): 358–64. <a href="https://journals.lww.com/jonmd/Abstract/1993/06000/Buprenorphine_versus_Methadone_Maintenance_for.4.aspx" class="external-link">https://journals.lww.com/jonmd/Abstract/1993/06000/Buprenorphine_versus_Methadone_Maintenance_for.4.aspx</a>.
</div>
<div id="ref-ling_buprenorphine_2010" class="csl-entry">
Ling, Walter, Paul Casadonte, George Bigelow, Kyle M. Kampman, Ashwin Patkar, Genie L. Bailey, Richard N. Rosenthal, and Katherine L. Beebe. 2010. <span>“Buprenorphine <span>Implants</span> for <span>Treatment</span> of <span>Opioid</span> <span>Dependence</span>: <span>A</span> <span>Randomized</span> <span>Controlled</span> <span>Trial</span>.”</span> <em>Journal of the American Medical Association</em> 304 (14): 1576–83. <a href="https://doi.org/10.1001/jama.2010.1427" class="external-link">https://doi.org/10.1001/jama.2010.1427</a>.
</div>
<div id="ref-ling_buprenorphine_1998" class="csl-entry">
Ling, Walter, Charles Charuvastra, Joseph F. Collins, Steve Batki, Lawrence S. Brown Jr, Prudencia Kintaudi, Donald R. Wesson, et al. 1998. <span>“Buprenorphine Maintenance Treatment of Opiate Dependence: A Multicenter, Randomized Clinical Trial.”</span> <em>Addiction</em> 93 (4): 475–86. <a href="https://doi.org/10.1046/j.1360-0443.1998.9344753.x" class="external-link">https://doi.org/10.1046/j.1360-0443.1998.9344753.x</a>.
</div>
<div id="ref-ling_methadyl_1976" class="csl-entry">
Ling, Walter, V. Charles Charuvastra, Samuel C. Kaim, and C. James Klett. 1976. <span>“Methadyl <span>Acetate</span> and <span>Methadone</span> as <span>Maintenance</span> <span>Treatments</span> for <span>Heroin</span> <span>Addicts</span>: <span>A</span> <span>Veterans</span> <span>Administration</span> <span>Cooperative</span> <span>Study</span>.”</span> <em>Archives of General Psychiatry</em> 33 (6): 709–20. <a href="https://doi.org/10.1001/archpsyc.1976.01770060043007" class="external-link">https://doi.org/10.1001/archpsyc.1976.01770060043007</a>.
</div>
<div id="ref-lofwall_weekly_2018" class="csl-entry">
Lofwall, Michelle R., Sharon L. Walsh, Edward V. Nunes, Genie L. Bailey, Stacey C. Sigmon, Kyle M. Kampman, Michael Frost, et al. 2018. <span>“Weekly and <span>Monthly</span> <span>Subcutaneous</span> <span>Buprenorphine</span> <span>Depot</span> <span>Formulations</span> Vs <span>Daily</span> <span>Sublingual</span> <span>Buprenorphine</span> <span>With</span> <span>Naloxone</span> for <span>Treatment</span> of <span>Opioid</span> <span>Use</span> <span>Disorder</span>: <span>A</span> <span>Randomized</span> <span>Clinical</span> <span>Trial</span>.”</span> <em>Journal of the American Medical Association: Internal Medicine</em> 178 (6): 764–73. <a href="https://doi.org/10.1001/jamainternmed.2018.1052" class="external-link">https://doi.org/10.1001/jamainternmed.2018.1052</a>.
</div>
<div id="ref-mattick_buprenorphine_2003" class="csl-entry">
Mattick, Richard P., Robert Ali, Jason M. White, Susannah O’Brien, Seija Wolk, and Cath Danz. 2003. <span>“Buprenorphine Versus Methadone Maintenance Therapy: A Randomized Double-Blind Trial with 405 Opioid-Dependent Patients.”</span> <em>Addiction</em> 98 (4): 441–52. <a href="https://doi.org/10.1046/j.1360-0443.2003.00335.x" class="external-link">https://doi.org/10.1046/j.1360-0443.2003.00335.x</a>.
</div>
<div id="ref-pani_buprenorphine_2000" class="csl-entry">
Pani, Pier Paolo, Icro Maremmani, Roberto Pirastu, Alessandro Tagliamonte, and Gian Luigi Gessa. 2000. <span>“Buprenorphine: A Controlled Clinical Trial in the Treatment of Opioid Dependence.”</span> <em>Drug and Alcohol Dependence</em> 60 (1): 39–50. <a href="https://doi.org/10.1016/S0376-8716(00)80006-X" class="external-link">https://doi.org/10.1016/S0376-8716(00)80006-X</a>.
</div>
<div id="ref-petitjean_double-blind_2001" class="csl-entry">
Petitjean, Sylvie, Rudolf Stohler, Jean-Jacques Déglon, Santino Livoti, Doris Waldvogel, Claude Uehlinger, and Dieter Ladewig. 2001. <span>“Double-Blind Randomized Trial of Buprenorphine and Methadone in Opiate Dependence.”</span> <em>Drug and Alcohol Dependence</em> 62 (1): 97–104. <a href="https://doi.org/10.1016/S0376-8716(00)00163-0" class="external-link">https://doi.org/10.1016/S0376-8716(00)00163-0</a>.
</div>
<div id="ref-preston_methadone_2000" class="csl-entry">
Preston, Kenzie L., Annie Umbricht, and David H. Epstein. 2000. <span>“Methadone <span>Dose</span> <span>Increase</span> and <span>Abstinence</span> <span>Reinforcement</span> for <span>Treatment</span> of <span>Continued</span> <span>Heroin</span> <span>Use</span> <span>During</span> <span>Methadone</span> <span>Maintenance</span>.”</span> <em>Archives of General Psychiatry</em> 57 (4): 395–404. <a href="https://doi.org/10.1001/archpsyc.57.4.395" class="external-link">https://doi.org/10.1001/archpsyc.57.4.395</a>.
</div>
<div id="ref-schottenfeld_methadone_2005" class="csl-entry">
Schottenfeld, Richard S., Marek C. Chawarski, Juliana R. Pakes, Michael V. Pantalon, Kathleen M. Carroll, and Thomas R. Kosten. 2005. <span>“Methadone <span>Versus</span> <span>Buprenorphine</span> <span>With</span> <span>Contingency</span> <span>Management</span> or <span>Performance</span> <span>Feedback</span> for <span>Cocaine</span> and <span>Opioid</span> <span>Dependence</span>.”</span> <em>American Journal of Psychiatry</em> 162 (2): 340–49. <a href="https://doi.org/10.1176/appi.ajp.162.2.340" class="external-link">https://doi.org/10.1176/appi.ajp.162.2.340</a>.
</div>
<div id="ref-schwartz_randomized_2006" class="csl-entry">
Schwartz, Robert P., David A. Highfield, Jerome H. Jaffe, Joseph V. Brady, Carol B. Butler, Charles O. Rouse, Jason M. Callaman, Kevin E. O’Grady, Peter J. Koudstaal, and Monique M. B. Breteler. 2006. <span>“A <span>Randomized</span> <span>Controlled</span> <span>Trial</span> of <span>Interim</span> <span>Methadone</span> <span>Maintenance</span>.”</span> <em>Archives of General Psychiatry</em> 63 (1). <a href="https://doi.org/10.1001/archpsyc.63.1.102" class="external-link">https://doi.org/10.1001/archpsyc.63.1.102</a>.
</div>
<div id="ref-shufman_efficacy_1994" class="csl-entry">
Shufman, Emi N., Shai Porat, Eliezer Witztum, Dan Gandacu, Rachel Bar-Hamburger, and Yigal Ginath. 1994. <span>“The Efficacy of Naltrexone in Preventing Reabuse of Heroin After Detoxification.”</span> <em>Biological Psychiatry</em> 35 (12): 935–45. <a href="https://doi.org/10.1016/0006-3223(94)91240-8" class="external-link">https://doi.org/10.1016/0006-3223(94)91240-8</a>.
</div>
<div id="ref-soyka_retention_2008" class="csl-entry">
Soyka, Michael, Christina Zingg, Gabriele Koller, and Heinrich Kuefner. 2008. <span>“Retention Rate and Substance Use in Methadone and Buprenorphine Maintenance Therapy and Predictors of Outcome: Results from a Randomized Study.”</span> <em>International Journal of Neuropsychopharmacology</em> 11 (5): 641–53. <a href="https://doi.org/10.1017/S146114570700836X" class="external-link">https://doi.org/10.1017/S146114570700836X</a>.
</div>
<div id="ref-strain_moderate-_1999" class="csl-entry">
Strain, Eric C., George E. Bigelow, Ira A. Liebson, and Maxine L. Stitzer. 1999. <span>“Moderate- Vs <span>High</span>-<span>Dose</span> <span>Methadone</span> in the <span>Treatment</span> of <span>Opioid</span> <span>DependenceA</span> <span>Randomized</span> <span>Trial</span>.”</span> <em>Journal of the American Medical Association</em> 281 (11): 1000–1005. <a href="https://doi.org/10.1001/jama.281.11.1000" class="external-link">https://doi.org/10.1001/jama.281.11.1000</a>.
</div>
<div id="ref-strain_dose-response_1993" class="csl-entry">
Strain, Eric C., Maxine L. Stitzer, Ira A. Liebson, and George E. Bigelow. 1993. <span>“Dose-<span>Response</span> <span>Effects</span> of <span>Methadone</span> in the <span>Treatment</span> of <span>Opioid</span> <span>Dependence</span>.”</span> <em>Annals of Internal Medicine</em> 119 (1): 23–27. <a href="https://doi.org/10.7326/0003-4819-119-1-199307010-00004" class="external-link">https://doi.org/10.7326/0003-4819-119-1-199307010-00004</a>.
</div>
<div id="ref-strain_comparison_1994" class="csl-entry">
———. 1994. <span>“Comparison of Buprenorphine and Methadone in the Treatment of Opioid Dependence.”</span> <em>The American Journal of Psychiatry</em> 151 (July): 1025–30. <a href="https://doi.org/10.1176/ajp.151.7.1025" class="external-link">https://doi.org/10.1176/ajp.151.7.1025</a>.
</div>
<div id="ref-strain_buprenorphine_1996" class="csl-entry">
———. 1996. <span>“Buprenorphine <span>Versus</span> <span>Methadone</span> in the <span>Treatment</span> of <span>Opioid</span> <span>Dependence</span>: <span>Self</span>-<span>Reports</span>, <span>Urinalysis</span>, and <span>Addiction</span> <span>Severity</span> <span>Index</span>.”</span> <em>Journal of Clinical Psychopharmacology</em> 16 (1): 58–67. <a href="https://journals.lww.com/psychopharmacology/Abstract/1996/02000/Buprenorphine_Versus_Methadone_in_the_Treatment_of.10.aspx" class="external-link">https://journals.lww.com/psychopharmacology/Abstract/1996/02000/Buprenorphine_Versus_Methadone_in_the_Treatment_of.10.aspx</a>.
</div>
<div id="ref-strang_extended-release_2019" class="csl-entry">
Strang, John, Michael Kelleher, Soraya Mayet, Ed Day, Jennifer Hellier, Sarah Byford, Caroline Murphy, et al. 2019. <span>“Extended-Release Naltrexone Versus Standard Oral Naltrexone Versus Placebo for Opioid Use Disorder: The <span>NEAT</span> Three-Arm <span>RCT</span>.”</span> <em>Health Technology Assessment</em> 23 (3): 1–72. <a href="https://doi.org/10.3310/hta23030" class="external-link">https://doi.org/10.3310/hta23030</a>.
</div>
<div id="ref-strang_supervised_2010" class="csl-entry">
Strang, John, Nicola Metrebian, Nicholas Lintzeris, Laura Potts, Tom Carnwath, Soraya Mayet, Hugh Williams, et al. 2010. <span>“Supervised Injectable Heroin or Injectable Methadone Versus Optimised Oral Methadone as Treatment for Chronic Heroin Addicts in <span>England</span> After Persistent Failure in Orthodox Treatment (<span>RIOTT</span>): A Randomised Trial.”</span> <em>The Lancet</em> 375 (9729): 1885–95. <a href="https://doi.org/10.1016/S0140-6736(10)60349-2" class="external-link">https://doi.org/10.1016/S0140-6736(10)60349-2</a>.
</div>
<div id="ref-tanum_effectiveness_2017" class="csl-entry">
Tanum, Lars, Kristin Klemmetsby Solli, Zill-e-Huma Latif, Jūratė Šaltytė Benth, Arild Opheim, Kamni Sharma-Haase, Peter Krajci, and Nikolaj Kunøe. 2017. <span>“Effectiveness of <span>Injectable</span> <span>Extended</span>-<span>Release</span> <span>Naltrexone</span> Vs <span>Daily</span> <span>Buprenorphine</span>-<span>Naloxone</span> for <span>Opioid</span> <span>Dependence</span>: <span>A</span> <span>Randomized</span> <span>Clinical</span> <span>Noninferiority</span> <span>Trial</span>.”</span> <em>Journal of the American Medical Association: Psychiatry</em> 74 (12): 1197–1205. <a href="https://doi.org/10.1001/jamapsychiatry.2017.3206" class="external-link">https://doi.org/10.1001/jamapsychiatry.2017.3206</a>.
</div>
<div id="ref-wolstein_randomized_2009" class="csl-entry">
Wolstein, J., M. Gastpar, T. Finkbeiner, C. Heinrich, R. Heitkamp, T. Poehlke, and N. Scherbaum. 2009. <span>“A <span>Randomized</span>, <span>Open</span>-Label <span>Trial</span> <span>Comparing</span> <span>Methadone</span> and <span>Levo</span>-<span>Alpha</span>-<span>Acetylmethadol</span> (<span>LAAM</span>) in <span>Maintenance</span> <span>Treatment</span> of <span>Opioid</span> <span>Addiction</span>.”</span> <em>Pharmacopsychiatry</em> 42 (01): 1–8. <a href="https://doi.org/10.1055/s-0028-1083818" class="external-link">https://doi.org/10.1055/s-0028-1083818</a>.
</div>
<div id="ref-woody_extended_2008" class="csl-entry">
Woody, George E., Sabrina A. Poole, Geetha Subramaniam, Karen Dugosh, Michael Bogenschutz, Patrick Abbott, Ashwin Patkar, et al. 2008. <span>“Extended Vs <span>Short</span>-Term <span>Buprenorphine</span>-<span>Naloxone</span> for <span>Treatment</span> of <span>Opioid</span>-<span>Addicted</span> <span>Youth</span>: <span>A</span> <span>Randomized</span> <span>Trial</span>.”</span> <em>Journal of the American Medical Association</em> 300 (17). <a href="https://doi.org/10.1001/jama.2008.574" class="external-link">https://doi.org/10.1001/jama.2008.574</a>.
</div>
<div id="ref-zaks_levomethadyl_1972" class="csl-entry">
Zaks, Arthur, Max Fink, and Alfred M. Freedman. 1972. <span>“Levomethadyl in <span>Maintenance</span> <span>Treatment</span> of <span>Opiate</span> <span>Dependence</span>.”</span> <em>Journal of the American Medical Association</em> 220 (6): 811–13. <a href="https://doi.org/10.1001/jama.1972.03200060039005" class="external-link">https://doi.org/10.1001/jama.1972.03200060039005</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Gabriel Odom, Laura Brandt, Raymond Balise.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
