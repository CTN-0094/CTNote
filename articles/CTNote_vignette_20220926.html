<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="CTNote">
<title>An n-Ary Word Sufficient Statistic for Repeated Univariate Categorical Values: Applications to Standardized Urine Drug Screen Data • CTNote</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="An n-Ary Word Sufficient Statistic for Repeated Univariate Categorical Values: Applications to Standardized Urine Drug Screen Data">
<meta property="og:description" content="CTNote">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">CTNote</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9015</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/CTNote_vignette_20220926.html">An n-Ary Word Sufficient Statistic for Repeated Univariate Categorical Values: Applications to Standardized Urine Drug Screen Data</a>
    <a class="dropdown-item" href="../articles/clustering_treatment_outcomes_20220910.html">Empirically Contrasting Substance Use Disorder Treatment Outcome Definitions</a>
    <a class="dropdown-item" href="../articles/library_abstinence_20220711.html">CTNote Library: Abstinence Outcomes</a>
    <a class="dropdown-item" href="../articles/library_reduction_20220630.html">CTNote Library: Reduction Outcomes</a>
    <a class="dropdown-item" href="../articles/library_relapse_20220711.html">CTNote Library: Relapse Outcomes</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>An n-Ary Word Sufficient Statistic for Repeated Univariate Categorical Values: Applications to Standardized Urine Drug Screen Data</h1>
                        <h4 data-toc-skip class="author">Gabriel Odom, Laura Brandt, Ray Balise, Clinton Castro, and the CTN-0094 Team</h4>
            
            <h4 data-toc-skip class="date">2022-09-27</h4>
      
      
      <div class="d-none name"><code>CTNote_vignette_20220926.Rmd</code></div>
    </div>

    
    
<!-- output: rmarkdown::word_document -->
<!-- output: -->
<!--   rmarkdown::html_vignette: -->
<!--     toc: true -->
<!--     toc_depth: 2 -->
<!--     fig_width: 8 -->
<!--     fig_height: 8 -->
<div class="section level4">
<h4 id="abstract">Abstract<a class="anchor" aria-label="anchor" href="#abstract"></a>
</h4>
</div>
<div class="section level2">
<h2 id="introduction-and-motivation">Introduction and Motivation<a class="anchor" aria-label="anchor" href="#introduction-and-motivation"></a>
</h2>
<div class="section level3">
<h3 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h3>
<p>Over 750,000 Americans have died from a drug overdose since 1990.<span class="citation">[1]</span> The onset of the COVID-19 pandemic correlated to millions of Americans reporting increases in their substance use “a little more or much more”,<span class="citation">[2]</span> and over 40 million Americans needed treatment for a substance use disorder (SUD) in 2020.<span class="citation">[3]</span> SUDs are treated with a combination of pharmacological and psychological interventions, known as medication-assisted treatment.<span class="citation">[4]</span> When evaluating the efficacy of these treatments, clinicians design clinical trials in which participants provide frequent urine samples, which are subject to urine drug screenings (UDS). UDS is a point-of-care test that gives a binary, qualitative readout of the presence of substances of misuse.</p>
<p>For a single substance or group of substances, outcomes of these tests are uni-dimensional and categorical. Common UDS categories include “substance positive”, “substance negative”, “improper urine sample temperature”, “missing urine”, and others. Further, because these tests are given sequentially over the course of a clinical trial, the tests are correlated within subject and across study week. Because of these properties, single-value summaries of the UDS pattern (such as the proportion of “substance positive” results, or the maximum number of consecutive “substance negative” results) are not <em>sufficient statistics</em> (they do not contain all of the information about each trial participants’ UDS pattern that was contained in the original UDS data).<span class="citation">[5]</span> Importantly, UDS data form the foundation of all substance use disorder treatment outcome assessment. A standardized data format for this data stream therefore have broad applicability in both clinical trials and other related activities (i.e. quality improvement research). In particular, existing methods to calculate treatment outcome are not standardized, requiring a complex code base that is difficult for reuse for investigators in the same field, and difficult in comparing studies conducted with different designs.</p>
</div>
<div class="section level3">
<h3 id="overview-of-this-paper">Overview of this Paper<a class="anchor" aria-label="anchor" href="#overview-of-this-paper"></a>
</h3>
<p>In this paper, we extend the concept of a binary word to multiple categories and show that this can be used to create a standardized and sufficient representation for UDS datastreams. We show that this construct sufficiently collapses longitudinal records into a single, compact “word”, which preserves the information in the original data. Also, we give a few example algorithms to calculate some common single-value summaries from such a “word”. Finally, we introduce a standard and code-based library of algorithms (contained in the <code>CTNote</code> package <span class="citation">[6]</span> for the R Computing Language <span class="citation">[7]</span>) for treatment outcome definitions useful to evaluate medication-based treatments for SUDs.</p>
<hr>
<p></p>
</div>
</div>
<div class="section level2">
<h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a>
</h2>
<div class="section level3">
<h3 id="words-as-sufficient-statistics-for-longitudinal-categorical-data">“Words” as Sufficient Statistics for Longitudinal Categorical Data<a class="anchor" aria-label="anchor" href="#words-as-sufficient-statistics-for-longitudinal-categorical-data"></a>
</h3>
<p>We aim to create a sequence of letters and symbols that act as a sufficient statistic for a categorical random variable observed in a longitudinal manner. Our motivating example is a compact and sufficient representation of a subject’s weekly UDS results. For laboratory tests which detect a substance of interest in the urine, this statistic is a compact representation of the full pattern of substance use for an individual participant. To be of use, this summary statistic must have the following properties:</p>
<ol style="list-style-type: decimal">
<li>(<em>Machine-Readable</em>) It can be directly parsed by a computer.<span class="citation">[8]</span>
</li>
<li>(<em>Human-Readable/Parsimonious</em>) It can be easily interpreted by a human.</li>
<li>(<em>Sufficient</em>) It represents all of the same information about the sequence of interest that would be present in the full data.<span class="citation">[5]</span>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="binary-and-n-ary-words">Binary and <span class="math inline">\(n\)</span>-ary “Words”<a class="anchor" aria-label="anchor" href="#binary-and-n-ary-words"></a>
</h3>
<p>Binary words are a compact representation of a sequence of logical or binary variables.<span class="citation">[9]</span> For example, let the random variable <span class="math inline">\(x\)</span> indicate whether or not a clinical trial participant visited their clinic in each week over a four-week period, and assume that we observe the pattern: “visit”, “visit”, “no visit”, “visit”. If “1” represents a visit and “0” represents no recorded visit, then we can represent this clinic visit pattern as the binary word “1101”. Similarly, we could represent these two categories symbolically as “V” for visit and “_” for no visit, so our binary word becomes “VV_V”. Notice that for a short sequence like our 4-week example here, the original data itself is both machine readable and human readable. However, parsimony (human readability) begins to suffer as sequences grow longer.</p>
<p>Extensions of this concept have been famously applied to the human genome.<span class="citation">[10]</span> The four nitrogen bases in DNA are abbreviated by their first letter: A for adenine, T for thymine, G for guanine, and C for cytosine. These four letters are collapsed by their position in the genome into a <em>quaternary</em> word (or a <em>quinary</em> word if U is included for uracil). For example, the “word” AAACCATTCACAATCAGACA expresses a sequence of 20 nucleic acid bases without loss of information about the bases (the “word” is <em>sufficient</em>). The “word” AAACCATTCACAATCAGACA is also much easier to understand by a human than the condensed structural formula or a skeletal-structural formula of these 20 compounds (the “word” is <em>human readable</em>). Furthermore, such a quaternary word can be parsed by a computer with ease (the “word” is <em>machine readable</em>).</p>
</div>
<div class="section level3">
<h3 id="quinary-uds-pattern-legend">Quinary UDS Pattern Legend<a class="anchor" aria-label="anchor" href="#quinary-uds-pattern-legend"></a>
</h3>
<p>We now build from the examples above. In order to compactly summarize a participant’s pattern of substance use (for a particular class of substances) over time, we first define the following five-value legend:</p>
<ul>
<li>
<strong>+</strong>: positive for the substance(s) in a specified window of time (a day, week, month, etc.) by urine screen (or participant self report, if such data are of interest)</li>
<li>
<strong>–</strong>: negative for the substance(s)</li>
<li>
<strong>o</strong>: subject failed to provide a urine sample</li>
<li>
<b>*</b>: inconclusive results or mixed results (e.g. subject provided more than one urine sample in the time interval and they did not agree)</li>
<li>
<b>_</b>: no specimens required (weekends, holidays, pre-randomization period, alternating visit days/weeks)</li>
</ul>
<p>We note that the “+” and “-” symbols have been used in clinical shorthand for decades. Obviously this legend can be modified and extended to better reflect the complexities of individual clinical trials, but we believe that the structure (representing visits / short time intervals as single symbols) will still be beneficial as a quick “snapshot” of the patient’s treatment results and adherence to trial protocol, and also as a computable summary of the subject’s behavior during the follow-up period and post-trial analysis phase.</p>
</div>
<div class="section level3">
<h3 id="a-use-pattern-example">A Use Pattern Example<a class="anchor" aria-label="anchor" href="#a-use-pattern-example"></a>
</h3>
We will first observe the recorded opioid use data via urine screen for a subject after randomization.
<table class="table">
<thead><tr>
<th style="text-align:right;">
who
</th>
<th style="text-align:left;">
what
</th>
<th style="text-align:right;">
when
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
2089
</td>
<td style="text-align:left;">
Opioid
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
2089
</td>
<td style="text-align:left;">
Opioid
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:right;">
2089
</td>
<td style="text-align:left;">
Opioid
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:right;">
2089
</td>
<td style="text-align:left;">
Opioid
</td>
<td style="text-align:right;">
21
</td>
</tr>
<tr>
<td style="text-align:right;">
2089
</td>
<td style="text-align:left;">
Opioid
</td>
<td style="text-align:right;">
28
</td>
</tr>
<tr>
<td style="text-align:right;">
2089
</td>
<td style="text-align:left;">
Opioid
</td>
<td style="text-align:right;">
56
</td>
</tr>
</tbody>
</table>
<p>While we observe the study days that this participant used opioids throughout the clinical trial, it’s difficult visualize the patient’s treatment trajectory using the data in this form. On the one hand, after some preliminary data cleaning, this data can be parsed by a computer (<em>machine readability</em>). Additionally, this table represents all of the opioid use for this subject (<em>sufficiency</em>). However, data in this form is <strong>not</strong> easy to directly interpret by a clinician or researcher. Can we immediately derive clinical intuition about this patient? Does the treatment appear to be effective?</p>
<!-- ++++---+--------------o- # I can't get the "--" to not be parsed as an en dash -->
<p>In contrast, observe the opioid use pattern summary for this same participant: <code>++++---+--------------o-</code>. Using the basic pattern definition legend above, we can clearly see that this subject had a challenging first month (<code>++++</code>), improved in the second month (<code>---+</code>), and then remained abstinent from opioids for the remainder of the clinical trial (<code>--------------o-</code>). Participant substance use pattern data in this form <em>is</em> easy to interpret by a clinician. Moreover, this symbolic representation of substance use can be parsed and summarized by a computer. Finally, notice that this pattern represents the entire course of treatment for this subject without loss of any clinically relevant information about their opioid misuse as objectively defined by UDS results.</p>
<p>One last major strength is that using these opioid summary words allows for quick inspection of multiple patients’ treatment trajectories (and clusters) all at once. Instead of checking multiple charts one-by-one to get a rough assessment of of the treatment efficacy, we can quickly see overall study arm patterns at a glance. The table below is an example of what these urine screen “words” would look like after 6 weeks of the study. This gives us a quick visual summary of which participants have responded well to the treatment so far (4, 13, 33, 163, and 242) and which participants have not (17, 210, 233, 1103, and 2089). Such quick clinical insights would be challenging to achieve from the raw data alone.</p>
<pre><code><span><span class="co">##   who usePatternUDS</span></span>
<span><span class="co">##     4        ------</span></span>
<span><span class="co">##    13        ------</span></span>
<span><span class="co">##    17        --++*+</span></span>
<span><span class="co">##    33        +---o-</span></span>
<span><span class="co">##   163        -o---o</span></span>
<span><span class="co">##   210        -+++++</span></span>
<span><span class="co">##   233        *+++++</span></span>
<span><span class="co">##   242        ------</span></span>
<span><span class="co">##  1103        ++--oo</span></span>
<span><span class="co">##  2089        ++++--</span></span></code></pre>
<hr>
<p></p>
</div>
</div>
<div class="section level2">
<h2 id="results">Results<a class="anchor" aria-label="anchor" href="#results"></a>
</h2>
<p>We mentioned above that these use pattern summaries are “machine readable” (that a computer can parse them). The software package <code>CTNote::</code> is one such tool to enable computers to parse these use patterns.<span class="citation">[6]</span> This software package contains the following groups of routines (also known as functions):</p>
<ul>
<li>Handle missing UDS data with <code><a href="../reference/recode_missing_visits.html">recode_missing_visits()</a></code> and <code><a href="../reference/impute_missing_visits.html">impute_missing_visits()</a></code>
</li>
<li>Account for the study observation design or trial visit protocol with <code><a href="../reference/collapse_lattice.html">collapse_lattice()</a></code> and <code><a href="../reference/view_by_lattice.html">view_by_lattice()</a></code>
</li>
<li>Detect a substance use pattern with <code><a href="../reference/detect_subpattern.html">detect_subpattern()</a></code> and <code><a href="../reference/detect_in_window.html">detect_in_window()</a></code>
</li>
<li>Measure the longest periods of consecutive behavior with <code><a href="../reference/measure_retention.html">measure_retention()</a></code> and <code><a href="../reference/measure_abstinence_period.html">measure_abstinence_period()</a></code>
</li>
<li>Count the substance use events with <code><a href="../reference/count_matches.html">count_matches()</a></code>
</li>
</ul>
<p>By executing various combinations of these routines, we were able write algorithms to define many common treatment outcome definitions used in SUD clinical trials. In our supplemental material, we include a “library” of algorithms to calculate each of these definitions. The input of each algorithm is a set of substance use pattern summaries (as a “word”) for all clinical trial participants; the output of each algorithm is a calculated treatment endpoint for each participant included in the input.</p>
<div class="section level3">
<h3 id="example-abstinence-outcome">Example: Abstinence Outcome<a class="anchor" aria-label="anchor" href="#example-abstinence-outcome"></a>
</h3>
<p>One of the treatment endpoint definitions used in <span class="citation">[11]</span> is “the maximum consecutive days abstinent” from opioids, where missing clinic visits are imputed to represent a urine screen positive for the substance of interest. Therefore, the algorithm to calculate this definition for our example subject would be:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The participant's use pattern summary; the %&gt;% symbol is read "and then"</span></span>
<span><span class="st">"++++---+--------------o-"</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># change all missing visits to positive</span></span>
<span>  <span class="fu"><a href="../reference/recode_missing_visits.html">recode_missing_visits</a></span><span class="op">(</span>missing_becomes <span class="op">=</span> <span class="st">"+"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># find the length of the longest abstinent period, in weeks</span></span>
<span>  <span class="fu"><a href="../reference/measure_abstinence_period.html">measure_abstinence_period</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-use-reduction-outcome">Example: Use Reduction Outcome<a class="anchor" aria-label="anchor" href="#example-use-reduction-outcome"></a>
</h3>
<p>The treatment endpoint definition used by <span class="citation">[12]</span> is the “percentage of negative UOS [urine opioid screen] from week 5 to week 24”. Therefore, the code to calculate this definition for our example subject would be:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/count_matches.html">count_matches</a></span><span class="op">(</span></span>
<span>  use_pattern <span class="op">=</span> <span class="st">"++++---+--------------o-"</span>,</span>
<span>  match_is <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>  <span class="co"># Mixed results weeks count as half of a negative week</span></span>
<span>  mixed_results_are <span class="op">=</span> <span class="st">"*"</span>, mixed_weight <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  start <span class="op">=</span> <span class="fl">5</span>, end <span class="op">=</span> <span class="fl">24</span>,</span>
<span>  <span class="co"># Return the proportion instead of the count</span></span>
<span>  proportion <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-relapse-outcome">Example: Relapse Outcome<a class="anchor" aria-label="anchor" href="#example-relapse-outcome"></a>
</h3>
<p>The treatment endpoint for relapse used by <span class="citation">[13]</span> was defined as “3 consecutive positive UOS”, where missing clinic visits are imputed to represent a urine screen positive for the substance of interest. Therefore, the algorithm to calculate this definition for our example subject would be:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="st">"++++---+--------------o-"</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="../reference/recode_missing_visits.html">recode_missing_visits</a></span><span class="op">(</span>missing_becomes <span class="op">=</span> <span class="st">"+"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># change all mixed-results visits to positive</span></span>
<span>  <span class="fu"><a href="../reference/recode_missing_visits.html">recode_missing_visits</a></span><span class="op">(</span>missing_is <span class="op">=</span> <span class="st">"*"</span>, missing_becomes <span class="op">=</span> <span class="st">"+"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># detect if the subject had 3 weeks of positive or missing UDS in a row</span></span>
<span>  <span class="fu"><a href="../reference/detect_subpattern.html">detect_subpattern</a></span><span class="op">(</span>subpattern <span class="op">=</span> <span class="st">"+++"</span><span class="op">)</span></span></code></pre></div>
<p>If we were interested in relapse from a “time-to-event” or reliability perspective,<span class="citation">[14]</span> the algorithm above changes only in the last line:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="st">"++++---+--------------o-"</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="../reference/recode_missing_visits.html">recode_missing_visits</a></span><span class="op">(</span>missing_becomes <span class="op">=</span> <span class="st">"+"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="../reference/recode_missing_visits.html">recode_missing_visits</a></span><span class="op">(</span>missing_is <span class="op">=</span> <span class="st">"*"</span>, missing_becomes <span class="op">=</span> <span class="st">"+"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># detect if the subject had 3 weeks of positive or missing UDS in a row, AND</span></span>
<span>  <span class="co">#   measure the number of weeks until this pattern *starts*</span></span>
<span>  <span class="fu"><a href="../reference/detect_in_window.html">detect_in_window</a></span><span class="op">(</span></span>
<span>    <span class="co"># Look at all possible 3-week windows, and</span></span>
<span>    window_width <span class="op">=</span> <span class="fl">3L</span>,</span>
<span>    <span class="co"># check if any of them have all 3 positive UDS</span></span>
<span>    threshold <span class="op">=</span> <span class="fl">3L</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<hr>
<p></p>
</div>
</div>
<div class="section level2">
<h2 id="discussion">Discussion<a class="anchor" aria-label="anchor" href="#discussion"></a>
</h2>
<div class="section level3">
<h3 id="use-pattern-word-strengths">Use Pattern “Word” Strengths<a class="anchor" aria-label="anchor" href="#use-pattern-word-strengths"></a>
</h3>
<p>We believe this <code>CTNote</code> package and outcomes library will be useful to all future substance use disorder clinical trials in the National Institute of Drug Abuse (NIDA)‘s Clinical Trials Network (CTN) and in other substance use disorder research.<span class="citation">[15]</span> While developing this construct, our work adheres to the Open Knowledge philosophy of science,<span class="citation">[16]</span> so the code for the CTNote package and all related algorithms are open-source. Moreover, representing use patterns as a “word” will allow clinicians and care providers an “at a glance” assessment of participants’ responses to treatment over time and even highlight subgroups of participants by their UDS results. These strengths all come without extensive data processing steps in proprietary software: our software now (and all software our team develops with public funds) will remain open source and free to use.</p>
<p>As an aside, we developed this technique with SUD treatment in mind, but we claim that this “word” structure can be applied with minimal modifications to encapsulate and summarize <em>any</em> discrete-time categorical stochastic process without information loss. For example, a behavioral intervention could assess participant suicidal ideation or depression each day or week of observation via a five-level Likert scale; a participant’s results over time could then be summarized by a quinary word comprised of the numerals from “1” to “5”. Another example could be a daily assessment of pain during cancer treatments with “none”, “low”, “medium”, and “high” options represented by the letters “N”, “L”, “M”, and “H”. The code base developed in our software package can be directly applied to these examples as well, though the algorithms for detecting specific patterns subject of behavior should be modified to fit the context of interest.</p>
</div>
<div class="section level3">
<h3 id="accounting-for-multivariate-categorical-variables">Accounting for Multivariate Categorical Variables<a class="anchor" aria-label="anchor" href="#accounting-for-multivariate-categorical-variables"></a>
</h3>
<p>These use pattern summaries are substance or substance group specific (<em>univariate</em>, statistically speaking). From this opioid use pattern summary word, we can see that our example trial participant quickly reduced their opioid use. However, if we inspect their complete urine screening record, we would see an increase in use of some other substances. For example, this participant does <em>not</em> decrease their cocaine use over the same time interval. The <strong>opioid</strong> use pattern summary can not display information about concurrent <strong>cocaine</strong> use. This is one of our current areas of research: expanding the support of substance use pattern “words” to include poly-substance use in a meaningful way (including the ability to preserve cross-substance correlations).</p>
<!-- ```{r results='asis'} -->
<!-- egTab2_df <-  -->
<!--   ctn0094data::all_drugs %>%  -->
<!--   filter(who == egWho_int) %>%  -->
<!--   filter(source == "UDSAB") %>%  -->
<!--   filter(when >= 0) %>%  -->
<!--   filter(what %in% c("Opioid", "Cocaine")) %>%  -->
<!--   arrange(when) -->
<!-- kable(egTab2_df) -->
<!-- ``` -->
</div>
<div class="section level3">
<h3 id="the-complexity-parsimony-tradeoff">The Complexity-Parsimony Tradeoff<a class="anchor" aria-label="anchor" href="#the-complexity-parsimony-tradeoff"></a>
</h3>
<p>We now discuss some of the technical components surrounding parsimony. In order to ensure that use pattern summaries work regardless of a computer’s locale or operating system, we limit the symbols in the “word” to proper symbols from the American Standard Code for Information Interchange (ASCII) list,<span class="citation">[17]</span> which has been a computing standard for decades.<span class="citation">[18]</span> Technically speaking, there are 128 7-bit ASCII symbols, but only 96 are visible (printable) characters.<span class="citation">[19]</span> Put simply, these 96 characters are all the symbols that a traditional North American computer keyboard can make. Therefore, we could define a substance use pattern “word” with any combination of these 96 printable symbols.</p>
<p>However, such a visual summary with 96 possible values would be incredibly challenging to interpret, consequently failing to meet the parsimony requirement (that our summary be easily read by a clinician). In the interest of simplicity, we chose the five symbols mentioned above (<code>+</code>, <code>-</code>, <code>o</code>, <code>*</code>, and <code>_</code>). We recognize that different clinical trial designs may necessitate the introduction of additional symbols to this use pattern summary, but we strongly recommend (due to human memory constraints) that such lists be kept to seven symbols or fewer.<span class="citation">[20]</span> As an example, we discussed the benefit of adding special symbols for a “missing but excused” clinic visit (or for “urine sample of improper temperature”), but we ultimately did not because such instances were rare in our data.</p>
</div>
<div class="section level3">
<h3 id="the-inflexibility-of-computers">The Inflexibility of Computers<a class="anchor" aria-label="anchor" href="#the-inflexibility-of-computers"></a>
</h3>
<p>When discussing how algorithms make decisions about human behavior, we should never fail to account for the cold and unfeeling logic of a computer. Worth repeating is the old maxim of computing: “computers give you what you ask for, not what you want.” The computer cannot understand the many extenuating circumstances that pervade our human experience. Consider a concrete example: assume a participant was supposed to visit the clinic for a weekly urine test on Thursday, but they came on Wednesday instead due to a conflict at their work; their urine sample from Wednesday came back “clean”. What would a nurse at the substance use clinic do in this case? Most people are reasonable; they would count the urine screen for that week as negative for illicit substances. What would a computer do? Without the direct input of a human to override the clinical trial protocol, a computer would 1) count the negative urine on Wednesday, and 2) mark the participant as a “failure to appear” / “missing urine screen” on Thursday. Then, because, missing urine screens are imputed as “positive” for the substance of interest in many clinical trial protocols, the computer would 3) write this participant’s urine screen as positive for the Thursday, and then 4) mark the use pattern summary as <code>*</code> (mixed results) instead of <code>-</code> (negative results) for that week. While automation is incredibly powerful when done correctly, we must make every effort to ensure that our code “first does no harm”. Further, we must convey this message and provide the underlying code so that users can fully understand what they are getting from its use.</p>
<hr>
<p></p>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>We have presented a use case of the quinary word structure to summarize clinical trial participants’ opioid screening information. Additionally, we gave some code examples of how to use these quinary word summaries in analysis practice, all using the open-source R package <code>CTNote::</code>. Finally, we gave some comments on the strengths and limitations of this approach, and some discussion of applying this data summarization technique in practice.</p>
<div class="section level3">
<h3 id="conflicts-of-interest">Conflicts of Interest<a class="anchor" aria-label="anchor" href="#conflicts-of-interest"></a>
</h3>
<p>None declared?</p>
</div>
<div class="section level3">
<h3 id="funding-acknowledgements">Funding Acknowledgements<a class="anchor" aria-label="anchor" href="#funding-acknowledgements"></a>
</h3>
<p>GJO was supported by NIMHD FIU-RCMI Pilot AWD000000009108 and NIDA UG1DA013035-17; LB; RRB; etc, etc, etc</p>
</div>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body">
<div id="ref-us_hhs_opioid_2018" class="csl-entry">
<div class="csl-left-margin">1. </div>
<div class="csl-right-inline">HHS U. Opioid <span>Crisis</span> <span>Statistics</span>. HHS.gov. 2018. Available: <a href="https://www.hhs.gov/opioids/about-the-epidemic/opioid-crisis-statistics/index.html" class="external-link">https://www.hhs.gov/opioids/about-the-epidemic/opioid-crisis-statistics/index.html</a>
</div>
</div>
<div id="ref-us_samhsa_samhsa_2021" class="csl-entry">
<div class="csl-left-margin">2. </div>
<div class="csl-right-inline">SAMHSA U. <span>SAMHSA</span> releases 2020 <span>National</span> <span>Survey</span> on <span>Drug</span> <span>Use</span> and <span>Health</span>. SAMHSA.gov. 2021. Available: <a href="https://www.samhsa.gov/newsroom/press-announcements/202110260320" class="external-link">https://www.samhsa.gov/newsroom/press-announcements/202110260320</a>
</div>
</div>
<div id="ref-liebhaber_over_2022" class="csl-entry">
<div class="csl-left-margin">3. </div>
<div class="csl-right-inline">Liebhaber L. Over 1 million <span>Americans</span> are seeking treatment for substance use disorder—here’s how it breaks down by state. Zinnia Health. 2022. Available: <a href="https://zinniahealth.com/research/substance-use-disorder-treatment-by-state" class="external-link">https://zinniahealth.com/research/substance-use-disorder-treatment-by-state</a>
</div>
</div>
<div id="ref-us_samhsa_medication-assisted_2022" class="csl-entry">
<div class="csl-left-margin">4. </div>
<div class="csl-right-inline">SAMHSA U. Medication-<span>Assisted</span> <span>Treatment</span> (<span>MAT</span>). SAMHSA.gov. 2022. Available: <a href="https://www.samhsa.gov/medication-assisted-treatment" class="external-link">https://www.samhsa.gov/medication-assisted-treatment</a>
</div>
</div>
<div id="ref-fisher_mathematical_1922" class="csl-entry">
<div class="csl-left-margin">5. </div>
<div class="csl-right-inline">Fisher RA, Russell EJ. On the mathematical foundations of theoretical statistics. Philosophical Transactions of the Royal Society of London Series A, Containing Papers of a Mathematical or Physical Character. 1922;222: 309–368. doi:<a href="https://doi.org/10.1098/rsta.1922.0009" class="external-link">10.1098/rsta.1922.0009</a>
</div>
</div>
<div id="ref-odom_ctnote_2022" class="csl-entry">
<div class="csl-left-margin">6. </div>
<div class="csl-right-inline">Odom G, Brandt L, Balise R. <span>CTNote</span>: <span>Clinical</span> <span>Trial</span> <span>Network</span> <span>Outcomes</span>, <span>Treatments</span> and <span>Endpoints</span>. 2022. Available: <a href="https://github.com/CTN-0094/CTNote" class="external-link">https://github.com/CTN-0094/CTNote</a>
</div>
</div>
<div id="ref-r_core_team_r_2022" class="csl-entry">
<div class="csl-left-margin">7. </div>
<div class="csl-right-inline">R Core Team. R: <span>A</span> <span>Language</span> and <span>Environment</span> for <span>Statistical</span> <span>Computing</span>. Vienna, Austria: R Foundation for Statistical Computing; 2022. Available: <a href="https://www.R-project.org/" class="external-link">https://www.R-project.org/</a>
</div>
</div>
<div id="ref-open_data_handbook_machine_2022" class="csl-entry">
<div class="csl-left-margin">8. </div>
<div class="csl-right-inline">Handbook OD. Machine readable. Open Data Handbook. 2022. Available: <a href="https://opendatahandbook.org/glossary/en/terms/machine-readable/" class="external-link">https://opendatahandbook.org/glossary/en/terms/machine-readable/</a>
</div>
</div>
<div id="ref-clapham_binary_2009" class="csl-entry">
<div class="csl-left-margin">9. </div>
<div class="csl-right-inline">Clapham C, Nicholson J. Binary <span>Word</span>. The <span>Concise</span> <span>Oxford</span> <span>Dictionary</span> of <span>Mathematics</span>. Oxford University Press; 2009. Available: <a href="https://www.oxfordreference.com/view/10.1093/acref/9780199235940.001.0001/acref-9780199235940-e-293" class="external-link">https://www.oxfordreference.com/view/10.1093/acref/9780199235940.001.0001/acref-9780199235940-e-293</a>
</div>
</div>
<div id="ref-geer_genetics_1999" class="csl-entry">
<div class="csl-left-margin">10. </div>
<div class="csl-right-inline">Geer R, Morrison J. Genetics <span>Review</span>: <span>Base</span> <span>Pairs</span>. 1999. Available: <a href="https://www.ncbi.nlm.nih.gov/Class/MLACourse/Original8Hour/Genetics/basepair.html" class="external-link">https://www.ncbi.nlm.nih.gov/Class/MLACourse/Original8Hour/Genetics/basepair.html</a>
</div>
</div>
<div id="ref-schottenfeld_maintenance_2008" class="csl-entry">
<div class="csl-left-margin">11. </div>
<div class="csl-right-inline">Schottenfeld RS, Chawarski MC, Mazlan M. Maintenance treatment with buprenorphine and naltrexone for heroin dependence in <span>Malaysia</span>: A randomised, double-blind, placebo-controlled trial. The Lancet. 2008;371: 2192–2200. doi:<a href="https://doi.org/10.1016/S0140-6736(08)60954-X" class="external-link">10.1016/S0140-6736(08)60954-X</a>
</div>
</div>
<div id="ref-haight_efficacy_2019" class="csl-entry">
<div class="csl-left-margin">12. </div>
<div class="csl-right-inline">Haight BR, Learned SM, Laffont CM, Fudala PJ, Zhao Y, Garofalo AS, et al. Efficacy and safety of a monthly buprenorphine depot injection for opioid use disorder: A multicentre, randomised, double-blind, placebo-controlled, phase 3 trial. The Lancet. 2019;393: 778–790. doi:<a href="https://doi.org/10.1016/S0140-6736(18)32259-1" class="external-link">10.1016/S0140-6736(18)32259-1</a>
</div>
</div>
<div id="ref-krupitsky_naltrexone_2006" class="csl-entry">
<div class="csl-left-margin">13. </div>
<div class="csl-right-inline">Krupitsky EM, Zvartau EE, Masalov DV, Tsoy MV, Burakov AM, Egorova VY, et al. Naltrexone with or without fluoxetine for preventing relapse to heroin addiction in <span>St</span>. <span>Petersburg</span>, <span>Russia</span>. Journal of Substance Abuse Treatment. 2006;31: 319–328. doi:<a href="https://doi.org/10.1016/j.jsat.2006.05.005" class="external-link">10.1016/j.jsat.2006.05.005</a>
</div>
</div>
<div id="ref-kleinbaum_introduction_2012" class="csl-entry">
<div class="csl-left-margin">14. </div>
<div class="csl-right-inline">Kleinbaum DG, Klein M. Introduction to <span>Survival</span> <span>Analysis</span>. In: Kleinbaum DG, Klein M, editors. Survival <span>Analysis</span>: <span>A</span> <span>Self</span>-<span>Learning</span> <span>Text</span>. New York, NY: Springer; 2012. pp. 1–54. doi:<a href="https://doi.org/10.1007/978-1-4419-6646-9_1" class="external-link">10.1007/978-1-4419-6646-9_1</a>
</div>
</div>
<div id="ref-tai_nida_2021" class="csl-entry">
<div class="csl-left-margin">15. </div>
<div class="csl-right-inline">Tai B, Dobbins R, Blackeney Q, Liu D, Moran L. The <span>NIDA</span> clinical trials network: Evolving, expanding, and addressing the opioid epidemic. Addiction Science &amp; Clinical Practice. 2021;16: 28. doi:<a href="https://doi.org/10.1186/s13722-021-00238-6" class="external-link">10.1186/s13722-021-00238-6</a>
</div>
</div>
<div id="ref-molloy_open_2011" class="csl-entry">
<div class="csl-left-margin">16. </div>
<div class="csl-right-inline">Molloy JC. The <span>Open</span> <span>Knowledge</span> <span>Foundation</span>: <span>Open</span> <span>Data</span> <span>Means</span> <span>Better</span> <span>Science</span>. PLoS Biology. 2011;9: e1001195. doi:<a href="https://doi.org/10.1371/journal.pbio.1001195" class="external-link">10.1371/journal.pbio.1001195</a>
</div>
</div>
<div id="ref-injosoft_ab_extended_2022" class="csl-entry">
<div class="csl-left-margin">17. </div>
<div class="csl-right-inline">AB I. The extended <span>ASCII</span> table. ASCII Code. 2022. Available: <a href="https://www.ascii-code.com/" class="external-link">https://www.ascii-code.com/</a>
</div>
</div>
<div id="ref-brandel_1963_1999" class="csl-entry">
<div class="csl-left-margin">18. </div>
<div class="csl-right-inline">Brandel M. 1963: <span>The</span> debut of <span>ASCII</span>. CNN. 1999. Available: <a href="http://edition.cnn.com/TECH/computing/9907/06/1963.idg/" class="external-link">http://edition.cnn.com/TECH/computing/9907/06/1963.idg/</a>
</div>
</div>
<div id="ref-ibm_ascii_2022" class="csl-entry">
<div class="csl-left-margin">19. </div>
<div class="csl-right-inline">IBM. <span>ASCII</span> <span>Characters</span>. 2022. Available: <a href="https://prod.ibmdocs-production-dal-6099123ce774e592a519d7c33db8265e-0000.us-south.containers.appdomain.cloud/docs/en/aix/7.1?topic=support-ascii-characters" class="external-link">https://prod.ibmdocs-production-dal-6099123ce774e592a519d7c33db8265e-0000.us-south.containers.appdomain.cloud/docs/en/aix/7.1?topic=support-ascii-characters</a>
</div>
</div>
<div id="ref-miller_magical_1956" class="csl-entry">
<div class="csl-left-margin">20. </div>
<div class="csl-right-inline">Miller GA. The magical number seven, plus or minus two: <span>Some</span> limits on our capacity for processing information. Psychological Review. 1956;63: 81–97. doi:<a href="https://doi.org/10.1037/h0043158" class="external-link">10.1037/h0043158</a>
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Gabriel Odom, Laura Brandt, Raymond Balise.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
